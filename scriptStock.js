const _0x24c8ed=_0x4144;(function(_0x28e0f2,_0x3df3fd){const _0x41f31d=_0x4144,_0x1ffdc6=_0x28e0f2();while(!![]){try{const _0x25794b=-parseInt(_0x41f31d(0x1a4))/0x1*(parseInt(_0x41f31d(0x198))/0x2)+parseInt(_0x41f31d(0x17d))/0x3*(parseInt(_0x41f31d(0x191))/0x4)+-parseInt(_0x41f31d(0x1c9))/0x5+parseInt(_0x41f31d(0x1c2))/0x6+-parseInt(_0x41f31d(0x17f))/0x7+-parseInt(_0x41f31d(0x14a))/0x8*(-parseInt(_0x41f31d(0x14c))/0x9)+-parseInt(_0x41f31d(0x1a3))/0xa*(-parseInt(_0x41f31d(0x160))/0xb);if(_0x25794b===_0x3df3fd)break;else _0x1ffdc6['push'](_0x1ffdc6['shift']());}catch(_0x9abb68){_0x1ffdc6['push'](_0x1ffdc6['shift']());}}}(_0x2aeb,0x2cbfe));function _0x2aeb(){const _0x10b242=['\x20FCFA','body','length','flex','stockTableGlobal','charAt','change','value','stockEndDate','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20l\x27entr√©e:','filter','cancelDelete','loginForm','545664oHTUlq','includes','slice','product','cyber-campus-2706f','signupButton','sales','227740dKrXuK','appendChild','then','index.html','update','keys','createElement','prices','utils','totalSales','reduce','toLocaleString','analysisSection','<option\x20value=\x22\x22>S√©lectionner\x20un\x20produit</option>','Error\x20creating\x20user:','href','salesStartDate','table_to_sheet','reset','Activer\x20le\x20mode\x20clair','Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement\x20:','toggleAnalysisButton','limitToLast','tbody','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20entr√©e\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22confirmDelete\x22>Confirmer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22cancelDelete\x22>Annuler</button>\x0a\x20\x20\x20\x20','className','endAt','getItem','\x20FCFA)','719410601264','confirmDelete','salesEndDate','TicketsTotal','exists','book_new','key','2448968Tkcwkx','Analyse\x20des\x20ventes','9XoKYII','values','subscriptionRequiredModal','initializeApp','getElementById','Utilisateur\x20introuvable','innerHTML','preventDefault','rgba(255,\x20255,\x20255,\x200.1)','dataset','dashboardContainer','catch','toggleSalesButton','Ce\x20nom\x20d\x27utilisateur\x20est\x20d√©j√†\x20utilis√©.','th[data-sort]','set','https://cyber-campus-2706f-default-rtdb.firebaseio.com','Activer\x20le\x20mode\x20sombre','signupForm','sales/','976074vdHBoW','Inscription\x20r√©ussie\x20!\x20Connectez-vous.','setAttribute','toISOString','textContent','theme-toggle','loginContainer','click','removeChild','div','labels','book_append_sheet','querySelector','aria-label','classList','push','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e\x20:','threeMonth','salesTable','addEventListener','signupUsername','orderByChild','forEach','password','submit','none','users/','total','getContext','2529vLhdxK','Prix\x20de\x20vente','1084419GkmIsy','APP','signupContainer','error','ref','Moyenne\x20des\x20ventes\x20par\x20jour:\x20','averageSales','equalTo','dateTime','salesChart','stockStartDate','AverageSales','endDate','style','Ventes','display','loginFromSignup','true','464KVEXJA','once','add','prix','sort','block','onclick','577124fUiSwQ','active','val','input','light-theme','documentElement','#searchInputs\x20input','filterStockDates','querySelectorAll','insertRow','insertCell','20zoHwJE','1RqRyMe','delete-icon','toFixed','destroy','salesDetailsSection','rgb(0,\x20255,\x20255)','database','Erreur\x20lors\x20de\x20la\x20cr√©ation\x20du\x20compte','darkTheme','Total\x20des\x20ventes:\x20','Utilisateur:\x20','tbody\x20tr','remove','D√©tail\x20des\x20ventes','filterSalesDates','getTime','cyber-campus-2706f.appspot.com'];_0x2aeb=function(){return _0x10b242;};return _0x2aeb();}const firebaseConfig={'apiKey':'AIzaSyB6AUBnK_7Vy2ABWI2JMo3ebG_Sljr8XlY','authDomain':'cyber-campus-2706f.firebaseapp.com','databaseURL':_0x24c8ed(0x15c),'projectId':_0x24c8ed(0x1c6),'storageBucket':_0x24c8ed(0x1b4),'messagingSenderId':_0x24c8ed(0x1e6),'appId':'1:719410601264:web:44fd2e3757721866303cf5','measurementId':'G-CEEFJP5LYZ'};firebase[_0x24c8ed(0x14f)](firebaseConfig);const database=firebase[_0x24c8ed(0x1aa)](),adminRef=database[_0x24c8ed(0x183)]('admin/subscription'),loginForm=document[_0x24c8ed(0x150)](_0x24c8ed(0x1c1)),signupForm=document[_0x24c8ed(0x150)](_0x24c8ed(0x15e)),loginContainer=document[_0x24c8ed(0x150)](_0x24c8ed(0x166)),signupContainer=document[_0x24c8ed(0x150)](_0x24c8ed(0x181)),dashboardContainer=document[_0x24c8ed(0x150)](_0x24c8ed(0x156)),salesForm=document[_0x24c8ed(0x150)]('salesForm'),salesTable=document['getElementById']('salesTable'),totalSalesElement=document[_0x24c8ed(0x150)](_0x24c8ed(0x1d2)),averageSalesElement=document[_0x24c8ed(0x150)](_0x24c8ed(0x185)),userInfoElement=document[_0x24c8ed(0x150)]('userInfo'),toggleAnalysisButton=document[_0x24c8ed(0x150)](_0x24c8ed(0x1de)),toggleSalesButton=document[_0x24c8ed(0x150)](_0x24c8ed(0x158)),analysisSection=document['getElementById'](_0x24c8ed(0x1d5)),salesDetailsSection=document[_0x24c8ed(0x150)](_0x24c8ed(0x1a8)),signupButton=document[_0x24c8ed(0x150)](_0x24c8ed(0x1c7)),loginFromSignup=document[_0x24c8ed(0x150)](_0x24c8ed(0x18f)),productSelect=document['getElementById'](_0x24c8ed(0x1c5)),stockTableGlobal=document[_0x24c8ed(0x150)](_0x24c8ed(0x1b9));let salesChart,currentUser,salesData=[],stockData=[],ticketCategories={},salesDataListener;document[_0x24c8ed(0x150)](_0x24c8ed(0x187))[_0x24c8ed(0x1bc)]=new Date()[_0x24c8ed(0x163)]()[_0x24c8ed(0x1c4)](0x0,0x10);function fetchTicketCategories(){const _0x5e6581=_0x24c8ed;database[_0x5e6581(0x183)](_0x5e6581(0x146))['once'](_0x5e6581(0x1bc))['then'](_0x2f4d55=>{ticketCategories=_0x2f4d55['val']()||{},populateProductSelect();});}function populateProductSelect(){const _0x4b108a=_0x24c8ed;productSelect[_0x4b108a(0x152)]=_0x4b108a(0x1d6);for(const _0x52a3b5 in ticketCategories){const _0x801251=ticketCategories[_0x52a3b5][_0x4b108a(0x194)][0x0],_0x2e556e=document['createElement']('option');_0x2e556e[_0x4b108a(0x1bc)]=_0x52a3b5,_0x2e556e[_0x4b108a(0x164)]=_0x52a3b5+'\x20('+_0x801251+_0x4b108a(0x1e5),productSelect['appendChild'](_0x2e556e);}}fetchTicketCategories(),loginForm[_0x24c8ed(0x173)](_0x24c8ed(0x178),function(_0x1151ae){const _0x395dce=_0x24c8ed;_0x1151ae[_0x395dce(0x153)]();const _0x5b22b0=document[_0x395dce(0x150)]('username')[_0x395dce(0x1bc)],_0xafe1d8=document['getElementById']('password')[_0x395dce(0x1bc)];database[_0x395dce(0x183)](_0x395dce(0x17a)+_0x5b22b0)['once'](_0x395dce(0x1bc))['then'](_0xb87ce9=>{const _0x5678fd=_0x395dce;_0xb87ce9[_0x5678fd(0x147)]()?_0xb87ce9[_0x5678fd(0x19a)]()[_0x5678fd(0x177)]===_0xafe1d8?loginSuccess(_0x5b22b0):alert('Mot\x20de\x20passe\x20incorrect'):alert(_0x5678fd(0x151));});}),signupForm[_0x24c8ed(0x173)](_0x24c8ed(0x178),function(_0x1921c9){const _0x887c38=_0x24c8ed;_0x1921c9[_0x887c38(0x153)]();const _0x478925=document['getElementById'](_0x887c38(0x174))[_0x887c38(0x1bc)],_0x9e90b=document[_0x887c38(0x150)]('signupPassword')['value'];database[_0x887c38(0x183)]('users/'+_0x478925)[_0x887c38(0x192)]('value')[_0x887c38(0x1cb)](_0x1293f4=>{const _0x3f2bc4=_0x887c38;_0x1293f4[_0x3f2bc4(0x147)]()?alert(_0x3f2bc4(0x159)):database[_0x3f2bc4(0x183)](_0x3f2bc4(0x17a)+_0x478925)[_0x3f2bc4(0x15b)]({'password':_0x9e90b})[_0x3f2bc4(0x1cb)](()=>{const _0x447e4e=_0x3f2bc4;alert(_0x447e4e(0x161)),signupContainer['style'][_0x447e4e(0x18e)]=_0x447e4e(0x179),loginContainer[_0x447e4e(0x18c)][_0x447e4e(0x18e)]='block';})[_0x3f2bc4(0x157)](_0x4604bd=>{const _0x7455fa=_0x3f2bc4;console[_0x7455fa(0x182)](_0x7455fa(0x1d7),_0x4604bd),alert(_0x7455fa(0x1ab));});});}),signupButton[_0x24c8ed(0x173)](_0x24c8ed(0x167),function(){const _0x194a5a=_0x24c8ed;loginContainer[_0x194a5a(0x18c)][_0x194a5a(0x18e)]=_0x194a5a(0x179),signupContainer['style'][_0x194a5a(0x18e)]=_0x194a5a(0x196);}),loginFromSignup[_0x24c8ed(0x173)](_0x24c8ed(0x167),function(){const _0x4d957c=_0x24c8ed;signupContainer[_0x4d957c(0x18c)]['display']=_0x4d957c(0x179),loginContainer['style'][_0x4d957c(0x18e)]=_0x4d957c(0x196);});function loginSuccess(_0x56c7e3){const _0x3b699d=_0x24c8ed;currentUser=_0x56c7e3,loginContainer[_0x3b699d(0x18c)][_0x3b699d(0x18e)]=_0x3b699d(0x179),signupContainer[_0x3b699d(0x18c)]['display']='none',dashboardContainer[_0x3b699d(0x18c)]['display']=_0x3b699d(0x196),userInfoElement[_0x3b699d(0x164)]=_0x3b699d(0x1ae)+_0x56c7e3,checkSubscriptionStatus()['then'](_0x13aeb3=>{_0x13aeb3?(updateTable(),updateStockTables(),updateAnalysis(),listenForSalesDataChanges()):showSubscriptionRequiredModal();})[_0x3b699d(0x157)](_0x1e70c0=>{const _0x47f253=_0x3b699d;console['error'](_0x47f253(0x1dd),_0x1e70c0),alert('Erreur\x20lors\x20de\x20la\x20v√©rification\x20de\x20l\x27abonnement.');});}function listenForSalesDataChanges(){const _0x237da2=_0x24c8ed;salesDataListener=database[_0x237da2(0x183)](_0x237da2(0x15f)+currentUser)['on'](_0x237da2(0x1bc),_0x3483e4=>{const _0x399af6=_0x237da2;salesData=[],_0x3483e4[_0x399af6(0x176)](_0x24e313=>{const _0xa5db99=_0x399af6,_0x51e4b0=_0x24e313['val']();_0x51e4b0[_0xa5db99(0x149)]=_0x24e313['key'],_0x51e4b0['total']=(_0x51e4b0['V']*_0x51e4b0['PV'])[_0xa5db99(0x1a6)](0x2),salesData[_0xa5db99(0x16f)](_0x51e4b0);}),analysisSection[_0x399af6(0x18c)][_0x399af6(0x18e)]===_0x399af6(0x196)&&updateAnalysis(salesData);});}document[_0x24c8ed(0x150)](_0x24c8ed(0x1c5))[_0x24c8ed(0x173)](_0x24c8ed(0x1bb),function(){const _0x54eaef=_0x24c8ed,_0xb345fc=this[_0x54eaef(0x1bc)];database[_0x54eaef(0x183)]('sales/'+currentUser)[_0x54eaef(0x175)]('product')[_0x54eaef(0x186)](_0xb345fc)[_0x54eaef(0x1df)](0x1)[_0x54eaef(0x192)]('value')[_0x54eaef(0x1cb)](_0x5cb82=>{const _0x16d767=_0x54eaef;if(_0x5cb82[_0x16d767(0x147)]()){const _0x3ca28f=Object[_0x16d767(0x14d)](_0x5cb82[_0x16d767(0x19a)]())[0x0];document[_0x16d767(0x150)]('SI')[_0x16d767(0x1bc)]=_0x3ca28f['SF']||0x0;}else document['getElementById']('SI')[_0x16d767(0x1bc)]=0x0;}),updatePV();}),document[_0x24c8ed(0x150)]('V')[_0x24c8ed(0x173)](_0x24c8ed(0x19b),updateSF),document[_0x24c8ed(0x150)](_0x24c8ed(0x180))[_0x24c8ed(0x173)]('input',updateSF);function updateSF(){const _0x3f1075=_0x24c8ed,_0x2457e7=parseInt(document[_0x3f1075(0x150)]('SI')[_0x3f1075(0x1bc)])||0x0,_0x4ac85b=parseInt(document[_0x3f1075(0x150)](_0x3f1075(0x180))[_0x3f1075(0x1bc)])||0x0,_0x10c00e=parseInt(document[_0x3f1075(0x150)]('V')[_0x3f1075(0x1bc)])||0x0;document[_0x3f1075(0x150)]('SF')[_0x3f1075(0x1bc)]=_0x2457e7+_0x4ac85b-_0x10c00e;}function updatePV(){const _0x20e080=_0x24c8ed,_0x22dfd9=document[_0x20e080(0x150)](_0x20e080(0x1c5))[_0x20e080(0x1bc)],_0x5de16e=ticketCategories[_0x22dfd9]?.[_0x20e080(0x194)][0x0];document['getElementById']('PV')[_0x20e080(0x1bc)]=_0x5de16e||0x0;}salesForm[_0x24c8ed(0x173)](_0x24c8ed(0x178),function(_0x3aff91){const _0x58a297=_0x24c8ed;_0x3aff91[_0x58a297(0x153)]();const _0x14f457={'dateTime':document[_0x58a297(0x150)](_0x58a297(0x187))[_0x58a297(0x1bc)],'product':document[_0x58a297(0x150)](_0x58a297(0x1c5))[_0x58a297(0x1bc)],'SI':parseInt(document[_0x58a297(0x150)]('SI')[_0x58a297(0x1bc)])||0x0,'APP':parseInt(document[_0x58a297(0x150)](_0x58a297(0x180))['value'])||0x0,'V':parseInt(document[_0x58a297(0x150)]('V')[_0x58a297(0x1bc)])||0x0,'SF':parseInt(document[_0x58a297(0x150)]('SF')[_0x58a297(0x1bc)])||0x0,'PV':parseFloat(document['getElementById']('PV')['value'])||0x0};database[_0x58a297(0x183)](_0x58a297(0x15f)+currentUser)[_0x58a297(0x16f)](_0x14f457)[_0x58a297(0x1cb)](()=>{const _0x1fa28d=_0x58a297;updateTable(),updateStockTables(),updateAnalysis(),salesForm[_0x1fa28d(0x1db)](),document['getElementById'](_0x1fa28d(0x187))[_0x1fa28d(0x1bc)]=new Date()[_0x1fa28d(0x163)]()[_0x1fa28d(0x1c4)](0x0,0x10);})[_0x58a297(0x157)](_0x441f80=>{const _0x40c053=_0x58a297;console['error'](_0x40c053(0x170),_0x441f80),alert('Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20de\x20l\x27entr√©e.');});});function updateTable(){const _0x105665=_0x24c8ed,_0x43d1ec=salesTable[_0x105665(0x16c)](_0x105665(0x1e0));_0x43d1ec['innerHTML']='',database[_0x105665(0x183)](_0x105665(0x15f)+currentUser)['once'](_0x105665(0x1bc))[_0x105665(0x1cb)](_0x6ea177=>{const _0x40aab5=_0x105665;salesData=[],_0x6ea177[_0x40aab5(0x176)](_0x5d952d=>{const _0x94320e=_0x40aab5,_0x30a99c=_0x5d952d[_0x94320e(0x19a)]();_0x30a99c[_0x94320e(0x17b)]=(_0x30a99c['V']*_0x30a99c['PV'])[_0x94320e(0x1a6)](0x2),salesData[_0x94320e(0x16f)](_0x30a99c);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function updateStockTables(){const _0x444f7c=_0x24c8ed,_0xd8d172=document[_0x444f7c(0x150)](_0x444f7c(0x1b9));_0xd8d172[_0x444f7c(0x16c)](_0x444f7c(0x1e0))[_0x444f7c(0x152)]='',database[_0x444f7c(0x183)](_0x444f7c(0x15f)+currentUser)['once'](_0x444f7c(0x1bc))[_0x444f7c(0x1cb)](_0x4a3174=>{const _0x12fcfb=_0x444f7c,_0x3a7fb4={};_0x4a3174['forEach'](_0xe33e93=>{const _0x589430=_0x4144,_0x37b818=_0xe33e93[_0x589430(0x19a)]();(!_0x3a7fb4[_0x37b818[_0x589430(0x1c5)]]||new Date(_0x37b818['dateTime'])>new Date(_0x3a7fb4[_0x37b818[_0x589430(0x1c5)]]['dateTime']))&&(_0x3a7fb4[_0x37b818[_0x589430(0x1c5)]]=_0x37b818);}),Object[_0x12fcfb(0x14d)](_0x3a7fb4)[_0x12fcfb(0x176)](_0x539ee1=>{const _0x3cf278=_0x12fcfb,_0x22b5f7=_0xd8d172[_0x3cf278(0x16c)](_0x3cf278(0x1e0))[_0x3cf278(0x1a1)]();_0x22b5f7[_0x3cf278(0x1a2)](0x0)['textContent']=_0x539ee1[_0x3cf278(0x1c5)],_0x22b5f7['insertCell'](0x1)[_0x3cf278(0x164)]=_0x539ee1['SF'],_0x22b5f7[_0x3cf278(0x1a2)](0x2)['textContent']=new Date(_0x539ee1['dateTime'])[_0x3cf278(0x1d4)]();}),setupSort(_0xd8d172);});}function _0x4144(_0x497b7e,_0x3c17f3){const _0x2aeb0a=_0x2aeb();return _0x4144=function(_0x4144c0,_0x543fde){_0x4144c0=_0x4144c0-0x145;let _0x14dcb5=_0x2aeb0a[_0x4144c0];return _0x14dcb5;},_0x4144(_0x497b7e,_0x3c17f3);}function exportToExcel(){const _0x3f3cf8=_0x24c8ed,_0x1164af=XLSX['utils'][_0x3f3cf8(0x148)](),_0x48e6d9=XLSX[_0x3f3cf8(0x1d1)][_0x3f3cf8(0x1da)](document[_0x3f3cf8(0x150)]('salesTable'));XLSX[_0x3f3cf8(0x1d1)][_0x3f3cf8(0x16b)](_0x1164af,_0x48e6d9,_0x3f3cf8(0x18d)),XLSX['writeFile'](_0x1164af,'ventes_wifi_zone.xlsx');}document[_0x24c8ed(0x150)]('exportExcel')[_0x24c8ed(0x173)](_0x24c8ed(0x167),exportToExcel);function deleteEntry(_0x1fc511){const _0x597df6=_0x24c8ed;database[_0x597df6(0x183)](_0x597df6(0x15f)+currentUser+'/'+_0x1fc511)[_0x597df6(0x192)](_0x597df6(0x1bc))[_0x597df6(0x1cb)](_0x1c63d6=>{const _0x3898b5=_0x597df6,_0x349227=_0x1c63d6[_0x3898b5(0x19a)]();return database[_0x3898b5(0x183)]('sales/'+currentUser+'/'+_0x1fc511)[_0x3898b5(0x1b0)]()[_0x3898b5(0x1cb)](()=>{return console['log']('Entr√©e\x20supprim√©e\x20avec\x20succ√®s'),updateStockAfterDeletion(_0x349227);});})[_0x597df6(0x1cb)](()=>{return updateTable();})[_0x597df6(0x1cb)](()=>{updateStockTables(),updateAnalysis();})[_0x597df6(0x157)](_0x157b4e=>{const _0x4f6ace=_0x597df6;console[_0x4f6ace(0x182)](_0x4f6ace(0x1be),_0x157b4e);});}function updateStockAfterDeletion(_0x3ce690){const _0x23fe51=_0x24c8ed;return database[_0x23fe51(0x183)]('sales/'+currentUser)[_0x23fe51(0x175)]('dateTime')[_0x23fe51(0x1e3)](_0x3ce690['dateTime'])[_0x23fe51(0x1df)](0x2)[_0x23fe51(0x192)](_0x23fe51(0x1bc))[_0x23fe51(0x1cb)](_0x5c3d32=>{const _0x31aab6=_0x23fe51;let _0xd3e06e=[];_0x5c3d32[_0x31aab6(0x176)](_0x1c8701=>{const _0x27b9f6=_0x31aab6;_0xd3e06e[_0x27b9f6(0x16f)]({'key':_0x1c8701['key'],..._0x1c8701[_0x27b9f6(0x19a)]()});}),_0xd3e06e['sort']((_0x1a4ceb,_0x541c48)=>new Date(_0x541c48[_0x31aab6(0x187)])-new Date(_0x1a4ceb[_0x31aab6(0x187)]));if(_0xd3e06e['length']>0x1&&_0xd3e06e[0x0][_0x31aab6(0x149)]!==_0x3ce690[_0x31aab6(0x149)]){const _0x1d72e1=_0xd3e06e[0x1],_0x43b777=_0x1d72e1['SF']+_0x3ce690['V']-_0x3ce690[_0x31aab6(0x180)];return database[_0x31aab6(0x183)]('sales/'+currentUser+'/'+_0x1d72e1[_0x31aab6(0x149)])[_0x31aab6(0x1cd)]({'SF':_0x43b777});}return Promise['resolve']();});}function updateTable(){const _0x2200b0=_0x24c8ed;return database['ref'](_0x2200b0(0x15f)+currentUser)[_0x2200b0(0x192)](_0x2200b0(0x1bc))['then'](_0x14a1d2=>{const _0x2e5d2d=_0x2200b0;salesData=[],_0x14a1d2[_0x2e5d2d(0x176)](_0x6652fb=>{const _0x4178f1=_0x2e5d2d,_0x2ba4f4=_0x6652fb['val']();_0x2ba4f4[_0x4178f1(0x149)]=_0x6652fb[_0x4178f1(0x149)],_0x2ba4f4[_0x4178f1(0x17b)]=(_0x2ba4f4['V']*_0x2ba4f4['PV'])[_0x4178f1(0x1a6)](0x2),salesData[_0x4178f1(0x16f)](_0x2ba4f4);}),renderTable(salesData),setupSearch(),setupSort(salesTable);});}function renderTable(_0x30b2b3){const _0x5544c2=_0x24c8ed,_0x483c9a=salesTable['querySelector']('tbody');_0x483c9a[_0x5544c2(0x152)]='',_0x30b2b3['forEach'](_0xee9677=>{const _0x444963=_0x5544c2,_0x2f2471=_0x483c9a[_0x444963(0x1a1)]();_0x2f2471[_0x444963(0x155)][_0x444963(0x149)]=_0xee9677[_0x444963(0x149)],_0x2f2471[_0x444963(0x1a2)](0x0)[_0x444963(0x164)]=new Date(_0xee9677[_0x444963(0x187)])[_0x444963(0x1d4)](),_0x2f2471['insertCell'](0x1)[_0x444963(0x164)]=_0xee9677[_0x444963(0x1c5)],_0x2f2471['insertCell'](0x2)['textContent']=_0xee9677['SI'],_0x2f2471[_0x444963(0x1a2)](0x3)[_0x444963(0x164)]=_0xee9677[_0x444963(0x180)],_0x2f2471['insertCell'](0x4)[_0x444963(0x164)]=_0xee9677['V'],_0x2f2471[_0x444963(0x1a2)](0x5)['textContent']=_0xee9677['SF'],_0x2f2471['insertCell'](0x6)[_0x444963(0x164)]=_0xee9677['PV'],_0x2f2471[_0x444963(0x1a2)](0x7)[_0x444963(0x164)]=_0xee9677['total'];}),addDeleteIcons();}function addDeleteIcons(){const _0x33ed26=_0x24c8ed,_0x547f66=salesTable['querySelectorAll'](_0x33ed26(0x1af));_0x547f66['forEach'](_0x132fd3=>{const _0x285fff=_0x33ed26,_0x2759c3=document[_0x285fff(0x1cf)]('span');_0x2759c3[_0x285fff(0x152)]='‚úñ',_0x2759c3[_0x285fff(0x1e2)]=_0x285fff(0x1a5),_0x2759c3[_0x285fff(0x197)]=_0x69a2ba=>{const _0x305f71=_0x285fff;_0x69a2ba['stopPropagation'](),showConfirmDialog(_0x132fd3[_0x305f71(0x155)][_0x305f71(0x149)]);},_0x132fd3['querySelector']('td:first-child')[_0x285fff(0x1ca)](_0x2759c3);});}function showConfirmDialog(_0x333a89){const _0x2b2241=_0x24c8ed,_0x3b7081=document[_0x2b2241(0x1cf)](_0x2b2241(0x169));_0x3b7081[_0x2b2241(0x1e2)]='confirm-dialog',_0x3b7081[_0x2b2241(0x152)]=_0x2b2241(0x1e1),document['body'][_0x2b2241(0x1ca)](_0x3b7081),document['getElementById'](_0x2b2241(0x1e7))[_0x2b2241(0x197)]=()=>{const _0xfebd4d=_0x2b2241;deleteEntry(_0x333a89),document[_0xfebd4d(0x1b6)][_0xfebd4d(0x168)](_0x3b7081);},document['getElementById'](_0x2b2241(0x1c0))['onclick']=()=>{const _0x2b63f4=_0x2b2241;document[_0x2b63f4(0x1b6)][_0x2b63f4(0x168)](_0x3b7081);};}function setupSearch(){const _0x1103c6=_0x24c8ed,_0x2e9667=document[_0x1103c6(0x1a0)](_0x1103c6(0x19e));_0x2e9667[_0x1103c6(0x176)](_0x109f65=>{const _0x4d5db0=_0x1103c6;_0x109f65[_0x4d5db0(0x173)](_0x4d5db0(0x19b),()=>{const _0x382160=_0x4d5db0,_0x23012b=salesData[_0x382160(0x1bf)](_0x3ea6cb=>{const _0x586178=_0x382160;return Object[_0x586178(0x1ce)](_0x3ea6cb)['every'](_0x538fd3=>{const _0x3435e4=_0x586178,_0x358517=document[_0x3435e4(0x150)]('search'+(_0x538fd3[_0x3435e4(0x1ba)](0x0)['toUpperCase']()+_0x538fd3[_0x3435e4(0x1c4)](0x1)))?.[_0x3435e4(0x1bc)]['toLowerCase']()||'';return _0x3ea6cb[_0x538fd3]['toString']()['toLowerCase']()[_0x3435e4(0x1c3)](_0x358517);});});renderTable(_0x23012b),updateAnalysis(_0x23012b);});});}function setupSort(_0x5491e2){const _0x153d96=_0x24c8ed,_0xcd38fc=_0x5491e2[_0x153d96(0x1a0)](_0x153d96(0x15a));_0xcd38fc[_0x153d96(0x176)](_0x651246=>{const _0x3ee0e1=_0x153d96;_0x651246[_0x3ee0e1(0x173)]('click',()=>{const _0x507d22=_0x3ee0e1,_0x309a5a=_0x651246[_0x507d22(0x155)][_0x507d22(0x195)],_0x548cf6=_0x5491e2['id']===_0x507d22(0x172)?salesData:stockData;_0x548cf6['sort']((_0xf679f8,_0x57b0e1)=>{if(_0xf679f8[_0x309a5a]<_0x57b0e1[_0x309a5a])return-0x1;if(_0xf679f8[_0x309a5a]>_0x57b0e1[_0x309a5a])return 0x1;return 0x0;}),_0x5491e2['id']===_0x507d22(0x172)?(renderTable(_0x548cf6),updateAnalysis(_0x548cf6)):renderStockTable(_0x548cf6,_0x5491e2);});});}function renderStockTable(_0x5ee2a4,_0x30d2c4){const _0x2c90c0=_0x24c8ed,_0x4a43ea=_0x30d2c4[_0x2c90c0(0x16c)]('tbody');_0x4a43ea[_0x2c90c0(0x152)]='',_0x5ee2a4[_0x2c90c0(0x176)](_0x18e336=>{const _0x4e8e0d=_0x2c90c0,_0x270562=_0x4a43ea[_0x4e8e0d(0x1a1)]();_0x270562[_0x4e8e0d(0x1a2)](0x0)[_0x4e8e0d(0x164)]=_0x18e336[_0x4e8e0d(0x1c5)],_0x270562[_0x4e8e0d(0x1a2)](0x1)['textContent']=_0x18e336['SF'],_0x270562[_0x4e8e0d(0x1a2)](0x2)[_0x4e8e0d(0x164)]=new Date(_0x18e336[_0x4e8e0d(0x187)])['toLocaleString']();});}function updateAnalysis(_0x11e1f1=salesData){const _0xa3970=_0x24c8ed;let _0xb4abb5=0x0,_0x3ba63b=0x0;const _0x29c9d5={'labels':[],'sales':[],'prices':[]};_0x11e1f1[_0xa3970(0x176)](_0x4f4523=>{const _0x1fa4a7=_0xa3970;_0xb4abb5+=_0x4f4523['V']*_0x4f4523['PV'],_0x3ba63b++,_0x29c9d5[_0x1fa4a7(0x16a)]['push'](new Date(_0x4f4523['dateTime'])[_0x1fa4a7(0x1d4)]()),_0x29c9d5[_0x1fa4a7(0x1c8)][_0x1fa4a7(0x16f)](_0x4f4523['V']),_0x29c9d5[_0x1fa4a7(0x1d0)][_0x1fa4a7(0x16f)](_0x4f4523['PV']);});const _0x35a3c6=_0xb4abb5/_0x3ba63b||0x0;totalSalesElement['textContent']=_0xa3970(0x1ad)+_0xb4abb5[_0xa3970(0x1a6)](0x2)+_0xa3970(0x1b5),averageSalesElement['textContent']=_0xa3970(0x184)+_0x35a3c6[_0xa3970(0x1a6)](0x2)+_0xa3970(0x1b5),updateChart(_0x29c9d5),updatePeriodAnalysis(_0x11e1f1);}function updateChart(_0x3e12df){const _0x556b97=_0x24c8ed,_0x50e2da=document[_0x556b97(0x150)](_0x556b97(0x188))[_0x556b97(0x17c)]('2d');salesChart&&salesChart[_0x556b97(0x1a7)](),salesChart=new Chart(_0x50e2da,{'type':'line','data':{'labels':_0x3e12df['labels'],'datasets':[{'label':'Ventes','data':_0x3e12df[_0x556b97(0x1c8)],'borderColor':_0x556b97(0x1a9),'tension':0.1},{'label':_0x556b97(0x17e),'data':_0x3e12df[_0x556b97(0x1d0)],'borderColor':'rgb(255,\x2099,\x20132)','tension':0.1}]},'options':{'responsive':!![],'scales':{'y':{'beginAtZero':!![],'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'},'ticks':{'color':_0x556b97(0x1a9)}},'x':{'grid':{'color':_0x556b97(0x154)},'ticks':{'color':_0x556b97(0x1a9)}}},'plugins':{'legend':{'labels':{'color':_0x556b97(0x1a9)}}}}});}function updatePeriodAnalysis(_0x4f3b55){const _0xf50ea0=_0x24c8ed,_0x45248a=new Date(),_0x1967cb=new Date(_0x45248a[_0xf50ea0(0x1b3)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0xb3827c=new Date(_0x45248a[_0xf50ea0(0x1b3)]()-0x1e*0x18*0x3c*0x3c*0x3e8),_0x1cfd31=new Date(_0x45248a['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8),_0x7b0d31=_0x4f3b55[_0xf50ea0(0x1bf)](_0xc178dd=>new Date(_0xc178dd[_0xf50ea0(0x187)])>=_0x1967cb),_0x4cea43=_0x4f3b55[_0xf50ea0(0x1bf)](_0x246a6b=>new Date(_0x246a6b[_0xf50ea0(0x187)])>=_0xb3827c),_0x2d8b75=_0x4f3b55[_0xf50ea0(0x1bf)](_0x2a508d=>new Date(_0x2a508d['dateTime'])>=_0x1cfd31);updatePeriodStats(_0x7b0d31,'week'),updatePeriodStats(_0x4cea43,'month'),updatePeriodStats(_0x2d8b75,_0xf50ea0(0x171));}function updatePeriodStats(_0x2c19e9,_0x15ddc6){const _0x297423=_0x24c8ed,_0x31a7d8=_0x2c19e9[_0x297423(0x1d3)]((_0xa0592b,_0x532c80)=>_0xa0592b+_0x532c80['V']*_0x532c80['PV'],0x0),_0x5d5a3d=_0x31a7d8/_0x2c19e9[_0x297423(0x1b7)]||0x0;document[_0x297423(0x150)](_0x15ddc6+'TotalSales')['textContent']='Total\x20des\x20ventes:\x20'+_0x31a7d8[_0x297423(0x1a6)](0x2)+'\x20FCFA',document['getElementById'](_0x15ddc6+_0x297423(0x18a))[_0x297423(0x164)]=_0x297423(0x184)+_0x5d5a3d['toFixed'](0x2)+'\x20FCFA';}toggleAnalysisButton[_0x24c8ed(0x173)](_0x24c8ed(0x167),function(){const _0x16eae7=_0x24c8ed;analysisSection[_0x16eae7(0x18c)]['display']===_0x16eae7(0x179)||analysisSection[_0x16eae7(0x18c)]['display']===''?(analysisSection['style'][_0x16eae7(0x18e)]='block',salesDetailsSection['style'][_0x16eae7(0x18e)]=_0x16eae7(0x179),this[_0x16eae7(0x164)]='Masquer\x20l\x27analyse\x20des\x20ventes',toggleSalesButton[_0x16eae7(0x164)]=_0x16eae7(0x1b1),updateAnalysis(salesData)):(analysisSection[_0x16eae7(0x18c)][_0x16eae7(0x18e)]=_0x16eae7(0x179),this['textContent']=_0x16eae7(0x14b));}),toggleSalesButton[_0x24c8ed(0x173)](_0x24c8ed(0x167),function(){const _0x40a943=_0x24c8ed;salesDetailsSection[_0x40a943(0x18c)][_0x40a943(0x18e)]===_0x40a943(0x179)||salesDetailsSection[_0x40a943(0x18c)][_0x40a943(0x18e)]===''?(salesDetailsSection['style'][_0x40a943(0x18e)]=_0x40a943(0x196),analysisSection[_0x40a943(0x18c)]['display']=_0x40a943(0x179),this['textContent']='Masquer\x20le\x20d√©tail\x20des\x20ventes',toggleAnalysisButton[_0x40a943(0x164)]=_0x40a943(0x14b)):(salesDetailsSection[_0x40a943(0x18c)][_0x40a943(0x18e)]='none',this[_0x40a943(0x164)]=_0x40a943(0x1b1));});const themeToggle=document[_0x24c8ed(0x150)](_0x24c8ed(0x165)),root=document[_0x24c8ed(0x19d)];let isDarkTheme=!![];function setTheme(_0x1ba234){const _0x1792d4=_0x24c8ed;_0x1ba234?(root[_0x1792d4(0x16e)]['remove'](_0x1792d4(0x19c)),themeToggle['textContent']='üåô',themeToggle[_0x1792d4(0x162)](_0x1792d4(0x16d),_0x1792d4(0x1dc))):(root[_0x1792d4(0x16e)][_0x1792d4(0x193)](_0x1792d4(0x19c)),themeToggle[_0x1792d4(0x164)]='‚òÄÔ∏è',themeToggle['setAttribute'](_0x1792d4(0x16d),_0x1792d4(0x15d))),isDarkTheme=_0x1ba234,localStorage['setItem']('darkTheme',_0x1ba234);}themeToggle[_0x24c8ed(0x173)](_0x24c8ed(0x167),()=>{setTheme(!isDarkTheme);}),document[_0x24c8ed(0x173)]('DOMContentLoaded',()=>{const _0x222b4e=_0x24c8ed,_0x4b13f4=localStorage[_0x222b4e(0x1e4)](_0x222b4e(0x1ac));_0x4b13f4!==null?setTheme(_0x4b13f4===_0x222b4e(0x190)):setTheme(![]);}),document[_0x24c8ed(0x150)](_0x24c8ed(0x19f))[_0x24c8ed(0x173)](_0x24c8ed(0x167),function(){const _0x763adf=_0x24c8ed,_0x3e06df=new Date(document[_0x763adf(0x150)](_0x763adf(0x189))[_0x763adf(0x1bc)]),_0x9a550a=new Date(document[_0x763adf(0x150)](_0x763adf(0x1bd))['value']);updateStockTables(_0x3e06df,_0x9a550a);}),document[_0x24c8ed(0x150)](_0x24c8ed(0x1b2))[_0x24c8ed(0x173)](_0x24c8ed(0x167),function(){const _0x554b37=_0x24c8ed,_0x58f9fd=new Date(document[_0x554b37(0x150)](_0x554b37(0x1d9))[_0x554b37(0x1bc)]),_0x5021da=new Date(document['getElementById'](_0x554b37(0x145))[_0x554b37(0x1bc)]),_0x11a2b1=salesData['filter'](_0x296f45=>{const _0x155df0=new Date(_0x296f45['dateTime']);return(!_0x58f9fd||_0x155df0>=_0x58f9fd)&&(!_0x5021da||_0x155df0<=_0x5021da);});renderTable(_0x11a2b1),updateAnalysis(_0x11a2b1);});function updateStockTables(_0x29e9d4,_0x3c7497){const _0x317d6a=_0x24c8ed,_0x3673eb=document['getElementById'](_0x317d6a(0x1b9));_0x3673eb['querySelector'](_0x317d6a(0x1e0))['innerHTML']='',database[_0x317d6a(0x183)](_0x317d6a(0x15f)+currentUser)[_0x317d6a(0x192)]('value')['then'](_0xa2516a=>{const _0x94ca73=_0x317d6a,_0x4c089e={};_0xa2516a[_0x94ca73(0x176)](_0x59f64c=>{const _0x25e03a=_0x94ca73,_0x41b915=_0x59f64c['val'](),_0x2b7a1b=new Date(_0x41b915['dateTime']);(!_0x29e9d4||_0x2b7a1b>=_0x29e9d4)&&(!_0x3c7497||_0x2b7a1b<=_0x3c7497)&&((!_0x4c089e[_0x41b915[_0x25e03a(0x1c5)]]||_0x2b7a1b>new Date(_0x4c089e[_0x41b915[_0x25e03a(0x1c5)]][_0x25e03a(0x187)]))&&(_0x4c089e[_0x41b915['product']]=_0x41b915));}),Object['values'](_0x4c089e)[_0x94ca73(0x176)](_0x2037ac=>{const _0x8f7345=_0x94ca73,_0x5f2d73=_0x3673eb[_0x8f7345(0x16c)](_0x8f7345(0x1e0))[_0x8f7345(0x1a1)]();_0x5f2d73['insertCell'](0x0)[_0x8f7345(0x164)]=_0x2037ac[_0x8f7345(0x1c5)],_0x5f2d73[_0x8f7345(0x1a2)](0x1)['textContent']=_0x2037ac['SF'],_0x5f2d73[_0x8f7345(0x1a2)](0x2)[_0x8f7345(0x164)]=new Date(_0x2037ac[_0x8f7345(0x187)])[_0x8f7345(0x1d4)]();}),setupSort(_0x3673eb);});}function showSubscriptionRequiredModal(){const _0x5babb1=_0x24c8ed;document[_0x5babb1(0x150)](_0x5babb1(0x14e))[_0x5babb1(0x18c)]['display']=_0x5babb1(0x1b8);}function hideSubscriptionRequiredModal(){const _0x26c375=_0x24c8ed;document[_0x26c375(0x150)](_0x26c375(0x14e))[_0x26c375(0x18c)]['display']=_0x26c375(0x179);}function redirectToSubscription(){const _0x448926=_0x24c8ed;window['location'][_0x448926(0x1d8)]=_0x448926(0x1cc);}async function checkSubscriptionStatus(){const _0x5ba8bf=_0x24c8ed;try{const _0x134128=await adminRef[_0x5ba8bf(0x192)](_0x5ba8bf(0x1bc)),_0x4997ab=_0x134128[_0x5ba8bf(0x19a)](),_0x21d357=new Date();if(_0x4997ab&&_0x4997ab['status']===_0x5ba8bf(0x199)){const _0x13f7d0=new Date(_0x4997ab[_0x5ba8bf(0x18b)]);return _0x13f7d0>=_0x21d357?!![]:(await adminRef['update']({'status':'expired'}),![]);}else return![];}catch(_0x493b18){console[_0x5ba8bf(0x182)](_0x5ba8bf(0x1dd),_0x493b18);throw _0x493b18;}}updateTable(),updateStockTables(),analysisSection['style']['display']=_0x24c8ed(0x179),salesDetailsSection[_0x24c8ed(0x18c)][_0x24c8ed(0x18e)]=_0x24c8ed(0x179),updateTable(),updateStockTables(),updateAnalysis();const savedTheme=localStorage[_0x24c8ed(0x1e4)](_0x24c8ed(0x1ac));savedTheme!==null&&setTheme(savedTheme==='true');