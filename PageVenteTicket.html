<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vente Tickets Cyber Campus</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* ... (Styles CSS - Pas de modifications ici) ... */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: linear-gradient(135deg,  #424242, #073018, #553a01);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #fff;
            overflow-x: hidden;
            font-size: 16px;
            line-height: 1.5;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px;
        }

        section {
            margin: 16px 0;
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        section:hover{
            transform: translateY(-5px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #fdbb2d;
            margin-bottom: 16px;
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            color: white;
            margin-top: 16px;
            font-size: 0.9rem;
        }

        th, td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        td{
            transition: background-color 0.3s ease;
        }
        tr:hover td{
            background-color: rgba(255, 255, 255, 0.1);
        }

        button {
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
            touch-action: manipulation;
        }

        button:active {
            transform: scale(0.95);
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            color: #1a2a6c;
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .notification h3 {
            margin-bottom: 16px;
            color: #1a2a6c;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .ticket-details {
            margin: 16px 0;
            font-size: 0.95rem;
        }

        .ticket-details p {
            margin: 8px 0;
            word-break: break-word;
        }

        .action-icons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }

        .action-icon {
            cursor: pointer;
            padding: 12px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
        }

        .action-icon:active {
            transform: scale(0.9);
        }

        .icon-share { color: #4CAF50; }
        .icon-copy { color: #2196F3; }
        .icon-pdf { color: #f44336; }

        .buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-sell {
            background-color: #4CAF50;
            color: white;
            flex: 1;
            min-width: 120px;
        }

        .btn-cancel {
            background-color: #f44336;
            color: white;
            flex: 1;
            min-width: 120px;
        }

        .close-icon {
            position: absolute;
            top: 12px;
            right: 12px;
            cursor: pointer;
            font-size: 24px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.05);
        }

        .tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            display: none;
            z-index: 1001;
            text-align: center;
            max-width: 200px;
            left: 50% !important;
            transform: translateX(-50%);
            bottom: 24px;
        }
        .history-section {
            display: none;
            background: rgba(26, 42, 108, 0.95); /* Fond plus opaque avec une teinte bleue foncée */
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 1000;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .history-section:hover{
            transform: translate(-50%, -50%) translateY(-5px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Amélioration du style de l'en-tête de l'historique pour plus de lisibilité */
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            background: inherit;
            padding: 10px 0;
            z-index: 1;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Amélioration de la lisibilité des cartes de statistiques */
        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .stat-card:hover{
            transform: translateY(-5px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-card h4 {
            color: #fdbb2d;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .stat-card .value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .toggle-history {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #fdbb2d;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 100;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .toggle-history i{
            transition: transform 0.3s ease;
        }
        .toggle-history:hover{
            transform: scale(1.1);
        }
        .toggle-history:hover i{
            transform: rotate(180deg);
        }

        .toggle-history:active {
            transform: scale(0.95);
        }

        .date-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }

        .date-filter select {
            padding: 8px;
            border-radius: 4px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
        }

        footer {
            margin-top: auto;
            text-align: center;
            padding: 16px;
            background-color: rgba(0, 0, 0, 0.5);
            font-size: 0.9rem;
        }

        /* Media Queries */
        @media (max-width: 480px) {
            body {
                font-size: 14px;
            }

            .container {
                padding: 12px;
            }

            section {
                padding: 12px;
                margin: 12px 0;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: 8px 6px;
            }

            td:last-child {
                text-align: right;
            }

            button {
                padding: 10px 16px;
                font-size: 0.85rem;
            }

            .notification {
                padding: 20px 16px;
                width: 95%;
            }

            .action-icons {
                gap: 16px;
            }

            .action-icon {
                width: 40px;
                height: 40px;
                padding: 10px;
            }

            .buttons button {
                flex: 1;
                min-width: 0;
            }

            .close-icon {
                top: 8px;
                right: 8px;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            .history-table {
                font-size: 0.8rem;
            }

            .date-filter {
                flex-direction: column;
            }
        }

        @media (max-width: 320px) {
            .buttons {
                flex-direction: column;
            }

            .action-icons {
                gap: 12px;
            }

            .action-icon {
                width: 36px;
                height: 36px;
            }
        }

        .login-section {
            margin: 16px 0;
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .login-section h2 {
            color: #fdbb2d;
            margin-bottom: 16px;
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
        }

        .login-section input[type="text"],
        .login-section input[type="password"] {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .login-section button {
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 0.9rem;
            width: 100%;
            margin-top: 10px;
        }

        .login-section button:active {
            transform: scale(0.95);
        }

        .error-message {
            margin-top: 10px;
            text-align: center;
        }
        .messages-section {
            margin: 16px 0;
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            max-height: 300px; /* Hauteur maximale pour la section des messages */
            overflow-y: auto; /* Permettre le défilement vertical si le contenu dépasse la hauteur maximale */
        }

        .messages-section h2 {
            color: #fdbb2d;
            margin-bottom: 16px;
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
        }

        .message {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
        }

        .message .timestamp {
            font-size: 0.7rem;
            color: #ccc;
            margin-top: 5px;
        }

        /* Styles pour l'autocomplétion */
        .autocomplete-container {
            position: relative;
        }

        .autocomplete-suggestions {
            position: absolute;
            border: 1px solid #ccc;
            list-style: none;
            padding: 0;
            margin: 0;
            z-index: 100;
            background-color: white;
            width: 100%; /* Assurez-vous que la liste a la même largeur que le champ de saisie */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Ombre pour un effet visuel */
        }

        .autocomplete-suggestions li {
            padding: 5px;
            cursor: pointer;
            color: #000;
        }

        .autocomplete-suggestions li:hover {
            background-color: #fdbb2d;
            color: #1a2a6c;
        }
        .loader-wrapper {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .page-loader-wrapper {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1002;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .page-loader {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #fdbb2d;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
        }

        .loader-message {
            color: white;
            margin-top: 16px;
            font-size: 1rem;
            text-align: center;
            max-width: 80%;
        }
        .subscription-required {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .subscription-required-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            width: 90%;
        }

        .subscription-required-content h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .subscription-required-content p {
            color: #666;
            margin-bottom: 30px;
        }

        .subscription-required-content button {
            background-color: #fdbb2d;
            color: #1a2a6c;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 0.9rem;
            margin: 0 10px;
        }

        .subscription-required-content button:hover {
            background-color: #e6a727;
        }

    </style>
</head>

<body>
    <div class="page-loader-wrapper" id="pageLoaderWrapper">
        <div class="page-loader"></div>
        <div class="loader-message" id="pageLoaderMessage">Initialisation...</div>
    </div>
    <div class="loader-wrapper" id="loaderWrapper">
        <div class="loader"></div>
    </div>
    <section class="login-section" id="loginSection">
        <h2>Connexion Partenaire</h2>
        <form id="loginForm">
            <div class="autocomplete-container">
                <input type="text" id="username" placeholder="Nom d'utilisateur" required>
                <ul class="autocomplete-suggestions" id="autocompleteSuggestions" style="display: none;"></ul>
            </div>
            <input type="password" id="password" placeholder="Mot de passe" required>
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <input type="checkbox" id="rememberMe">
                <label for="rememberMe" style="color: white; margin-left: 5px;">Se souvenir de moi (24h)</label>
            </div>
            <button type="submit">Se connecter</button>
        </form>
        <div class="error-message" id="loginError" style="display: none; color: red;"></div>
    </section>

    <div class="container">
        <section class="rates-section" style="display: none;">
            <h2>Vente de tickets WiFi</h2>
            <div class="loading-message">Chargement des tickets...</div>
            <table style="display: none;"></table>
        </section>
    </div>

    <div class="notification" id="notification">
        <span class="close-icon" onclick="hideNotification()">×</span>
        <h3 id="notification-title">Confirmation de vente</h3>
        <div class="ticket-details" id="notification-message"></div>
        <div class="buttons" id="confirmation-buttons">
            <button class="btn-sell" onclick="window.proceedWithSale()">Confirmer</button>
            <button class="btn-cancel" onclick="hideNotification()">Annuler</button>
        </div>
        <div class="action-icons" id="ticket-actions" style="display: none;">
            <div class="action-icon icon-share" onclick="shareTicket()" title="Partager">
                <i data-lucide="share-2"></i>
            </div>
            <div class="action-icon icon-pdf" onclick="exportToPDF()" title="Exporter en PDF">
                <i data-lucide="file-text"></i>
            </div>
        </div>
    </div>

    <div class="toggle-history" onclick="toggleHistory()">
        <i data-lucide="history"></i>
    </div>

    <div class="history-section" id="historySection" style="display: none;">
        <div class="history-header">
            <h2>Historique des ventes</h2>
            <button onclick="closeHistory()">
                <i data-lucide="x"></i>
            </button>
        </div>

        <div class="date-filter">
            <select id="periodFilter" onchange="filterHistory()">
                <option value="today">Aujourd'hui</option>
                <option value="week">Cette semaine</option>
                <option value="month">Ce mois</option>
                <option value="all">Tout l'historique</option>
            </select>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h4>Tickets vendus</h4>
                <div id="totalTickets" class="value">0</div>
            </div>
            <div class="stat-card">
                <h4>Chiffre d'affaires</h4>
                <div id="totalRevenue" class="value">0 FCFA</div>
            </div>
            <div class="stat-card">
                <h4>Ticket le plus vendu</h4>
                <div id="topCategory" class="value">-</div>
            </div>
            <div class="stat-card">
                <h4>Moyenne par jour</h4>
                <div id="avgDaily" class="value">0</div>
            </div>
        </div>

        <div class="history-table">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Catégorie</th>
                        <th>Utilisateur</th>
                        <th>Prix</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="historyTableBody">
                </tbody>
            </table>
        </div>
    </div>

    <section class="messages-section" id="messagesSection" style="display: none;">
        <h2>Messages Reçus</h2>
        <div id="messagesContainer">
            <!-- Les messages seront ajoutés ici -->
        </div>
    </section>

    <div id="tooltip" class="tooltip"></div>

    <footer>
        <div class="anitext">PROPULSE PAR EVISIONS</div>
    </footer>

    <div id="subscriptionRequiredModal" class="subscription-required" style="display: none;">
        <div class="subscription-required-content">
            <h2>Abonnement Requis</h2>
            <p>Un abonnement actif est nécessaire pour accéder à cette fonctionnalité.</p>
            <button onclick="redirectToSubscription()">S'abonner</button>
            <button onclick="hideSubscriptionRequiredModal()">Fermer</button>
        </div>
    </div>

    <script type="module">
const _0x28599a=_0x538f;(function(_0x2f00e7,_0x58b359){const _0x28815c=_0x538f,_0x123f2f=_0x2f00e7();while(!![]){try{const _0x3f6eda=parseInt(_0x28815c(0xcd))/0x1*(parseInt(_0x28815c(0x119))/0x2)+-parseInt(_0x28815c(0xac))/0x3*(parseInt(_0x28815c(0xe0))/0x4)+parseInt(_0x28815c(0x104))/0x5*(parseInt(_0x28815c(0xb0))/0x6)+parseInt(_0x28815c(0x128))/0x7*(-parseInt(_0x28815c(0x137))/0x8)+parseInt(_0x28815c(0x9c))/0x9+-parseInt(_0x28815c(0xbd))/0xa*(parseInt(_0x28815c(0x129))/0xb)+-parseInt(_0x28815c(0x107))/0xc*(-parseInt(_0x28815c(0xed))/0xd);if(_0x3f6eda===_0x58b359)break;else _0x123f2f['push'](_0x123f2f['shift']());}catch(_0x1ab8a7){_0x123f2f['push'](_0x123f2f['shift']());}}}(_0x1766,0x5c685));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';import{getDatabase,ref,get,set,push,remove,onChildAdded}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';const firebaseConfig={'apiKey':_0x28599a(0xa2),'authDomain':_0x28599a(0xe4),'databaseURL':_0x28599a(0xa5),'projectId':_0x28599a(0x139),'storageBucket':_0x28599a(0x95),'messagingSenderId':_0x28599a(0xfd),'appId':_0x28599a(0xf8),'measurementId':'G-CEEFJP5LYZ'},app=initializeApp(firebaseConfig),db=getDatabase(app),adminRef=ref(db,_0x28599a(0x134));let ticketToSell=null,localTickets={},currentReservedTicket=null,currentVendorId='',vendors={},availableUsernames=[];window[_0x28599a(0x12a)]=window[_0x28599a(0x97)][_0x28599a(0x12a)];async function fetchVendors(){const _0x13caf2=_0x28599a;try{const _0x2f9a72=ref(db,_0x13caf2(0x108)),_0x34068f=await get(_0x2f9a72);_0x34068f['exists']()?(vendors=_0x34068f['val'](),availableUsernames=Object['keys'](vendors)):console['log'](_0x13caf2(0x10b));}catch(_0x16c20f){console[_0x13caf2(0x100)](_0x13caf2(0xff),_0x16c20f);}}const usernameInput=document[_0x28599a(0x135)](_0x28599a(0xc3)),passwordInput=document[_0x28599a(0x135)](_0x28599a(0x9d)),suggestionsList=document[_0x28599a(0x135)]('autocompleteSuggestions');usernameInput[_0x28599a(0x85)](_0x28599a(0x13e),()=>{const _0x3eb578=_0x28599a,_0x3ee666=usernameInput['value'][_0x3eb578(0x11e)](),_0x35bfbe=availableUsernames['filter'](_0x430d40=>_0x430d40['toLowerCase']()[_0x3eb578(0xba)](_0x3ee666));suggestionsList[_0x3eb578(0x13a)]='';if(_0x3ee666[_0x3eb578(0xc6)]===0x0||_0x35bfbe[_0x3eb578(0xc6)]===0x0){suggestionsList['style'][_0x3eb578(0xc8)]=_0x3eb578(0x10d);return;}_0x35bfbe[_0x3eb578(0xca)](_0x22b77d=>{const _0x533f03=_0x3eb578,_0x104554=document[_0x533f03(0xae)]('li');_0x104554[_0x533f03(0x12b)]=_0x22b77d,_0x104554[_0x533f03(0x85)](_0x533f03(0x11f),()=>{const _0x453984=_0x533f03;usernameInput[_0x453984(0x94)]=_0x22b77d,suggestionsList[_0x453984(0x13a)]='',suggestionsList[_0x453984(0xad)][_0x453984(0xc8)]='none';}),suggestionsList[_0x533f03(0xdf)](_0x104554);}),suggestionsList[_0x3eb578(0xad)]['display']='block';}),document[_0x28599a(0x85)](_0x28599a(0x11f),_0xf4b29d=>{const _0x434302=_0x28599a;!usernameInput[_0x434302(0xbb)](_0xf4b29d[_0x434302(0xb6)])&&!suggestionsList['contains'](_0xf4b29d[_0x434302(0xb6)])&&(suggestionsList[_0x434302(0xad)][_0x434302(0xc8)]='none');});const rememberMeCheckbox=document[_0x28599a(0x135)](_0x28599a(0xd6)),storedUsername=localStorage[_0x28599a(0xee)]('username'),storedPassword=localStorage[_0x28599a(0xee)]('password'),storedTimestamp=localStorage[_0x28599a(0xee)]('usernameTimestamp'),now=Date[_0x28599a(0xb3)](),twentyFourHours=0x18*0x3c*0x3c*0x3e8;storedUsername&&storedPassword&&storedTimestamp&&now-storedTimestamp<twentyFourHours&&(usernameInput[_0x28599a(0x94)]=storedUsername,passwordInput[_0x28599a(0x94)]=storedPassword,rememberMeCheckbox[_0x28599a(0xfa)]=!![]);const loginForm=document[_0x28599a(0x135)](_0x28599a(0xf6)),loginError=document[_0x28599a(0x135)](_0x28599a(0xb9)),ratesSection=document[_0x28599a(0xcf)](_0x28599a(0x11b)),historySection=document['getElementById'](_0x28599a(0x140)),loginSection=document[_0x28599a(0x135)](_0x28599a(0xfc)),messagesSection=document[_0x28599a(0x135)](_0x28599a(0x90));loginForm[_0x28599a(0x85)](_0x28599a(0x8f),async _0x24b546=>{const _0x5522f8=_0x28599a;_0x24b546['preventDefault'](),showLoader();const _0x27490c=usernameInput['value'],_0x546ed8=passwordInput[_0x5522f8(0x94)];vendors[_0x27490c]&&vendors[_0x27490c][_0x5522f8(0x9d)]===_0x546ed8?(loginError[_0x5522f8(0xad)][_0x5522f8(0xc8)]='none',ratesSection[_0x5522f8(0xad)][_0x5522f8(0xc8)]=_0x5522f8(0xf2),historySection[_0x5522f8(0xad)]['display']='none',loginSection[_0x5522f8(0xad)][_0x5522f8(0xc8)]='none',messagesSection[_0x5522f8(0xad)]['display']='block',currentVendorId=_0x27490c,rememberMeCheckbox[_0x5522f8(0xfa)]?(localStorage[_0x5522f8(0x84)](_0x5522f8(0xc3),_0x27490c),localStorage[_0x5522f8(0x84)]('password',_0x546ed8),localStorage[_0x5522f8(0x84)](_0x5522f8(0xf1),Date['now']())):(localStorage[_0x5522f8(0xdd)](_0x5522f8(0xc3)),localStorage['removeItem']('password'),localStorage['removeItem'](_0x5522f8(0xf1))),await syncTickets(),loadHistory(),listenForNewMessages(),lucide[_0x5522f8(0x101)](),hideLoader()):(loginError['style'][_0x5522f8(0xc8)]='block',loginError[_0x5522f8(0x12b)]=_0x5522f8(0x132),hideLoader());});async function syncTickets(){const _0x34620e=_0x28599a;try{const _0x3ace67=document[_0x34620e(0xcf)](_0x34620e(0x9e)),_0x53af31=document[_0x34620e(0xcf)]('.rates-section\x20table');_0x3ace67[_0x34620e(0xad)][_0x34620e(0xc8)]=_0x34620e(0xf2),_0x53af31[_0x34620e(0xad)][_0x34620e(0xc8)]=_0x34620e(0x10d);const _0x4bc184=ref(db,'TicketsTotal'),_0x510c45=await get(_0x4bc184);_0x510c45[_0x34620e(0x138)]()?(localTickets=_0x510c45[_0x34620e(0xea)](),createTicketTable(),_0x3ace67[_0x34620e(0xad)][_0x34620e(0xc8)]=_0x34620e(0x10d),_0x53af31['style']['display']=_0x34620e(0xaf)):_0x3ace67[_0x34620e(0x12b)]='Aucun\x20ticket\x20disponible.';}catch(_0x305854){console[_0x34620e(0x100)](_0x34620e(0x10f),_0x305854),loadingMessage[_0x34620e(0x12b)]=_0x34620e(0xe2);}}async function createTicketTable(){const _0x1515ac=_0x28599a,_0x29e39b=document['querySelector'](_0x1515ac(0xc2));_0x29e39b[_0x1515ac(0x13a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix\x20(FCFA)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Restants</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Action</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';for(const [_0x1c865d,_0x3a8399]of Object[_0x1515ac(0xe6)](localTickets)){const _0x33762c=_0x3a8399[_0x1515ac(0x89)]?_0x3a8399['utilisateur'][_0x1515ac(0xc6)]:0x0;if(_0x33762c>0x0){const _0x131834=_0x3a8399[_0x1515ac(0x11a)][0x0],_0x75d6c7=_0x29e39b[_0x1515ac(0xf5)]();_0x75d6c7[_0x1515ac(0x13a)]=_0x1515ac(0xe1)+_0x1c865d+_0x1515ac(0x127)+_0x131834+_0x1515ac(0x127)+_0x33762c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20onclick=\x22window.initTicketSale(\x27'+_0x1c865d+_0x1515ac(0xcb);}}document['querySelector'](_0x1515ac(0x9e))[_0x1515ac(0xad)][_0x1515ac(0xc8)]='none',_0x29e39b[_0x1515ac(0xad)][_0x1515ac(0xc8)]=_0x1515ac(0xaf);}window[_0x28599a(0xe3)]=async function(_0x12ebab){const _0x18618d=_0x28599a;showLoader();try{const _0x51a8bd=ref(db,_0x18618d(0xec)+_0x12ebab),_0x3d4401=await get(_0x51a8bd);if(_0x3d4401[_0x18618d(0x138)]()){const _0xf6fe33=_0x3d4401[_0x18618d(0xea)]();if(!_0xf6fe33[_0x18618d(0x89)]||_0xf6fe33[_0x18618d(0x89)][_0x18618d(0xc6)]===0x0)throw new Error(_0x18618d(0x8c));ticketToSell={'category':_0x12ebab,'user':_0xf6fe33[_0x18618d(0x89)][0x0],'password':_0xf6fe33['motDePasse'][0x0],'price':_0xf6fe33['prix'][0x0],'updatedData':{..._0xf6fe33,'utilisateur':_0xf6fe33[_0x18618d(0x89)]['slice'](0x1),'motDePasse':_0xf6fe33[_0x18618d(0xf7)]['slice'](0x1),'prix':_0xf6fe33['prix'][_0x18618d(0x9f)](0x1)}},showConfirmation(ticketToSell),hideLoader();}}catch(_0x236e10){console[_0x18618d(0x100)](_0x18618d(0xeb),_0x236e10),showNotification(_0x18618d(0xef),_0x18618d(0xa4)),hideLoader();}};function showConfirmation(_0x4c3156){const _0x35542c=_0x28599a,_0x46930e=document[_0x35542c(0x135)]('notification'),_0x4eaafb=document[_0x35542c(0x135)](_0x35542c(0xcc)),_0x219ee=document[_0x35542c(0x135)](_0x35542c(0x9a)),_0x2f744e=document['getElementById'](_0x35542c(0x113));document[_0x35542c(0x135)]('notification-title')['textContent']=_0x35542c(0xf3),_0x4eaafb['innerHTML']=_0x35542c(0xd3)+_0x4c3156[_0x35542c(0xf0)]+_0x35542c(0xd2)+_0x4c3156[_0x35542c(0x86)]+_0x35542c(0x10a),_0x2f744e[_0x35542c(0xad)][_0x35542c(0xc8)]=_0x35542c(0x118),_0x219ee[_0x35542c(0xad)][_0x35542c(0xc8)]=_0x35542c(0x10d),_0x46930e[_0x35542c(0xad)][_0x35542c(0xc8)]=_0x35542c(0xf2);}window[_0x28599a(0xf9)]=async function(){const _0x30b09d=_0x28599a;showLoader();if(!ticketToSell){showNotification(_0x30b09d(0xef),'Aucun\x20ticket\x20à\x20vendre'),hideLoader();return;}try{const _0x398046=ref(db,'TicketsTotal/'+ticketToSell[_0x30b09d(0xf0)]);await set(_0x398046,ticketToSell[_0x30b09d(0x126)]);const _0x163c5f=ref(db,'TicketsVendus');await push(_0x163c5f,{'category':ticketToSell[_0x30b09d(0xf0)],'user':ticketToSell[_0x30b09d(0xdb)],'password':ticketToSell['password'],'price':ticketToSell['price'],'soldAt':Date[_0x30b09d(0xb3)](),'vendorId':currentVendorId});const _0x4ba340=ref(db,_0x30b09d(0x92)+currentVendorId);await push(_0x4ba340,{'category':ticketToSell[_0x30b09d(0xf0)],'user':ticketToSell['user'],'password':ticketToSell[_0x30b09d(0x9d)],'price':ticketToSell[_0x30b09d(0x86)],'soldAt':Date[_0x30b09d(0xb3)]()}),showTicketDetails(ticketToSell),await syncTickets(),hideLoader();}catch(_0x3b82a9){console['error'](_0x30b09d(0x130),_0x3b82a9),showNotification(_0x30b09d(0xef),_0x30b09d(0x112)),hideLoader();}ticketToSell=null;};function showTicketDetails(_0x551937){const _0x2b8955=_0x28599a,_0x464016=document['getElementById'](_0x2b8955(0x11c)),_0x344218=document[_0x2b8955(0x135)](_0x2b8955(0xcc)),_0x4f9002=document[_0x2b8955(0x135)](_0x2b8955(0x9a)),_0x2547d2=document['getElementById'](_0x2b8955(0x113));document[_0x2b8955(0x135)](_0x2b8955(0x123))[_0x2b8955(0x12b)]=_0x2b8955(0xfe),_0x344218[_0x2b8955(0x13a)]=_0x2b8955(0x115)+_0x551937[_0x2b8955(0xf0)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Nom\x20d\x27utilisateur:</strong>\x20'+_0x551937['user']+_0x2b8955(0x11d)+_0x551937['password']+_0x2b8955(0xd2)+_0x551937['price']+_0x2b8955(0x10a),_0x2547d2[_0x2b8955(0xad)][_0x2b8955(0xc8)]=_0x2b8955(0x10d),_0x4f9002[_0x2b8955(0xad)]['display']='flex',_0x464016[_0x2b8955(0xad)][_0x2b8955(0xc8)]=_0x2b8955(0xf2),lucide[_0x2b8955(0x101)]();}function showSaleConfirmation(_0x53846e){const _0x5c3f20=_0x28599a,_0x25f2d9=document[_0x5c3f20(0x135)]('notification'),_0x58c61e=document[_0x5c3f20(0x135)](_0x5c3f20(0xcc)),_0x1a504d=document[_0x5c3f20(0x135)]('notification-buttons');_0x58c61e[_0x5c3f20(0x13a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Catégorie:</strong>\x20'+_0x53846e[_0x5c3f20(0xf0)]+_0x5c3f20(0xd7)+_0x53846e['user']+_0x5c3f20(0x11d)+_0x53846e['password']+_0x5c3f20(0xd2)+_0x53846e['price']+_0x5c3f20(0x10a),_0x1a504d[_0x5c3f20(0x13a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-sell\x22\x20onclick=\x22window.confirmSale()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Confirmer\x20la\x20vente\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-cancel\x22\x20onclick=\x22window.cancelSale()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Annuler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x25f2d9[_0x5c3f20(0xad)][_0x5c3f20(0xc8)]='block',lucide[_0x5c3f20(0x101)]();}window[_0x28599a(0xab)]=async function(){const _0x39dd5a=_0x28599a;showLoader();if(!currentReservedTicket){showNotification(_0x39dd5a(0xef),_0x39dd5a(0x98)),hideLoader();return;}try{const _0x2e6945=ref(db,_0x39dd5a(0x8b));await push(_0x2e6945,{...currentReservedTicket,'soldAt':Date['now'](),'vendorId':currentVendorId});const _0x4c4a91=ref(db,_0x39dd5a(0x92)+currentVendorId);await push(_0x4c4a91,{...currentReservedTicket,'soldAt':Date[_0x39dd5a(0xb3)]()}),showNotification(_0x39dd5a(0x8a),_0x39dd5a(0xb2)),currentReservedTicket=null,hideNotification(),await syncTickets(),hideLoader();}catch(_0x2606c9){console['error']('Erreur\x20de\x20confirmation:',_0x2606c9),showNotification(_0x39dd5a(0xef),_0x39dd5a(0x117)),hideLoader();}},window[_0x28599a(0xa8)]=function(){currentReservedTicket=null,hideNotification();};function showNotification(_0x3beda4,_0xfdc73b){const _0x43bdd2=_0x28599a,_0x412dcf=document[_0x43bdd2(0x135)](_0x43bdd2(0x11c)),_0x2ab3f3=document['getElementById'](_0x43bdd2(0x123)),_0x4d33b3=document[_0x43bdd2(0x135)]('notification-message'),_0x2d7f19=document[_0x43bdd2(0x135)]('notification-buttons'),_0x59312d=document[_0x43bdd2(0x135)]('ticket-actions');_0x2ab3f3[_0x43bdd2(0x12b)]=_0x3beda4,_0x4d33b3[_0x43bdd2(0x13a)]=_0xfdc73b,_0x3beda4===_0x43bdd2(0x8a)||_0x3beda4===_0x43bdd2(0xef)?(_0x2d7f19['style'][_0x43bdd2(0xc8)]='none',_0x59312d[_0x43bdd2(0xad)]['display']='none'):(_0x2d7f19[_0x43bdd2(0xad)][_0x43bdd2(0xc8)]=_0x43bdd2(0x118),_0x59312d['style'][_0x43bdd2(0xc8)]='none'),_0x412dcf[_0x43bdd2(0xad)][_0x43bdd2(0xc8)]=_0x43bdd2(0xf2);}window[_0x28599a(0xa7)]=function(){const _0xc96341=_0x28599a;document[_0xc96341(0x135)](_0xc96341(0x11c))[_0xc96341(0xad)]['display']='none';};async function loadHistory(){const _0x380bf5=_0x28599a;showLoader();try{const _0x327882=ref(db,_0x380bf5(0x92)+currentVendorId),_0x313cab=await get(_0x327882);let _0x572931=[];_0x313cab['exists']()&&(_0x572931=Object[_0x380bf5(0xe6)](_0x313cab['val']())['map'](([_0x18f93f,_0x55d28f])=>({'id':_0x18f93f,..._0x55d28f}))),filterHistory(_0x572931),hideLoader();}catch(_0x1d7d92){console['error'](_0x380bf5(0x125),_0x1d7d92),showNotification('Erreur',_0x380bf5(0x110)),hideLoader();}}function filterHistory(_0x5aff2d){const _0x5e88e0=_0x28599a,_0x40d3b3=document[_0x5e88e0(0x135)]('periodFilter')['value'],_0x254498=new Date(),_0x255e14={'today':new Date(_0x254498[_0x5e88e0(0xc7)](0x0,0x0,0x0,0x0)),'week':new Date(_0x254498[_0x5e88e0(0xa0)](_0x254498[_0x5e88e0(0xc5)]()-_0x254498[_0x5e88e0(0x12d)]())),'month':new Date(_0x254498[_0x5e88e0(0xa0)](0x1)),'all':new Date(0x0)},_0x2d21ac=_0x5aff2d['filter'](_0xba16a7=>new Date(_0xba16a7[_0x5e88e0(0xb5)])>=_0x255e14[_0x40d3b3]);updateStats(_0x2d21ac),updateHistoryTable(_0x2d21ac);}function updateStats(_0x1e4340){const _0x4440c9=_0x28599a,_0x369883=_0x1e4340[_0x4440c9(0xc6)],_0x3b4903=_0x1e4340['reduce']((_0x5b4f11,_0x408f81)=>_0x5b4f11+parseFloat(_0x408f81[_0x4440c9(0x86)]),0x0),_0x3e322c=_0x1e4340[_0x4440c9(0x10e)]((_0x17db3c,_0x5083f5)=>{const _0x3d8e32=_0x4440c9;return _0x17db3c[_0x5083f5['category']]=(_0x17db3c[_0x5083f5[_0x3d8e32(0xf0)]]||0x0)+0x1,_0x17db3c;},{}),_0x490466=Object[_0x4440c9(0xe6)](_0x3e322c)['sort']((_0xc39da1,_0xa860c4)=>_0xa860c4[0x1]-_0xc39da1[0x1])[0x0]?.[0x0]||'-',_0x260bf5=_0x1e4340[_0x4440c9(0xc6)]>0x0?Math[_0x4440c9(0xa9)](0x1,Math[_0x4440c9(0x87)]((Date[_0x4440c9(0xb3)]()-Math['min'](..._0x1e4340[_0x4440c9(0x8e)](_0x3cde37=>_0x3cde37[_0x4440c9(0xb5)])))/(0x3e8*0x3c*0x3c*0x18))):0x1,_0x425c46=(_0x369883/_0x260bf5)['toFixed'](0x1);document[_0x4440c9(0x135)](_0x4440c9(0x91))[_0x4440c9(0x12b)]=_0x369883,document[_0x4440c9(0x135)]('totalRevenue')[_0x4440c9(0x12b)]=_0x3b4903[_0x4440c9(0x9b)]()+'\x20FCFA',document[_0x4440c9(0x135)](_0x4440c9(0x10c))[_0x4440c9(0x12b)]=_0x490466,document[_0x4440c9(0x135)](_0x4440c9(0x12c))['textContent']=_0x425c46;}function updateHistoryTable(_0x2a2ce5){const _0xe78f57=_0x28599a,_0x2a5e3a=document[_0xe78f57(0x135)](_0xe78f57(0xbf));_0x2a5e3a[_0xe78f57(0x13a)]=_0x2a2ce5[_0xe78f57(0xf4)]((_0x52a515,_0x4aa67d)=>_0x4aa67d[_0xe78f57(0xb5)]-_0x52a515[_0xe78f57(0xb5)])[_0xe78f57(0x8e)](_0x3d4e71=>_0xe78f57(0x109)+_0x3d4e71['id']+_0xe78f57(0x120)+new Date(_0x3d4e71['soldAt'])[_0xe78f57(0x9b)]()+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3d4e71[_0xe78f57(0xf0)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3d4e71[_0xe78f57(0xdb)]+_0xe78f57(0x127)+_0x3d4e71[_0xe78f57(0x86)]+'\x20FCFA</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><i\x20class=\x22fa-solid\x20fa-arrow-right\x22></i></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')['join']('');}window['showTicketDetailsFromHistory']=async function(_0xce27ce){const _0x29f456=_0x28599a;showLoader();try{const _0x4afd7b=ref(db,_0x29f456(0x92)+currentVendorId+'/'+_0xce27ce),_0x28560e=await get(_0x4afd7b);if(_0x28560e['exists']()){const _0x3d02fe=_0x28560e['val']();window[_0x29f456(0x13f)](),showTicketDetails(_0x3d02fe),hideLoader();}else showNotification(_0x29f456(0xef),_0x29f456(0x12e)),hideLoader();}catch(_0xb1f39c){console[_0x29f456(0x100)](_0x29f456(0xe9),_0xb1f39c),showNotification(_0x29f456(0xef),_0x29f456(0x99)),hideLoader();}},window['toggleHistory']=function(){const _0x114f06=_0x28599a,_0x43f17e=document[_0x114f06(0x135)]('historySection'),_0xe7c235=_0x43f17e[_0x114f06(0xad)][_0x114f06(0xc8)]===_0x114f06(0xf2);_0x43f17e['style'][_0x114f06(0xc8)]=_0xe7c235?'none':'block',!_0xe7c235&&loadHistory();},window['closeHistory']=function(){const _0x227c8e=_0x28599a;document['getElementById'](_0x227c8e(0x140))[_0x227c8e(0xad)][_0x227c8e(0xc8)]=_0x227c8e(0x10d);},window[_0x28599a(0xd9)]=function(){loadHistory();};function _0x538f(_0x1746c1,_0x363463){const _0x176617=_0x1766();return _0x538f=function(_0x538f4b,_0x29d948){_0x538f4b=_0x538f4b-0x84;let _0x6eb797=_0x176617[_0x538f4b];return _0x6eb797;},_0x538f(_0x1746c1,_0x363463);}function listenForNewMessages(){const _0x26f130=_0x28599a,_0x1d167d=ref(db,_0x26f130(0x12f)+currentVendorId+_0x26f130(0x103));onChildAdded(_0x1d167d,_0x119cc8=>{const _0x5a1413=_0x119cc8['val']();displayNewMessage(_0x5a1413);});}function displayNewMessage(_0x2ce414){const _0x3e6d50=_0x28599a,_0x2b452=document[_0x3e6d50(0x135)](_0x3e6d50(0xce)),_0x1f88ff=document[_0x3e6d50(0xae)](_0x3e6d50(0xd4));_0x1f88ff[_0x3e6d50(0xd5)][_0x3e6d50(0x131)](_0x3e6d50(0xb4)),_0x1f88ff[_0x3e6d50(0x13a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x2ce414['content']+_0x3e6d50(0x122)+new Date(_0x2ce414['timestamp'])[_0x3e6d50(0x9b)]()+_0x3e6d50(0xdc),_0x2b452['appendChild'](_0x1f88ff),_0x2b452[_0x3e6d50(0x8d)]=_0x2b452[_0x3e6d50(0x124)];}window[_0x28599a(0x121)]=function(){const _0x16536c=_0x28599a,_0x5617a5=document[_0x16536c(0x135)]('notification-message')[_0x16536c(0xfb)];navigator[_0x16536c(0xda)]?navigator[_0x16536c(0xda)]({'title':_0x16536c(0xc4),'text':_0x5617a5})[_0x16536c(0xe8)](()=>console[_0x16536c(0xa6)]('Partage\x20réussi'))[_0x16536c(0x105)](_0x3cec8d=>console['error'](_0x16536c(0x114),_0x3cec8d)):alert(_0x16536c(0x13b));},window['copyTicket']=function(){const _0x30a870=_0x28599a,_0x57583d=document[_0x30a870(0x135)](_0x30a870(0xcc))['innerText'];navigator[_0x30a870(0xc0)][_0x30a870(0x111)](_0x57583d)['then'](()=>{const _0x5b6592=_0x30a870;showNotification(_0x5b6592(0x8a),_0x5b6592(0x136));})['catch'](_0x6ce9f6=>{const _0x3edcc8=_0x30a870;console[_0x3edcc8(0x100)](_0x3edcc8(0xb1),_0x6ce9f6),showNotification(_0x3edcc8(0xef),_0x3edcc8(0xe7));});},window[_0x28599a(0x116)]=async function(){const _0x3bf45e=_0x28599a;showLoader();const _0x471366=document['getElementById']('notification-message'),_0x3aaae4=new jsPDF(),_0x2516af=await html2canvas(_0x471366),_0x4b2701=_0x2516af[_0x3bf45e(0xbe)](_0x3bf45e(0x88));_0x3aaae4['addImage'](_0x4b2701,'PNG',0xa,0xa,0xbe,0x0),_0x3aaae4[_0x3bf45e(0xb7)](_0x3bf45e(0xd1)),hideLoader();};function showLoader(){const _0x463ebe=_0x28599a;document[_0x463ebe(0x135)]('loaderWrapper')['style'][_0x463ebe(0xc8)]=_0x463ebe(0xf2);}function _0x1766(){const _0x3ff30f=['setDate','index.html','AIzaSyB6AUBnK_7Vy2ABWI2JMo3ebG_Sljr8XlY','pageLoaderWrapper','Impossible\x20de\x20récupérer\x20le\x20ticket','https://cyber-campus-2706f-default-rtdb.firebaseio.com','log','hideNotification','cancelSale','max','Vérification\x20de\x20l\x27abonnement...','confirmSale','129387IkGsyd','style','createElement','table','3790206YlUejU','Erreur\x20lors\x20de\x20la\x20copie:','Ticket\x20vendu\x20avec\x20succès!','now','message','soldAt','target','save','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement','loginError','startsWith','contains','status','2190jHvNZH','toDataURL','historyTableBody','clipboard','Erreur\x20lors\x20de\x20l\x27initialisation\x20:','.rates-section\x20table','username','Détails\x20du\x20Ticket','getDate','length','setHours','display','href','forEach','\x27)\x22>Vendre</button></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','notification-message','108919eLMcpC','messagesContainer','querySelector','redirectToSubscription','ticket.pdf','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Prix:</strong>\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Voulez-vous\x20vendre\x20ce\x20ticket\x20?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Catégorie:</strong>\x20','div','classList','rememberMe','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Nom\x20d\x27utilisateur:</strong>\x20','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement\x20:','filterHistory','share','user','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','removeItem','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27abonnement.','appendChild','52SrYdeZ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Erreur\x20de\x20synchronisation\x20des\x20tickets.','initTicketSale','cyber-campus-2706f.firebaseapp.com','Abonnement\x20expiré','entries','Impossible\x20de\x20copier\x20le\x20ticket','then','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20ticket:','val','Erreur:','TicketsTotal/','13VURHbo','getItem','Erreur','category','usernameTimestamp','block','Confirmation\x20de\x20vente','sort','insertRow','loginForm','motDePasse','1:719410601264:web:44fd2e3757721866303cf5','proceedWithSale','checked','innerText','loginSection','719410601264','Ticket\x20vendu\x20avec\x20succès','Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20vendeurs:','error','createIcons','location','/messages','5bYbTPC','catch','loaderWrapper','11935884EJmCNn','Vendors','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20onclick=\x22window.showTicketDetailsFromHistory(\x27','\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Aucun\x20vendeur\x20trouvé.','topCategory','none','reduce','Erreur\x20de\x20synchronisation:','Impossible\x20de\x20charger\x20l\x27historique','writeText','Impossible\x20de\x20finaliser\x20la\x20vente','confirmation-buttons','Erreur\x20lors\x20du\x20partage:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Catégorie:</strong>\x20','exportToPDF','Erreur\x20lors\x20de\x20la\x20confirmation\x20de\x20la\x20vente','flex','2gxfnaY','prix','.rates-section','notification','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Mot\x20de\x20passe:</strong>\x20','toLowerCase','click','\x27)\x22\x20style=\x22cursor:\x20pointer;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','shareTicket','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22timestamp\x22>','notification-title','scrollHeight','Erreur\x20lors\x20du\x20chargement\x20de\x20l\x27historique:','updatedData','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','217eXbFND','25806IdJwll','jsPDF','textContent','avgDaily','getDay','Ticket\x20introuvable\x20dans\x20l\x27historique','Vendors/','Erreur\x20lors\x20de\x20la\x20vente:','add','Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','active','admin/subscription','getElementById','Ticket\x20copié\x20dans\x20le\x20presse-papiers!','139136IxwDyb','exists','cyber-campus-2706f','innerHTML','Le\x20partage\x20n\x27est\x20pas\x20supporté\x20sur\x20votre\x20navigateur.\x20Veuillez\x20copier\x20manuellement\x20les\x20détails\x20du\x20ticket.','hideSubscriptionRequiredModal','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27initialisation.','input','closeHistory','historySection','setItem','addEventListener','price','ceil','image/png','utilisateur','Succès','TicketsVendus','Plus\x20de\x20tickets\x20disponibles','scrollTop','map','submit','messagesSection','totalTickets','VendorsHistory/','Abonnement\x20actif','value','cyber-campus-2706f.appspot.com','endDate','jspdf','Aucun\x20ticket\x20en\x20cours\x20de\x20vente','Impossible\x20de\x20récupérer\x20les\x20détails\x20du\x20ticket','ticket-actions','toLocaleString','2311443kqepRX','password','.loading-message','slice'];_0x1766=function(){return _0x3ff30f;};return _0x1766();}function hideLoader(){const _0x1c2448=_0x28599a;document['getElementById'](_0x1c2448(0x106))[_0x1c2448(0xad)][_0x1c2448(0xc8)]=_0x1c2448(0x10d);}function showPageLoader(){const _0x30fa2a=_0x28599a;document[_0x30fa2a(0x135)](_0x30fa2a(0xa3))[_0x30fa2a(0xad)][_0x30fa2a(0xc8)]=_0x30fa2a(0x118);}function hidePageLoader(){const _0x327a5d=_0x28599a;document[_0x327a5d(0x135)](_0x327a5d(0xa3))[_0x327a5d(0xad)][_0x327a5d(0xc8)]=_0x327a5d(0x10d);}function showSubscriptionRequiredModal(){const _0x510fa6=_0x28599a;subscriptionRequiredModal[_0x510fa6(0xad)][_0x510fa6(0xc8)]=_0x510fa6(0x118);}function hideSubscriptionRequiredModal(){const _0x41b7b8=_0x28599a;subscriptionRequiredModal['style'][_0x41b7b8(0xc8)]='none';}function redirectToSubscription(){const _0x180ee8=_0x28599a;window[_0x180ee8(0x102)][_0x180ee8(0xc9)]=_0x180ee8(0xa1);}async function checkSubscriptionStatus(){const _0x55bc25=_0x28599a,_0x24c28f=document[_0x55bc25(0x135)]('pageLoaderMessage');_0x24c28f[_0x55bc25(0x12b)]=_0x55bc25(0xaa);try{const _0x3f247b=await get(adminRef),_0x58063d=_0x3f247b[_0x55bc25(0xea)](),_0x2ac474=new Date();if(_0x58063d&&_0x58063d[_0x55bc25(0xbc)]===_0x55bc25(0x133)){const _0x4e3b45=new Date(_0x58063d[_0x55bc25(0x96)]);_0x4e3b45<_0x2ac474?(_0x24c28f['textContent']=_0x55bc25(0xe5),showSubscriptionRequiredModal(),await adminRef['update']({'status':'expired'})):_0x24c28f[_0x55bc25(0x12b)]=_0x55bc25(0x93);}else _0x24c28f['textContent']='Pas\x20d\x27abonnement\x20actif',showSubscriptionRequiredModal();}catch(_0x14c3e5){console['error'](_0x55bc25(0xd8),_0x14c3e5),_0x24c28f['textContent']=_0x55bc25(0xb8),showNotification('Erreur',_0x55bc25(0xde));}}document['addEventListener']('DOMContentLoaded',()=>{const _0x54b9e9=_0x28599a;checkSubscriptionStatus()[_0x54b9e9(0xe8)](()=>{const _0x2640b0=_0x54b9e9;fetchVendors(),lucide[_0x2640b0(0x101)](),hidePageLoader();})[_0x54b9e9(0x105)](_0x38a78c=>{const _0x101497=_0x54b9e9;console[_0x101497(0x100)](_0x101497(0xc1),_0x38a78c),showNotification(_0x101497(0xef),_0x101497(0x13d)),hidePageLoader();});}),window[_0x28599a(0xd0)]=redirectToSubscription,window[_0x28599a(0x13c)]=redirectToSubscription;
    </script>
</body>
</html>
