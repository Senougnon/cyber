<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".json,.csv,.txt" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x560a78=_0xeb70;(function(_0x50c654,_0x4a4c39){const _0x4bb5f6=_0xeb70,_0x3a8585=_0x50c654();while(!![]){try{const _0x42041b=-parseInt(_0x4bb5f6(0x166))/0x1*(parseInt(_0x4bb5f6(0xd5))/0x2)+parseInt(_0x4bb5f6(0xe5))/0x3*(parseInt(_0x4bb5f6(0x10a))/0x4)+-parseInt(_0x4bb5f6(0x174))/0x5+parseInt(_0x4bb5f6(0xfe))/0x6+-parseInt(_0x4bb5f6(0xe1))/0x7+parseInt(_0x4bb5f6(0x11f))/0x8*(parseInt(_0x4bb5f6(0x17a))/0x9)+-parseInt(_0x4bb5f6(0x14b))/0xa*(-parseInt(_0x4bb5f6(0x103))/0xb);if(_0x42041b===_0x4a4c39)break;else _0x3a8585['push'](_0x3a8585['shift']());}catch(_0x2270dd){_0x3a8585['push'](_0x3a8585['shift']());}}}(_0x48d0,0x6cb7d));const firebaseConfig={'apiKey':_0x560a78(0x12f),'authDomain':_0x560a78(0xf6),'databaseURL':_0x560a78(0x147),'projectId':_0x560a78(0x12e),'storageBucket':_0x560a78(0xd4),'messagingSenderId':'719410601264','appId':_0x560a78(0x15d),'measurementId':_0x560a78(0x104)};firebase['initializeApp'](firebaseConfig);const database=firebase[_0x560a78(0xce)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x560a78(0x119),editingCategory='',editingIndex=-0x1,editingId='';(function(){const _0x586f42=_0x560a78,_0x3721ef=sessionStorage[_0x586f42(0xe8)]('isLoggedIn');!_0x3721ef&&window[_0x586f42(0x16f)][_0x586f42(0x176)](_0x586f42(0x13d));}()),document['addEventListener'](_0x560a78(0xef),function(){const _0x269fe6=_0x560a78;!sessionStorage[_0x269fe6(0xe8)](_0x269fe6(0xde))&&window[_0x269fe6(0x16f)]['replace']('login.html');}),window['addEventListener']('pageshow',function(_0x212c6a){const _0x574436=_0x560a78;(_0x212c6a[_0x574436(0xf7)]||!sessionStorage['getItem']('isLoggedIn'))&&window['location'][_0x574436(0x176)](_0x574436(0x13d));});function _0x48d0(){const _0x5238cd=['Format\x20JSON\x20invalide\x20pour\x20TicketsTotal','130zDnYAT','editCategory','data:text/json;charset=utf-8,','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','prix','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','editTicketModal','textContent','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27','block','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27','categoryName','then','parse','newCategory','utilisateur','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','1:719410601264:web:44fd2e3757721866303cf5','pop','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','\x27,\x20','newUser','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','.json','Erreur\x20d\x27importation:','354162cTiGie','password','tickets_export_','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','newPassword','Ticket\x20introuvable.','body','toLowerCase','newPrice','location','TicketsTransit\x20Import','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_','price','2154850FpjhbC','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27','replace','querySelectorAll','input[name^=\x22ticketSelect_','user','594YgNqCr','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','value','clear','tickets','editPrice','database','Ticket\x20supprimé\x20avec\x20succès!','ticketCategories','appendChild','none','addEventListener','cyber-campus-2706f.appspot.com','2MCqGGr','priceModal','editUser','Erreur\x20lors\x20de\x20l\x27importation:','catch','setAttribute','push','Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!','priceInput','isLoggedIn','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','3808987PgWLNq','Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!','loadingIndicator','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','16854VBobcx','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','getItem','Erreur\x20lors\x20de\x20la\x20modification:','name','addTicketModal','innerHTML','Erreur\x20lors\x20de\x20la\x20suppression:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','DOMContentLoaded','createElement','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','href','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','editId','cyber-campus-2706f.firebaseapp.com','persisted','split','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!','match','readAsText','category','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','1532700xxuKbF','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie','stringify','</span>','Format\x20JSON\x20invalide\x20pour\x20TicketsTransit','982366HFFlod','G-CEEFJP5LYZ','input','N/A','error','Veuillez\x20entrer\x20un\x20prix','display','184ahqSTn','\x22]:checked','result','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','fill','update','keys','motDePasse','databaseSelect','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','map','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27','TicketsTotal','searchBar','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','target','\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','12088gHOUrq','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','id-','Importation\x20réussie\x20!','click','importFile','editCategoryName','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','onload','now','Ticket\x20modifié\x20avec\x20succès!','trim','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer','set','editPassword','cyber-campus-2706f','AIzaSyB6AUBnK_7Vy2ABWI2JMo3ebG_Sljr8XlY','download','Importation\x20réussie\x20dans\x20',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','style','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','length','csv','remove','/ip\x20hotspot\x20user','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','Catégorie\x20modifiée\x20avec\x20succès!','Format\x20de\x20fichier\x20non\x20supporté','login.html','splice','includes','ref','<span\x20class=\x22highlight\x22>','editCategoryModal','Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier\x20pour\x20TicketsTransit','filtered_tickets_export_','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','getElementById','https://cyber-campus-2706f-default-rtdb.firebaseio.com','from','TicketsTransit'];_0x48d0=function(){return _0x5238cd;};return _0x48d0();}function showLoading(){const _0x4d7ccc=_0x560a78;document[_0x4d7ccc(0x146)](_0x4d7ccc(0xe3))['style'][_0x4d7ccc(0x109)]='flex';}function hideLoading(){const _0x213e69=_0x560a78;document['getElementById'](_0x213e69(0xe3))['style'][_0x213e69(0x109)]=_0x213e69(0xd2);}function loadTickets(){const _0x444991=_0x560a78;showLoading();const _0x1ebc25=database[_0x444991(0x140)](currentDatabase);_0x1ebc25['on']('value',_0xce08c4=>{allTickets=_0xce08c4['val']()||{},displayTickets(allTickets),hideLoading();},_0x189fd8=>{const _0x2c7858=_0x444991;console['error'](_0x2c7858(0x115),_0x189fd8),hideLoading(),alert(_0x2c7858(0xdf));});}function displayTickets(_0x3b5695,_0x78146e=''){const _0x8ed78d=_0x560a78,_0x5f5cba=document['getElementById'](_0x8ed78d(0xd0));_0x5f5cba['innerHTML']='';if(currentDatabase===_0x8ed78d(0x119))displayTicketsTotal(_0x3b5695,_0x78146e);else currentDatabase===_0x8ed78d(0x149)&&displayTicketsTransit(_0x3b5695,_0x78146e);}function displayTicketsTotal(_0xcf96b9,_0x18ad68=''){const _0x38f720=_0x560a78,_0x478856=document[_0x38f720(0x146)]('ticketCategories');for(let _0x526d94 in _0xcf96b9){const _0x566ce8=_0xcf96b9[_0x526d94],_0x105893=_0x38f720(0xee)+_0x526d94+_0x38f720(0x118)+_0x526d94+'\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27'+_0x526d94+_0x38f720(0x172)+_0x526d94+_0x38f720(0x163)+_0x526d94+_0x38f720(0x10d)+_0x526d94+_0x38f720(0x155)+_0x526d94+_0x38f720(0x11d)+_0x526d94+'\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20'+_0x526d94+_0x38f720(0xe0)+_0x526d94+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+generateTicketRowsTotal(_0x526d94,_0x566ce8,_0x18ad68)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27'+_0x526d94+_0x38f720(0x134)+_0x526d94+_0x38f720(0x169);_0x478856['innerHTML']+=_0x105893;}}function generateTicketRowsTotal(_0x2eba52,_0x3418d1,_0x376dc3){const _0x8e30c4=_0x560a78;let _0x4f083d='';for(let _0x79dbb6=0x0;_0x79dbb6<_0x3418d1[_0x8e30c4(0x113)]['length'];_0x79dbb6++){if(_0x376dc3&&!matchesSearchTotal(_0x3418d1,_0x79dbb6,_0x376dc3))continue;_0x4f083d+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_'+_0x2eba52+'\x22\x20value=\x22'+_0x79dbb6+_0x8e30c4(0x145)+highlightMatch(_0x3418d1[_0x8e30c4(0x113)][_0x79dbb6],_0x376dc3)+_0x8e30c4(0x11b)+highlightMatch(_0x3418d1[_0x8e30c4(0x14f)][_0x79dbb6],_0x376dc3)+_0x8e30c4(0x11b)+highlightMatch(_0x3418d1['utilisateur'][_0x79dbb6],_0x376dc3)+_0x8e30c4(0x15f)+_0x2eba52+'\x27,\x20'+_0x79dbb6+_0x8e30c4(0x132)+_0x2eba52+_0x8e30c4(0x161)+_0x79dbb6+',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}return _0x4f083d;}function displayTicketsTransit(_0x4d83ea,_0x1fc827=''){const _0x404042=_0x560a78,_0x1e4a68=document['getElementById'](_0x404042(0xd0));_0x1e4a68[_0x404042(0xec)]='';const _0x2bf88b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27TicketsTransit\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+generateTicketRowsTransit(_0x4d83ea,_0x1fc827)+_0x404042(0xe6);_0x1e4a68[_0x404042(0xec)]=_0x2bf88b;}function generateTicketRowsTransit(_0x1b466a,_0x59ba8e){const _0x1d92e9=_0x560a78;let _0x16565c='';for(let _0x33ed16 in _0x1b466a){const _0x233636=_0x1b466a[_0x33ed16];if(_0x59ba8e&&!matchesSearchTransit(_0x233636,_0x59ba8e))continue;_0x16565c+=_0x1d92e9(0xf4)+_0x33ed16+_0x1d92e9(0x145)+highlightMatch(_0x33ed16,_0x59ba8e)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x233636[_0x1d92e9(0xfc)],_0x59ba8e)+_0x1d92e9(0x11b)+highlightMatch(_0x233636['password'],_0x59ba8e)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x233636['price'],_0x59ba8e)+_0x1d92e9(0x11b)+highlightMatch(_0x233636['user'],_0x59ba8e)+_0x1d92e9(0x175)+_0x33ed16+_0x1d92e9(0x153)+_0x33ed16+_0x1d92e9(0x15b);}return _0x16565c;}function editTicketTransit(_0x5c1380){const _0x130a04=_0x560a78,_0x3b18e1=allTickets[_0x5c1380];_0x3b18e1?(editingId=_0x5c1380,document[_0x130a04(0x146)]('editId')[_0x130a04(0x17c)]=_0x5c1380,document[_0x130a04(0x146)](_0x130a04(0x14c))[_0x130a04(0x17c)]=_0x3b18e1[_0x130a04(0xfc)],document[_0x130a04(0x146)](_0x130a04(0x12d))['value']=_0x3b18e1[_0x130a04(0x167)],document[_0x130a04(0x146)]('editPrice')[_0x130a04(0x17c)]=_0x3b18e1[_0x130a04(0x173)],document[_0x130a04(0x146)](_0x130a04(0xd7))[_0x130a04(0x17c)]=_0x3b18e1[_0x130a04(0x179)],document[_0x130a04(0x146)](_0x130a04(0x151))[_0x130a04(0x133)]['display']='block'):alert(_0x130a04(0x16b));}function saveTicketEdit(){const _0x1936c7=_0x560a78,_0x4967e2=document[_0x1936c7(0x146)]('editPassword')[_0x1936c7(0x17c)],_0x395d70=document[_0x1936c7(0x146)](_0x1936c7(0xcd))[_0x1936c7(0x17c)],_0x3a2a4f=document[_0x1936c7(0x146)](_0x1936c7(0xd7))[_0x1936c7(0x17c)],_0x205337=document[_0x1936c7(0x146)](_0x1936c7(0x14c))[_0x1936c7(0x17c)];if(!_0x4967e2||!_0x395d70||!_0x3a2a4f||!_0x205337){alert('Tous\x20les\x20champs\x20sont\x20obligatoires');return;}showLoading();if(currentDatabase==='TicketsTotal'){const _0x4aab46=allTickets[editingCategory];_0x4aab46['motDePasse'][editingIndex]=_0x4967e2,_0x4aab46[_0x1936c7(0x14f)][editingIndex]=_0x395d70,_0x4aab46[_0x1936c7(0x15a)][editingIndex]=_0x3a2a4f;const _0x11dc21={[currentDatabase+'/'+editingCategory]:_0x4aab46};database[_0x1936c7(0x140)]()[_0x1936c7(0x111)](_0x11dc21)['then'](()=>{const _0x5e1a56=_0x1936c7;hideLoading(),closeEditModal(),alert(_0x5e1a56(0x129));})['catch'](_0x4457df=>{const _0x25db38=_0x1936c7;console[_0x25db38(0x107)](_0x25db38(0xe9),_0x4457df),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket');});}else{if(currentDatabase===_0x1936c7(0x149)){const _0x55067a=database['ref'](currentDatabase+'/'+editingId);_0x55067a[_0x1936c7(0x111)]({'category':_0x205337,'password':_0x4967e2,'price':_0x395d70,'user':_0x3a2a4f})[_0x1936c7(0x157)](()=>{const _0x52f93c=_0x1936c7;hideLoading(),closeEditModal(),alert(_0x52f93c(0x129));})[_0x1936c7(0xd9)](_0xa88567=>{const _0x224845=_0x1936c7;console[_0x224845(0x107)](_0x224845(0xe9),_0xa88567),hideLoading(),alert(_0x224845(0x10f));});}}}function editTicketTotal(_0x5b123c,_0x1bc490){const _0x803bf=_0x560a78;editingCategory=_0x5b123c,editingIndex=_0x1bc490;const _0xc1cbab=allTickets[_0x5b123c];document[_0x803bf(0x146)](_0x803bf(0xf5))[_0x803bf(0x17c)]='',document[_0x803bf(0x146)](_0x803bf(0x14c))[_0x803bf(0x17c)]=_0x5b123c,document[_0x803bf(0x146)](_0x803bf(0x12d))[_0x803bf(0x17c)]=_0xc1cbab[_0x803bf(0x113)][_0x1bc490],document[_0x803bf(0x146)](_0x803bf(0xcd))[_0x803bf(0x17c)]=_0xc1cbab[_0x803bf(0x14f)][_0x1bc490],document[_0x803bf(0x146)](_0x803bf(0xd7))[_0x803bf(0x17c)]=_0xc1cbab[_0x803bf(0x15a)][_0x1bc490],document[_0x803bf(0x146)](_0x803bf(0x151))[_0x803bf(0x133)]['display']=_0x803bf(0x154);}function importTicketsToCategory(_0xb7eb2b,_0x500c0e){const _0x4388ec=_0x560a78,_0x5ccec5=_0x500c0e[_0x4388ec(0x11c)]['files'][0x0];if(!_0x5ccec5)return;showLoading();const _0x23367f=new FileReader();_0x23367f[_0x4388ec(0x127)]=function(_0x3e966e){const _0x1810dd=_0x4388ec;try{const _0x50768d=_0x5ccec5[_0x1810dd(0xea)][_0x1810dd(0xf8)]('.')[_0x1810dd(0x15e)]()[_0x1810dd(0x16d)]();if(_0x50768d==='json')handleJsonImportToCategory(_0x3e966e[_0x1810dd(0x11c)][_0x1810dd(0x10c)],_0xb7eb2b);else{if(_0x50768d===_0x1810dd(0x137))handleCsvImportToCategory(_0x3e966e['target'][_0x1810dd(0x10c)],_0xb7eb2b);else{if(_0x50768d==='txt')handleTxtImportToCategory(_0x3e966e['target'][_0x1810dd(0x10c)],_0xb7eb2b);else throw new Error(_0x1810dd(0x13c));}}}catch(_0x19024d){console[_0x1810dd(0x107)](_0x1810dd(0x165),_0x19024d),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.');}},_0x23367f[_0x4388ec(0xfb)](_0x5ccec5);}function handleJsonImportToCategory(_0x2a2b38,_0x3dd5ab){const _0x57a360=_0x560a78,_0x4746ce=JSON['parse'](_0x2a2b38);if(currentDatabase==='TicketsTransit')for(let _0x5540aa in _0x4746ce){if(!_0x4746ce[_0x5540aa][_0x57a360(0xfc)]||!_0x4746ce[_0x5540aa][_0x57a360(0x167)]||!_0x4746ce[_0x5540aa][_0x57a360(0x173)]||!_0x4746ce[_0x5540aa]['user']){hideLoading(),alert(_0x57a360(0x102));return;}}else{if(_0x3dd5ab===_0x57a360(0x149))for(let _0x3c5a83 in _0x4746ce){if(!_0x4746ce[_0x3c5a83]['category']||!_0x4746ce[_0x3c5a83][_0x57a360(0x167)]||!_0x4746ce[_0x3c5a83][_0x57a360(0x173)]||!_0x4746ce[_0x3c5a83]['user']){hideLoading(),alert('Format\x20JSON\x20invalide\x20pour\x20TicketsTransit');return;}}else{if(!_0x4746ce[_0x3dd5ab]||!_0x4746ce[_0x3dd5ab]['motDePasse']||!_0x4746ce[_0x3dd5ab][_0x57a360(0x14f)]||!_0x4746ce[_0x3dd5ab]['utilisateur']){hideLoading(),alert(_0x57a360(0x14a));return;}}}mergeTicketsToCategory(_0x3dd5ab,_0x4746ce);}function handleCsvImportToCategory(_0x514697,_0x45d820){const _0x12f639=_0x560a78,_0x531e0a=_0x514697['split']('\x0a');let _0x1abdd0={};if(currentDatabase===_0x12f639(0x149)){let _0x894995=[];for(let _0x4cb54e=0x1;_0x4cb54e<_0x531e0a[_0x12f639(0x136)];_0x4cb54e++){if(!_0x531e0a[_0x4cb54e][_0x12f639(0x12a)]())continue;const _0x590844=_0x531e0a[_0x4cb54e][_0x12f639(0xf8)](','),_0x19789f=_0x590844[0x0]?_0x590844[0x0]['trim']():_0x12f639(0x121)+Date[_0x12f639(0x128)]()+'-'+_0x4cb54e;_0x894995[_0x12f639(0xdb)]({'id':_0x19789f,'category':_0x590844[0x1]?_0x590844[0x1][_0x12f639(0x12a)]():_0x12f639(0x106),'password':_0x590844[0x2]?_0x590844[0x2]['trim']():'','price':_0x590844[0x3]?_0x590844[0x3]['trim']():'','user':_0x590844[0x4]?_0x590844[0x4][_0x12f639(0x12a)]():''});}tempImportData={'tickets':_0x894995},tempCategory='TicketsTransit',showPriceModal(_0x12f639(0x170));}else{const _0x4033ef={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x454d34=0x1;_0x454d34<_0x531e0a[_0x12f639(0x136)];_0x454d34++){if(!_0x531e0a[_0x454d34]['trim']())continue;const _0x3d1c27=_0x531e0a[_0x454d34][_0x12f639(0xf8)](',');_0x4033ef[_0x12f639(0x15a)][_0x12f639(0xdb)](_0x3d1c27[0x0][_0x12f639(0x12a)]()),_0x4033ef['motDePasse']['push'](_0x3d1c27[0x1][_0x12f639(0x12a)]()),_0x3d1c27[0x3]&&_0x4033ef[_0x12f639(0x14f)][_0x12f639(0xdb)](_0x3d1c27[0x3][_0x12f639(0x12a)]());}!_0x4033ef['prix']['length']?(tempImportData={[_0x45d820]:_0x4033ef},tempCategory=_0x45d820,showPriceModal(_0x45d820)):mergeTicketsToCategory(_0x45d820,_0x4033ef);}}function handleTxtImportToCategory(_0x6c69f3,_0x41782a){const _0x2da456=_0x560a78,_0x1de25b=_0x6c69f3['split']('\x0a');let _0x1c6737={};if(currentDatabase===_0x2da456(0x149)){const _0x3d5c2f=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x21f8be={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x397784 of _0x1de25b){_0x397784=_0x397784[_0x2da456(0x12a)]();if(!_0x397784||_0x397784===_0x2da456(0x139))continue;const _0x30ac9b=_0x397784[_0x2da456(0xfa)](_0x3d5c2f);if(_0x30ac9b){const [_0x243e44,_0x32731a,_0x29936b,_0x47d52b]=_0x30ac9b;_0x21f8be[_0x2da456(0x15a)][_0x2da456(0xdb)](_0x32731a),_0x21f8be[_0x2da456(0x113)][_0x2da456(0xdb)](_0x29936b),_0x21f8be[_0x2da456(0x14f)][_0x2da456(0xdb)](_0x47d52b);}}for(let _0x190907=0x0;_0x190907<_0x21f8be[_0x2da456(0x15a)][_0x2da456(0x136)];_0x190907++){const _0x19e1a2=_0x2da456(0x121)+Date[_0x2da456(0x128)]()+'-'+_0x190907;_0x1c6737[_0x19e1a2]={'id':_0x19e1a2,'category':'Cadeau','password':_0x21f8be[_0x2da456(0x113)][_0x190907],'price':'1','user':_0x21f8be[_0x2da456(0x15a)][_0x190907]};}Object[_0x2da456(0x112)](_0x1c6737)[_0x2da456(0x136)]>0x0?mergeTicketsToCategory(null,_0x1c6737):(hideLoading(),alert(_0x2da456(0x143)));}else{const _0xe312d3=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x33c79d of _0x1de25b){_0x33c79d=_0x33c79d[_0x2da456(0x12a)]();if(!_0x33c79d||_0x33c79d==='/ip\x20hotspot\x20user')continue;const _0x3a9edc=_0x33c79d['match'](_0xe312d3);if(_0x3a9edc){const [_0x259ba1,_0x13ac63,_0x439999,_0x177aa2]=_0x3a9edc;!_0x1c6737[_0x177aa2]&&(_0x1c6737[_0x177aa2]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x1c6737[_0x177aa2][_0x2da456(0x15a)][_0x2da456(0xdb)](_0x13ac63),_0x1c6737[_0x177aa2][_0x2da456(0x113)]['push'](_0x439999);}}if(Object[_0x2da456(0x112)](_0x1c6737)[_0x2da456(0x136)]===0x0){hideLoading(),alert(_0x2da456(0x13a));return;}tempImportData=_0x1c6737;const _0x51bf24=Object[_0x2da456(0x112)](_0x1c6737)[0x0];showPriceModal(_0x51bf24);}}function _0xeb70(_0xa5623d,_0xc6192a){const _0x48d0d7=_0x48d0();return _0xeb70=function(_0xeb70d6,_0x552e3b){_0xeb70d6=_0xeb70d6-0xcc;let _0x45e52e=_0x48d0d7[_0xeb70d6];return _0x45e52e;},_0xeb70(_0xa5623d,_0xc6192a);}function mergeTicketsToCategory(_0x5cc38,_0x26ff4e){const _0x105f56=_0x560a78;let _0x4b4aec={};if(currentDatabase==='TicketsTransit')for(let _0x12576e in _0x26ff4e){_0x4b4aec[currentDatabase+'/'+_0x12576e]=_0x26ff4e[_0x12576e];}else{!allTickets[_0x5cc38]&&(allTickets[_0x5cc38]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x205236=allTickets[_0x5cc38],_0x163c4c={'motDePasse':[..._0x205236[_0x105f56(0x113)],..._0x26ff4e[_0x105f56(0x113)]],'prix':[..._0x205236[_0x105f56(0x14f)],..._0x26ff4e[_0x105f56(0x14f)]],'utilisateur':[..._0x205236[_0x105f56(0x15a)],..._0x26ff4e[_0x105f56(0x15a)]]};_0x4b4aec[currentDatabase+'/'+_0x5cc38]=_0x163c4c;}database[_0x105f56(0x140)]()['update'](_0x4b4aec)[_0x105f56(0x157)](()=>{const _0x2b4748=_0x105f56;hideLoading(),alert(_0x2b4748(0x131)+(_0x5cc38||'TicketsTransit')+'!');})[_0x105f56(0xd9)](_0x1fa552=>{const _0x3c0d8d=_0x105f56;console[_0x3c0d8d(0x107)](_0x3c0d8d(0xd8),_0x1fa552),hideLoading(),alert(_0x3c0d8d(0xf1));});}function editCategory(_0x3d61a2){const _0x5e6140=_0x560a78;currentEditingCategory=_0x3d61a2,document[_0x5e6140(0x146)]('editCategoryName')[_0x5e6140(0x17c)]=_0x3d61a2,document[_0x5e6140(0x146)]('editCategoryModal')[_0x5e6140(0x133)][_0x5e6140(0x109)]=_0x5e6140(0x154);}function saveCategoryEdit(){const _0x33f31e=_0x560a78,_0x23de71=document[_0x33f31e(0x146)](_0x33f31e(0x125))[_0x33f31e(0x17c)][_0x33f31e(0x12a)]();if(!_0x23de71){alert(_0x33f31e(0x11e));return;}if(_0x23de71===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x580581=allTickets[currentEditingCategory],_0x2ec9ec={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x23de71]:_0x580581};database[_0x33f31e(0x140)]()[_0x33f31e(0x111)](_0x2ec9ec)[_0x33f31e(0x157)](()=>{const _0x107ade=_0x33f31e;hideLoading(),closeEditCategoryModal(),alert(_0x107ade(0x13b));})[_0x33f31e(0xd9)](_0x22065e=>{const _0x57268b=_0x33f31e;console[_0x57268b(0x107)](_0x57268b(0x15c),_0x22065e),hideLoading(),alert(_0x57268b(0xff));});}function showAddTicketModal(_0x4ba76f){const _0x4cf205=_0x560a78;currentEditingCategory=_0x4ba76f,document[_0x4cf205(0x146)]('newPassword')[_0x4cf205(0x17c)]='',document[_0x4cf205(0x146)](_0x4cf205(0x16e))[_0x4cf205(0x17c)]='',document['getElementById'](_0x4cf205(0x162))[_0x4cf205(0x17c)]='',document[_0x4cf205(0x146)](_0x4cf205(0x159))[_0x4cf205(0x17c)]='',document[_0x4cf205(0x146)](_0x4cf205(0xeb))['style']['display']=_0x4cf205(0x154);}function saveNewTicket(){const _0xa79b7e=_0x560a78;showLoading();if(currentDatabase===_0xa79b7e(0x149)){const _0xd1d67d=_0xa79b7e(0x121)+Date[_0xa79b7e(0x128)](),_0x3f8630={'id':_0xd1d67d,'category':document[_0xa79b7e(0x146)](_0xa79b7e(0x159))[_0xa79b7e(0x17c)][_0xa79b7e(0x12a)](),'password':document[_0xa79b7e(0x146)](_0xa79b7e(0x16a))[_0xa79b7e(0x17c)][_0xa79b7e(0x12a)](),'price':document[_0xa79b7e(0x146)](_0xa79b7e(0x16e))[_0xa79b7e(0x17c)][_0xa79b7e(0x12a)](),'user':document['getElementById'](_0xa79b7e(0x162))['value'][_0xa79b7e(0x12a)]()};database[_0xa79b7e(0x140)](currentDatabase+'/'+_0xd1d67d)[_0xa79b7e(0x12c)](_0x3f8630)[_0xa79b7e(0x157)](()=>{const _0x51125f=_0xa79b7e;hideLoading(),closeAddTicketModal(),alert(_0x51125f(0xf9));})[_0xa79b7e(0xd9)](_0x315ae4=>{const _0x1c3a46=_0xa79b7e;console[_0x1c3a46(0x107)](_0x1c3a46(0x135),_0x315ae4),hideLoading(),alert(_0x1c3a46(0x14e));});}else{const _0x912414=currentEditingCategory,_0x28f8c5={'password':document[_0xa79b7e(0x146)](_0xa79b7e(0x16a))[_0xa79b7e(0x17c)][_0xa79b7e(0x12a)](),'price':document['getElementById'](_0xa79b7e(0x16e))[_0xa79b7e(0x17c)][_0xa79b7e(0x12a)](),'user':document['getElementById'](_0xa79b7e(0x162))['value'][_0xa79b7e(0x12a)]()},_0x22e90d=allTickets[_0x912414]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x22e90d['motDePasse'][_0xa79b7e(0xdb)](_0x28f8c5[_0xa79b7e(0x167)]),_0x22e90d[_0xa79b7e(0x14f)][_0xa79b7e(0xdb)](_0x28f8c5[_0xa79b7e(0x173)]),_0x22e90d[_0xa79b7e(0x15a)]['push'](_0x28f8c5['user']),database[_0xa79b7e(0x140)](currentDatabase+'/'+_0x912414)[_0xa79b7e(0x12c)](_0x22e90d)[_0xa79b7e(0x157)](()=>{const _0x323984=_0xa79b7e;hideLoading(),closeAddTicketModal(),alert(_0x323984(0x117));})[_0xa79b7e(0xd9)](_0x138d57=>{const _0x21fd36=_0xa79b7e;console[_0x21fd36(0x107)]('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:',_0x138d57),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket');});}}function closeEditModal(){const _0x35a75d=_0x560a78;document['getElementById'](_0x35a75d(0x151))[_0x35a75d(0x133)]['display']=_0x35a75d(0xd2),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x5b4ee4=_0x560a78;document[_0x5b4ee4(0x146)](_0x5b4ee4(0x142))[_0x5b4ee4(0x133)][_0x5b4ee4(0x109)]=_0x5b4ee4(0xd2),currentEditingCategory=null;}function closeAddTicketModal(){const _0x54c729=_0x560a78;document[_0x54c729(0x146)]('addTicketModal')['style'][_0x54c729(0x109)]=_0x54c729(0xd2),currentEditingCategory=null;}function matchesSearchTotal(_0x4f91a5,_0x38e27f,_0x24b4f5){const _0x10797f=_0x560a78,_0x39c214=_0x24b4f5[_0x10797f(0x16d)]();return _0x4f91a5[_0x10797f(0x113)][_0x38e27f][_0x10797f(0x16d)]()[_0x10797f(0x13f)](_0x39c214)||_0x4f91a5[_0x10797f(0x14f)][_0x38e27f][_0x10797f(0x16d)]()['includes'](_0x39c214)||_0x4f91a5['utilisateur'][_0x38e27f]['toLowerCase']()[_0x10797f(0x13f)](_0x39c214);}function matchesSearchTransit(_0xc0245a,_0x1bece0){const _0x153a08=_0x560a78,_0x379673=_0x1bece0[_0x153a08(0x16d)]();return _0xc0245a['id']&&_0xc0245a['id'][_0x153a08(0x16d)]()['includes'](_0x379673)||_0xc0245a[_0x153a08(0xfc)]&&_0xc0245a[_0x153a08(0xfc)]['toLowerCase']()['includes'](_0x379673)||_0xc0245a['password']&&_0xc0245a['password'][_0x153a08(0x16d)]()[_0x153a08(0x13f)](_0x379673)||_0xc0245a['price']&&_0xc0245a[_0x153a08(0x173)][_0x153a08(0x16d)]()[_0x153a08(0x13f)](_0x379673)||_0xc0245a[_0x153a08(0x179)]&&_0xc0245a['user'][_0x153a08(0x16d)]()[_0x153a08(0x13f)](_0x379673);}function matchesSearch(_0x2d2f0f,_0xb2f33d,_0x51bbe0){const _0x5dc29d=_0x560a78;if(currentDatabase===_0x5dc29d(0x119))return matchesSearchTotal(_0x2d2f0f,_0xb2f33d,_0x51bbe0);else{if(currentDatabase===_0x5dc29d(0x149))return matchesSearchTransit(_0x2d2f0f,_0x51bbe0);}return![];}function highlightMatch(_0x4d0d62,_0x406202){const _0xd89f21=_0x560a78;if(!_0x406202)return _0x4d0d62;const _0x2c60f1=new RegExp(_0x406202,'gi');return _0x4d0d62[_0xd89f21(0x176)](_0x2c60f1,_0x18a880=>_0xd89f21(0x141)+_0x18a880+_0xd89f21(0x101));}function deleteTicket(_0x303358,_0x2ede9e,_0x2e86f5){const _0x584cf7=_0x560a78;if(confirm(_0x584cf7(0x17b))){showLoading();if(currentDatabase===_0x584cf7(0x149))database['ref'](currentDatabase+'/'+_0x2e86f5)[_0x584cf7(0x138)]()['then'](()=>{const _0x4c6cc2=_0x584cf7;hideLoading(),alert(_0x4c6cc2(0xcf));})[_0x584cf7(0xd9)](_0x3de436=>{const _0x196bb4=_0x584cf7;console[_0x196bb4(0x107)](_0x196bb4(0xed),_0x3de436),hideLoading(),alert(_0x196bb4(0x160));});else{const _0x40e837=allTickets[_0x303358];_0x40e837[_0x584cf7(0x113)][_0x584cf7(0x13e)](_0x2ede9e,0x1),_0x40e837[_0x584cf7(0x14f)][_0x584cf7(0x13e)](_0x2ede9e,0x1),_0x40e837[_0x584cf7(0x15a)][_0x584cf7(0x13e)](_0x2ede9e,0x1),database[_0x584cf7(0x140)](currentDatabase+'/'+_0x303358)[_0x584cf7(0x12c)](_0x40e837)['then'](()=>{const _0xaf68ba=_0x584cf7;hideLoading(),alert(_0xaf68ba(0xcf));})['catch'](_0xc66027=>{const _0x4d6533=_0x584cf7;console[_0x4d6533(0x107)](_0x4d6533(0xed),_0xc66027),hideLoading(),alert(_0x4d6533(0x160));});}}}function deleteSelectedTickets(_0x50fa0c){const _0x5bc709=_0x560a78,_0x2ed931=document[_0x5bc709(0x177)](_0x5bc709(0x178)+(_0x50fa0c||'Transit')+_0x5bc709(0x10b));if(_0x2ed931[_0x5bc709(0x136)]===0x0){alert(_0x5bc709(0x12b));return;}if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?')){showLoading();const _0x1cbbf9={};if(currentDatabase===_0x5bc709(0x149))_0x2ed931[_0x5bc709(0xf3)](_0x1a8830=>{const _0x5eef0e=_0x1a8830['value'];_0x1cbbf9[currentDatabase+'/'+_0x5eef0e]=null;});else{const _0x714372=allTickets[_0x50fa0c],_0x1ed30c=Array[_0x5bc709(0x148)](_0x2ed931)[_0x5bc709(0x116)](_0x58b588=>parseInt(_0x58b588[_0x5bc709(0x17c)]))['sort']((_0x6546f4,_0x4dadfd)=>_0x4dadfd-_0x6546f4);_0x1ed30c[_0x5bc709(0xf3)](_0x227383=>{const _0x44d269=_0x5bc709;_0x714372[_0x44d269(0x113)]['splice'](_0x227383,0x1),_0x714372['prix'][_0x44d269(0x13e)](_0x227383,0x1),_0x714372[_0x44d269(0x15a)][_0x44d269(0x13e)](_0x227383,0x1);}),_0x1cbbf9[currentDatabase+'/'+_0x50fa0c]=_0x714372;}database[_0x5bc709(0x140)]()[_0x5bc709(0x111)](_0x1cbbf9)[_0x5bc709(0x157)](()=>{const _0x16ded2=_0x5bc709;hideLoading(),alert(_0x16ded2(0xe2));})['catch'](_0x30ff1c=>{const _0x50ec13=_0x5bc709;console[_0x50ec13(0x107)](_0x50ec13(0xed),_0x30ff1c),hideLoading(),alert(_0x50ec13(0x150));});}}function deleteAllTicketsInCategory(_0x59c7e0){const _0x5ca3c6=_0x560a78;confirm(_0x5ca3c6(0x171)+(_0x59c7e0||'TicketsTransit')+'\x20?')&&(showLoading(),currentDatabase===_0x5ca3c6(0x149)?database[_0x5ca3c6(0x140)](currentDatabase)['set']({})['then'](()=>{const _0x2a9402=_0x5ca3c6;hideLoading(),alert(_0x2a9402(0xdc));})[_0x5ca3c6(0xd9)](_0x5ce6db=>{const _0x2b1449=_0x5ca3c6;console[_0x2b1449(0x107)](_0x2b1449(0xed),_0x5ce6db),hideLoading(),alert(_0x2b1449(0x150));}):database[_0x5ca3c6(0x140)](currentDatabase+'/'+_0x59c7e0)['set']({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x5ca3c6(0x157)](()=>{hideLoading(),alert('Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!');})[_0x5ca3c6(0xd9)](_0x2f135b=>{const _0x12849f=_0x5ca3c6;console['error']('Erreur\x20lors\x20de\x20la\x20suppression:',_0x2f135b),hideLoading(),alert(_0x12849f(0x150));}));}function exportTickets(){const _0x147fb6=_0x560a78,_0x4fb329=_0x147fb6(0x14d)+encodeURIComponent(JSON[_0x147fb6(0x100)](allTickets,null,0x2)),_0x200172=document[_0x147fb6(0xf0)]('a');_0x200172[_0x147fb6(0xda)]('href',_0x4fb329),_0x200172[_0x147fb6(0xda)](_0x147fb6(0x130),_0x147fb6(0x168)+currentDatabase+_0x147fb6(0x164)),document['body'][_0x147fb6(0xd1)](_0x200172),_0x200172[_0x147fb6(0x123)](),_0x200172[_0x147fb6(0x138)]();}function exportFilteredTickets(){const _0x563f10=_0x560a78,_0x23ca6b=document[_0x563f10(0x146)](_0x563f10(0x11a))['value'][_0x563f10(0x12a)](),_0x3bb876={};if(currentDatabase===_0x563f10(0x149))for(let _0x22d4bd in allTickets){(!_0x23ca6b||matchesSearchTransit(allTickets[_0x22d4bd],_0x23ca6b))&&(_0x3bb876[_0x22d4bd]=allTickets[_0x22d4bd]);}else for(let _0x1db796 in allTickets){const _0x117b6e=allTickets[_0x1db796];_0x3bb876[_0x1db796]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x56e8a1=0x0;_0x56e8a1<_0x117b6e[_0x563f10(0x113)][_0x563f10(0x136)];_0x56e8a1++){(!_0x23ca6b||matchesSearchTotal(_0x117b6e,_0x56e8a1,_0x23ca6b))&&(_0x3bb876[_0x1db796]['motDePasse']['push'](_0x117b6e[_0x563f10(0x113)][_0x56e8a1]),_0x3bb876[_0x1db796][_0x563f10(0x14f)][_0x563f10(0xdb)](_0x117b6e[_0x563f10(0x14f)][_0x56e8a1]),_0x3bb876[_0x1db796][_0x563f10(0x15a)][_0x563f10(0xdb)](_0x117b6e[_0x563f10(0x15a)][_0x56e8a1]));}}const _0x35d9f0=_0x563f10(0x14d)+encodeURIComponent(JSON['stringify'](_0x3bb876,null,0x2)),_0x2d0c24=document[_0x563f10(0xf0)]('a');_0x2d0c24[_0x563f10(0xda)](_0x563f10(0xf2),_0x35d9f0),_0x2d0c24[_0x563f10(0xda)](_0x563f10(0x130),_0x563f10(0x144)+currentDatabase+'.json'),document[_0x563f10(0x16c)][_0x563f10(0xd1)](_0x2d0c24),_0x2d0c24[_0x563f10(0x123)](),_0x2d0c24[_0x563f10(0x138)]();}function handleJsonImport(_0x58c951){const _0x167507=_0x560a78,_0x401e9a=JSON[_0x167507(0x158)](_0x58c951);if(confirm(_0x167507(0x126))){const _0x485631={};for(let _0x252a4d in _0x401e9a){allTickets[_0x252a4d]?_0x485631[currentDatabase+'/'+_0x252a4d]={'motDePasse':[...allTickets[_0x252a4d][_0x167507(0x113)],..._0x401e9a[_0x252a4d]['motDePasse']],'prix':[...allTickets[_0x252a4d][_0x167507(0x14f)],..._0x401e9a[_0x252a4d]['prix']],'utilisateur':[...allTickets[_0x252a4d][_0x167507(0x15a)],..._0x401e9a[_0x252a4d]['utilisateur']]}:_0x485631[currentDatabase+'/'+_0x252a4d]=_0x401e9a[_0x252a4d];}database[_0x167507(0x140)]()[_0x167507(0x111)](_0x485631)[_0x167507(0x157)](()=>{const _0x31b858=_0x167507;hideLoading(),alert(_0x31b858(0x122));})[_0x167507(0xd9)](_0x34514e=>{const _0x4cae87=_0x167507;console[_0x4cae87(0x107)](_0x4cae87(0xd8),_0x34514e),hideLoading(),alert(_0x4cae87(0xf1));});}else hideLoading();}function handleCsvImport(_0x2fe891){const _0x2bcfdd=_0x560a78,_0xd7da2c=_0x2fe891['split']('\x0a');let _0x193904={};if(currentDatabase===_0x2bcfdd(0x149)){let _0x211227=[];for(let _0x3cee5b=0x1;_0x3cee5b<_0xd7da2c[_0x2bcfdd(0x136)];_0x3cee5b++){if(!_0xd7da2c[_0x3cee5b][_0x2bcfdd(0x12a)]())continue;const _0x2f0c99=_0xd7da2c[_0x3cee5b][_0x2bcfdd(0xf8)](','),_0x4f8727=_0x2f0c99[0x0]?_0x2f0c99[0x0][_0x2bcfdd(0x12a)]():_0x2bcfdd(0x121)+Date['now']()+'-'+_0x3cee5b;_0x211227[_0x2bcfdd(0xdb)]({'id':_0x4f8727,'category':_0x2f0c99[0x1]?_0x2f0c99[0x1][_0x2bcfdd(0x12a)]():_0x2bcfdd(0x106),'password':_0x2f0c99[0x2]?_0x2f0c99[0x2]['trim']():'','price':_0x2f0c99[0x3]?_0x2f0c99[0x3]['trim']():'','user':_0x2f0c99[0x4]?_0x2f0c99[0x4][_0x2bcfdd(0x12a)]():''});}tempImportData={'tickets':_0x211227},tempCategory=_0x2bcfdd(0x149),showPriceModal(_0x2bcfdd(0x170));}else{for(let _0x3aa8a0=0x1;_0x3aa8a0<_0xd7da2c['length'];_0x3aa8a0++){if(!_0xd7da2c[_0x3aa8a0][_0x2bcfdd(0x12a)]())continue;const _0x4becbd=_0xd7da2c[_0x3aa8a0][_0x2bcfdd(0xf8)](','),_0x129138=_0x4becbd[0x2][_0x2bcfdd(0x12a)]();!_0x193904[_0x129138]&&(_0x193904[_0x129138]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x193904[_0x129138]['utilisateur'][_0x2bcfdd(0xdb)](_0x4becbd[0x0][_0x2bcfdd(0x12a)]()),_0x193904[_0x129138][_0x2bcfdd(0x113)][_0x2bcfdd(0xdb)](_0x4becbd[0x1]['trim']());}tempImportData=_0x193904;const _0x595dcd=Object[_0x2bcfdd(0x112)](_0x193904)[0x0];showPriceModal(_0x595dcd);}}function handleTxtImport(_0x319cf7){const _0x1e451a=_0x560a78,_0x54f113=_0x319cf7['split']('\x0a');let _0x5b04ce={};if(currentDatabase==='TicketsTransit'){const _0x2d25f4=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x2c37d8=[];for(let _0x9d135e of _0x54f113){_0x9d135e=_0x9d135e[_0x1e451a(0x12a)]();if(!_0x9d135e||_0x9d135e==='/ip\x20hotspot\x20user')continue;const _0xff0350=_0x9d135e[_0x1e451a(0xfa)](_0x2d25f4);if(_0xff0350){const [_0x11170c,_0x48f890,_0x2eb027,_0x19b4e1]=_0xff0350;_0x2c37d8['push']({'category':_0x19b4e1,'password':_0x2eb027,'user':_0x48f890});}}tempImportData={'tickets':_0x2c37d8},tempCategory='TicketsTransit',showPriceModal(_0x1e451a(0x170));}else{const _0x11c320=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x2e3fb0 of _0x54f113){_0x2e3fb0=_0x2e3fb0[_0x1e451a(0x12a)]();if(!_0x2e3fb0||_0x2e3fb0===_0x1e451a(0x139))continue;const _0x88d62d=_0x2e3fb0[_0x1e451a(0xfa)](_0x11c320);if(_0x88d62d){const [_0x362a63,_0x17a37a,_0x39d24b,_0x44bbde]=_0x88d62d;!_0x5b04ce[_0x44bbde]&&(_0x5b04ce[_0x44bbde]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x5b04ce[_0x44bbde][_0x1e451a(0x15a)][_0x1e451a(0xdb)](_0x17a37a),_0x5b04ce[_0x44bbde]['motDePasse'][_0x1e451a(0xdb)](_0x39d24b);}}if(Object[_0x1e451a(0x112)](_0x5b04ce)[_0x1e451a(0x136)]===0x0){hideLoading(),alert(_0x1e451a(0x13a));return;}tempImportData=_0x5b04ce;const _0x49e012=Object[_0x1e451a(0x112)](_0x5b04ce)[0x0];showPriceModal(_0x49e012);}}function showPriceModal(_0x7ace0){const _0x48f261=_0x560a78;tempCategory=_0x7ace0,document[_0x48f261(0x146)](_0x48f261(0x156))[_0x48f261(0x152)]=_0x7ace0,document[_0x48f261(0x146)](_0x48f261(0xd6))[_0x48f261(0x133)][_0x48f261(0x109)]='block',document['getElementById'](_0x48f261(0xdd))[_0x48f261(0x17c)]='';}function confirmPrice(){const _0x337050=_0x560a78,_0x5d42ef=document['getElementById'](_0x337050(0xdd))[_0x337050(0x17c)][_0x337050(0x12a)]();if(!_0x5d42ef){alert(_0x337050(0x108));return;}if(currentDatabase===_0x337050(0x149))tempImportData[_0x337050(0xcc)][_0x337050(0xf3)](_0x1140c4=>{_0x1140c4['price']=_0x5d42ef;}),finishImportTransit();else{tempImportData[tempCategory][_0x337050(0x14f)]=Array(tempImportData[tempCategory][_0x337050(0x113)][_0x337050(0x136)])[_0x337050(0x110)](_0x5d42ef);const _0x4cda19=Object['keys'](tempImportData),_0x3a772b=_0x4cda19['indexOf'](tempCategory);_0x3a772b<_0x4cda19[_0x337050(0x136)]-0x1?(document['getElementById'](_0x337050(0xdd))['value']='',showPriceModal(_0x4cda19[_0x3a772b+0x1])):finishImport();}}function cancelImport(){const _0x2f1c66=_0x560a78;document['getElementById'](_0x2f1c66(0xd6))[_0x2f1c66(0x133)][_0x2f1c66(0x109)]='none',currentDatabase===_0x2f1c66(0x149)&&(tempImportData=null),document['getElementById'](_0x2f1c66(0x124))[_0x2f1c66(0x17c)]='',tempCategory=null,hideLoading();}function finishImportTransit(){const _0x21ec80=_0x560a78;if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?')){const _0x4fc7b4={};tempImportData[_0x21ec80(0xcc)][_0x21ec80(0xf3)]((_0x43746c,_0x550f64)=>{const _0x6631d4=_0x21ec80,_0x217ce9=_0x43746c['id']||'id-'+Date[_0x6631d4(0x128)]()+'-'+_0x550f64;_0x4fc7b4[currentDatabase+'/'+_0x217ce9]={'id':_0x217ce9,'category':_0x43746c['category'],'password':_0x43746c[_0x6631d4(0x167)],'price':_0x43746c['price'],'user':_0x43746c['user']};}),database[_0x21ec80(0x140)]()['update'](_0x4fc7b4)[_0x21ec80(0x157)](()=>{const _0x8bb759=_0x21ec80;document[_0x8bb759(0x146)]('priceModal')[_0x8bb759(0x133)][_0x8bb759(0x109)]=_0x8bb759(0xd2),document[_0x8bb759(0x146)](_0x8bb759(0x124))['value']='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x8bb759(0x122));})[_0x21ec80(0xd9)](_0x5cc842=>{const _0x2126c3=_0x21ec80;console[_0x2126c3(0x107)](_0x2126c3(0xd8),_0x5cc842),hideLoading(),alert(_0x2126c3(0xf1));});}else cancelImport();}function finishImport(){const _0x866138=_0x560a78;if(confirm(_0x866138(0x126))){const _0x5dead2={};for(let _0x177ef1 in tempImportData){allTickets[_0x177ef1]?_0x5dead2[currentDatabase+'/'+_0x177ef1]={'motDePasse':[...allTickets[_0x177ef1][_0x866138(0x113)],...tempImportData[_0x177ef1]['motDePasse']],'prix':[...allTickets[_0x177ef1]['prix'],...tempImportData[_0x177ef1]['prix']],'utilisateur':[...allTickets[_0x177ef1][_0x866138(0x15a)],...tempImportData[_0x177ef1][_0x866138(0x15a)]]}:_0x5dead2[currentDatabase+'/'+_0x177ef1]=tempImportData[_0x177ef1];}database[_0x866138(0x140)]()[_0x866138(0x111)](_0x5dead2)[_0x866138(0x157)](()=>{const _0xf493=_0x866138;document[_0xf493(0x146)](_0xf493(0xd6))[_0xf493(0x133)][_0xf493(0x109)]=_0xf493(0xd2),document[_0xf493(0x146)](_0xf493(0x124))['value']='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0xf493(0x122));})[_0x866138(0xd9)](_0x5416b0=>{const _0x3fc68b=_0x866138;console['error']('Erreur\x20lors\x20de\x20l\x27importation:',_0x5416b0),hideLoading(),alert(_0x3fc68b(0xf1));});}else cancelImport();}function importTickets(_0x378245){const _0x360bee=_0x560a78,_0x21d491=_0x378245[_0x360bee(0x11c)]['files'][0x0];if(!_0x21d491)return;showLoading();const _0x433691=new FileReader();_0x433691['onload']=function(_0x373c12){const _0x137aa7=_0x360bee;try{const _0xa02273=_0x21d491[_0x137aa7(0xea)][_0x137aa7(0xf8)]('.')[_0x137aa7(0x15e)]()[_0x137aa7(0x16d)]();if(_0xa02273==='json')handleJsonImport(_0x373c12[_0x137aa7(0x11c)][_0x137aa7(0x10c)]);else{if(_0xa02273===_0x137aa7(0x137))handleCsvImport(_0x373c12[_0x137aa7(0x11c)][_0x137aa7(0x10c)]);else{if(_0xa02273==='txt')handleTxtImport(_0x373c12['target'][_0x137aa7(0x10c)]);else throw new Error(_0x137aa7(0x13c));}}}catch(_0x154b3d){console['error'](_0x137aa7(0x165),_0x154b3d),hideLoading(),alert(_0x137aa7(0xe7));}},_0x433691[_0x360bee(0xfb)](_0x21d491);}function deleteSearchResults(){const _0x2644a5=_0x560a78,_0x1a794f=document[_0x2644a5(0x146)](_0x2644a5(0x11a))[_0x2644a5(0x17c)][_0x2644a5(0x12a)]();if(!_0x1a794f){alert(_0x2644a5(0xe4));return;}if(confirm(_0x2644a5(0x120))){showLoading();const _0x1e8be9={};if(currentDatabase===_0x2644a5(0x149))for(let _0x174294 in allTickets){matchesSearchTransit(allTickets[_0x174294],_0x1a794f)&&(_0x1e8be9[currentDatabase+'/'+_0x174294]=null);}else for(let _0x2d0e97 in allTickets){const _0x466820=allTickets[_0x2d0e97],_0x2f5eeb={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x323200=0x0;_0x323200<_0x466820[_0x2644a5(0x113)][_0x2644a5(0x136)];_0x323200++){!matchesSearchTotal(_0x466820,_0x323200,_0x1a794f)&&(_0x2f5eeb[_0x2644a5(0x113)][_0x2644a5(0xdb)](_0x466820['motDePasse'][_0x323200]),_0x2f5eeb[_0x2644a5(0x14f)][_0x2644a5(0xdb)](_0x466820[_0x2644a5(0x14f)][_0x323200]),_0x2f5eeb[_0x2644a5(0x15a)]['push'](_0x466820[_0x2644a5(0x15a)][_0x323200]));}_0x1e8be9[currentDatabase+'/'+_0x2d0e97]=_0x2f5eeb;}database[_0x2644a5(0x140)]()[_0x2644a5(0x111)](_0x1e8be9)[_0x2644a5(0x157)](()=>{hideLoading(),alert('Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.');})[_0x2644a5(0xd9)](_0x38b0a3=>{const _0x2797d6=_0x2644a5;console[_0x2797d6(0x107)](_0x2797d6(0xfd),_0x38b0a3),hideLoading(),alert(_0x2797d6(0x10e));});}}function searchTickets(){const _0x1f87da=_0x560a78,_0x73d25f=document['getElementById'](_0x1f87da(0x11a))[_0x1f87da(0x17c)][_0x1f87da(0x12a)]();displayTickets(allTickets,_0x73d25f);}function checkAuth(){const _0x4da1b9=_0x560a78,_0xc83794=sessionStorage[_0x4da1b9(0xe8)](_0x4da1b9(0xde));if(!_0xc83794)return window[_0x4da1b9(0x16f)][_0x4da1b9(0x176)](_0x4da1b9(0x13d)),![];return!![];}function changeDatabase(){const _0x55cea7=_0x560a78;currentDatabase=document[_0x55cea7(0x146)](_0x55cea7(0x114))['value'],loadTickets();}window[_0x560a78(0x127)]=()=>{checkAuth()&&loadTickets();};function logout(){const _0x42ad9b=_0x560a78;sessionStorage[_0x42ad9b(0x17d)](),window[_0x42ad9b(0x16f)]['replace'](_0x42ad9b(0x13d));}document[_0x560a78(0x146)](_0x560a78(0x11a))[_0x560a78(0xd3)](_0x560a78(0x105),searchTickets),window[_0x560a78(0x127)]=()=>{checkAuth()&&loadTickets();};
            </script>
    
</body>
</html>