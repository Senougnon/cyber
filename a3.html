<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #00637c;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: rgb(0, 48, 16);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: rgb(244, 255, 143);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".txt,.json" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour la modification groupée -->
    <div id="bulkEditModal" class="modal">
        <div class="modal-content">
            <h2>Modifier les tickets sélectionnés</h2>
            <input type="text" id="bulkEditCategory" placeholder="Catégorie (laisser vide si inchangé)">
            <input type="text" id="bulkEditPassword" placeholder="Mot de passe (laisser vide si inchangé)">
            <input type="text" id="bulkEditPrice" placeholder="Prix (laisser vide si inchangé)">
            <input type="text" id="bulkEditUser" placeholder="Utilisateur (laisser vide si inchangé)">
            <div class="modal-buttons">
                <button onclick="saveBulkEdit()">Enregistrer</button>
                <button onclick="closeBulkEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x5b7482=_0x50c4;(function(_0x5f215e,_0x1a0d3a){const _0x2c2dbc=_0x50c4,_0x139b17=_0x5f215e();while(!![]){try{const _0x2c7094=parseInt(_0x2c2dbc(0x1fc))/0x1+-parseInt(_0x2c2dbc(0x20c))/0x2+parseInt(_0x2c2dbc(0x25c))/0x3*(-parseInt(_0x2c2dbc(0x261))/0x4)+parseInt(_0x2c2dbc(0x274))/0x5*(parseInt(_0x2c2dbc(0x291))/0x6)+-parseInt(_0x2c2dbc(0x225))/0x7*(-parseInt(_0x2c2dbc(0x20f))/0x8)+-parseInt(_0x2c2dbc(0x277))/0x9*(parseInt(_0x2c2dbc(0x204))/0xa)+-parseInt(_0x2c2dbc(0x267))/0xb*(-parseInt(_0x2c2dbc(0x28b))/0xc);if(_0x2c7094===_0x1a0d3a)break;else _0x139b17['push'](_0x139b17['shift']());}catch(_0x3a7421){_0x139b17['push'](_0x139b17['shift']());}}}(_0x15af,0xe325a));const firebaseConfig={'apiKey':'AIzaSyB6AUBnK_7Vy2ABWI2JMo3ebG_Sljr8XlY','authDomain':_0x5b7482(0x223),'databaseURL':_0x5b7482(0x1ed),'projectId':_0x5b7482(0x26e),'storageBucket':_0x5b7482(0x249),'messagingSenderId':'719410601264','appId':_0x5b7482(0x243),'measurementId':_0x5b7482(0x1f8)};firebase[_0x5b7482(0x276)](firebaseConfig);const database=firebase[_0x5b7482(0x246)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x5b7482(0x2a1),editingCategory='',editingIndex=-0x1,editingId='';(function(){const _0x25cb26=_0x5b7482,_0x559960=sessionStorage[_0x25cb26(0x29d)](_0x25cb26(0x226));!_0x559960&&window[_0x25cb26(0x24e)]['replace'](_0x25cb26(0x1f6));}()),document[_0x5b7482(0x271)](_0x5b7482(0x245),function(){const _0x43d74b=_0x5b7482;!sessionStorage[_0x43d74b(0x29d)](_0x43d74b(0x226))&&window[_0x43d74b(0x24e)][_0x43d74b(0x27b)]('login.html');}),window[_0x5b7482(0x271)](_0x5b7482(0x25f),function(_0x3031f6){const _0x6690be=_0x5b7482;(_0x3031f6[_0x6690be(0x207)]||!sessionStorage[_0x6690be(0x29d)]('isLoggedIn'))&&window[_0x6690be(0x24e)][_0x6690be(0x27b)](_0x6690be(0x1f6));});function showLoading(){const _0x50128e=_0x5b7482;document[_0x50128e(0x275)](_0x50128e(0x278))['style'][_0x50128e(0x25e)]=_0x50128e(0x26b);}function _0x50c4(_0x13ea5c,_0x244221){const _0x15af9d=_0x15af();return _0x50c4=function(_0x50c4c2,_0xcf9a35){_0x50c4c2=_0x50c4c2-0x1e9;let _0x3b8086=_0x15af9d[_0x50c4c2];return _0x3b8086;},_0x50c4(_0x13ea5c,_0x244221);}function hideLoading(){const _0x3ff1d2=_0x5b7482;document[_0x3ff1d2(0x275)](_0x3ff1d2(0x278))[_0x3ff1d2(0x254)][_0x3ff1d2(0x25e)]=_0x3ff1d2(0x235);}function loadTickets(){const _0x48a652=_0x5b7482;showLoading();const _0x32450d=database[_0x48a652(0x1f7)](currentDatabase);_0x32450d[_0x48a652(0x286)](_0x48a652(0x230)),_0x32450d['on'](_0x48a652(0x230),_0x5f1114=>{const _0x4898ca=_0x48a652;allTickets=_0x5f1114[_0x4898ca(0x218)]()||{},displayTickets(allTickets),hideLoading();},_0x2a4cb2=>{const _0x42ae05=_0x48a652;console[_0x42ae05(0x2a0)](_0x42ae05(0x25b),_0x2a4cb2),hideLoading(),alert(_0x42ae05(0x1ee));});}function displayTickets(_0x4926ef,_0xc941cc=''){const _0x20c314=_0x5b7482,_0x131cde=document[_0x20c314(0x275)]('ticketCategories');_0x131cde[_0x20c314(0x23b)]='';if(currentDatabase==='TicketsTotal')displayTicketsTotal(_0x4926ef,_0xc941cc);else currentDatabase==='TicketsTransit'&&displayTicketsTransit(_0x4926ef,_0xc941cc);}function displayTicketsTotal(_0x5652ed,_0xf091ad=''){const _0x3b7d22=_0x5b7482,_0x597b52=document[_0x3b7d22(0x275)](_0x3b7d22(0x298));for(let _0x17f0f8 in _0x5652ed){const _0x14995d=_0x5652ed[_0x17f0f8],_0x315d91=_0x3b7d22(0x2a5)+_0x17f0f8+_0x3b7d22(0x212)+_0x17f0f8+'\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27'+_0x17f0f8+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_'+_0x17f0f8+_0x3b7d22(0x22f)+_0x17f0f8+_0x3b7d22(0x1fd)+_0x17f0f8+_0x3b7d22(0x20d)+_0x17f0f8+_0x3b7d22(0x281)+_0x17f0f8+_0x3b7d22(0x252)+_0x17f0f8+_0x3b7d22(0x28f)+_0x17f0f8+_0x3b7d22(0x24f)+generateTicketRowsTotal(_0x17f0f8,_0x14995d,_0xf091ad)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27'+_0x17f0f8+'\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20'+_0x17f0f8+_0x3b7d22(0x231);_0x597b52['innerHTML']+=_0x315d91;}}function _0x15af(){const _0x2ca767=['data:text/json;charset=utf-8,','\x27,\x20','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22editSelectedTickets(\x27','pop','style','Veuillez\x20entrer\x20un\x20prix','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','editUser','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:','90669wDskNx','Ticket\x20supprimé\x20avec\x20succès!','display','pageshow','<span\x20class=\x22highlight\x22>','36PRqOvB','files','N/A','utilisateur','filtered_tickets_export_','split','11VjQpQW','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','motDePasse','bulkEditCategory','flex','Erreur\x20lors\x20de\x20la\x20suppression:','input','cyber-campus-2706f','from','editCategoryModal','addEventListener','user','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','1105340wYFoed','getElementById','initializeApp','135eUPWNN','loadingIndicator','/ip\x20hotspot\x20user','includes','replace','bulkEditModal','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','sort','editId','\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20','href','Importation\x20réussie\x20!','set','length','off','splice','newPrice','priceInput','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27','42620748kZhtxg','Erreur\x20lors\x20de\x20la\x20modification\x20groupée:','download','clear','\x27)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_','indexOf','30IyjwtJ','target','Importation\x20réussie\x20dans\x20','TicketsTransit','setAttribute','selectedTicketsData','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','ticketCategories','tickets','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20','update','editTicketModal','getItem','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','error','TicketsTotal','\x22]:checked','result','now','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','</span>','searchBar','importFile','newUser','fill','then','onload','.json','https://cyber-campus-2706f-default-rtdb.firebaseio.com','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','match','id-','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20modifier','prix','price','Tous\x20les\x20champs\x20sont\x20obligatoires','login.html','ref','G-CEEFJP5LYZ','Erreur\x20lors\x20de\x20la\x20modification\x20groupée\x20des\x20tickets','bulkEditUser','Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!','39981gQJetJ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','Erreur\x20d\x27importation:','toLowerCase','.txt,.json','block','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','stringify','1173050oyUBCm','trim','click','persisted','priceModal','push','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','3666734GUdbLY','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTickets(event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','body','8zdKQpg','password','editCategoryName','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','index','categoryName','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','Erreur\x20lors\x20de\x20l\x27importation:','val','remove','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','accept','editPrice','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','addTicketModal','bulkEditPrice','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','Format\x20de\x20fichier\x20non\x20supporté','cyber-campus-2706f.firebaseapp.com','editPassword','688051NHQdNV','isLoggedIn','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','map','newPassword','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','Erreur\x20lors\x20de\x20la\x20modification:','querySelectorAll','Catégorie\x20modifiée\x20avec\x20succès!','random','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','value','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','forEach','category','none','readAsText','Ticket\x20modifié\x20avec\x20succès!','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','data','databaseSelect','innerHTML','textContent','catch','keys','input[name^=\x22ticketSelect_','tickets_export_','TicketsTransit\x20Import','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','1:719410601264:web:44fd2e3757721866303cf5','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20accept=\x22.txt,.json\x22\x20\x0a\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20onchange=\x22importTickets(event)\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22editSelectedTickets(null)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','DOMContentLoaded','database','newCategory','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','cyber-campus-2706f.appspot.com','editCategory','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','floor','parse','location','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'];_0x15af=function(){return _0x2ca767;};return _0x15af();}function generateTicketRowsTotal(_0x44df67,_0x5e45ad,_0x39c2cc){const _0x34b0cd=_0x5b7482;let _0x188092='';for(let _0x420f54=0x0;_0x420f54<_0x5e45ad[_0x34b0cd(0x269)][_0x34b0cd(0x285)];_0x420f54++){if(_0x39c2cc&&!matchesSearchTotal(_0x5e45ad,_0x420f54,_0x39c2cc))continue;_0x188092+=_0x34b0cd(0x221)+_0x44df67+'\x22\x20value=\x22'+_0x420f54+_0x34b0cd(0x227)+highlightMatch(_0x5e45ad[_0x34b0cd(0x269)][_0x420f54],_0x39c2cc)+_0x34b0cd(0x202)+highlightMatch(_0x5e45ad[_0x34b0cd(0x1f3)][_0x420f54],_0x39c2cc)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x5e45ad[_0x34b0cd(0x264)][_0x420f54],_0x39c2cc)+_0x34b0cd(0x29e)+_0x44df67+_0x34b0cd(0x251)+_0x420f54+_0x34b0cd(0x232)+_0x44df67+_0x34b0cd(0x251)+_0x420f54+_0x34b0cd(0x21b);}return _0x188092;}function displayTicketsTransit(_0x4b490e,_0x59e9a0=''){const _0x1ba82e=_0x5b7482,_0x38695d=document['getElementById'](_0x1ba82e(0x298));_0x38695d[_0x1ba82e(0x23b)]='';const _0x27e47c=_0x1ba82e(0x244)+generateTicketRowsTransit(_0x4b490e,_0x59e9a0)+_0x1ba82e(0x213);_0x38695d[_0x1ba82e(0x23b)]=_0x27e47c;}function generateTicketRowsTransit(_0x43623d,_0x4ca4e6){const _0x38e42e=_0x5b7482;let _0x384f96='';for(let _0x13d6bb in _0x43623d){const _0x219f83=_0x43623d[_0x13d6bb];if(_0x4ca4e6&&!matchesSearchTransit(_0x219f83,_0x4ca4e6))continue;_0x384f96+=_0x38e42e(0x20b)+_0x13d6bb+_0x38e42e(0x227)+highlightMatch(_0x13d6bb,_0x4ca4e6)+_0x38e42e(0x202)+highlightMatch(_0x219f83[_0x38e42e(0x234)],_0x4ca4e6)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x219f83['password'],_0x4ca4e6)+_0x38e42e(0x202)+highlightMatch(_0x219f83[_0x38e42e(0x1f4)],_0x4ca4e6)+_0x38e42e(0x202)+highlightMatch(_0x219f83[_0x38e42e(0x272)],_0x4ca4e6)+_0x38e42e(0x28a)+_0x13d6bb+_0x38e42e(0x21a)+_0x13d6bb+_0x38e42e(0x259);}return _0x384f96;}function editTicketTransit(_0x31eefa){const _0x34dd84=_0x5b7482,_0x4d6b80=allTickets[_0x31eefa];_0x4d6b80?(editingId=_0x31eefa,document[_0x34dd84(0x275)](_0x34dd84(0x280))[_0x34dd84(0x230)]=_0x31eefa,document[_0x34dd84(0x275)](_0x34dd84(0x24a))['value']=_0x4d6b80['category'],document[_0x34dd84(0x275)](_0x34dd84(0x224))[_0x34dd84(0x230)]=_0x4d6b80['password'],document[_0x34dd84(0x275)](_0x34dd84(0x21d))[_0x34dd84(0x230)]=_0x4d6b80[_0x34dd84(0x1f4)],document[_0x34dd84(0x275)]('editUser')['value']=_0x4d6b80[_0x34dd84(0x272)],document[_0x34dd84(0x275)](_0x34dd84(0x29c))[_0x34dd84(0x254)][_0x34dd84(0x25e)]=_0x34dd84(0x201)):alert('Ticket\x20introuvable.');}function saveTicketEdit(){const _0x5631d8=_0x5b7482,_0x3d25a2=document[_0x5631d8(0x275)](_0x5631d8(0x224))['value'],_0x32d9db=document[_0x5631d8(0x275)](_0x5631d8(0x21d))[_0x5631d8(0x230)],_0xaabf84=document[_0x5631d8(0x275)](_0x5631d8(0x258))['value'],_0x178abb=document[_0x5631d8(0x275)](_0x5631d8(0x24a))[_0x5631d8(0x230)];if(!_0x3d25a2||!_0x32d9db||!_0xaabf84||!_0x178abb){alert(_0x5631d8(0x1f5));return;}showLoading();if(currentDatabase===_0x5631d8(0x2a1)){const _0x39e8b1=allTickets[editingCategory];_0x39e8b1[_0x5631d8(0x269)][editingIndex]=_0x3d25a2,_0x39e8b1[_0x5631d8(0x1f3)][editingIndex]=_0x32d9db,_0x39e8b1['utilisateur'][editingIndex]=_0xaabf84;const _0x574fb1={[currentDatabase+'/'+editingCategory]:_0x39e8b1};database[_0x5631d8(0x1f7)]()['update'](_0x574fb1)[_0x5631d8(0x1ea)](()=>{const _0x5028a7=_0x5631d8;hideLoading(),closeEditModal(),alert(_0x5028a7(0x237));})[_0x5631d8(0x23d)](_0x3734b0=>{const _0x408d7e=_0x5631d8;console[_0x408d7e(0x2a0)](_0x408d7e(0x22b),_0x3734b0),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket');});}else{if(currentDatabase===_0x5631d8(0x294)){const _0x1197c2=database[_0x5631d8(0x1f7)](currentDatabase+'/'+editingId);_0x1197c2[_0x5631d8(0x29b)]({'category':_0x178abb,'password':_0x3d25a2,'price':_0x32d9db,'user':_0xaabf84})[_0x5631d8(0x1ea)](()=>{const _0x4286eb=_0x5631d8;hideLoading(),closeEditModal(),alert(_0x4286eb(0x237));})[_0x5631d8(0x23d)](_0x45556a=>{const _0x21b471=_0x5631d8;console[_0x21b471(0x2a0)](_0x21b471(0x22b),_0x45556a),hideLoading(),alert(_0x21b471(0x238));});}}}function editTicketTotal(_0x77da9b,_0x4878de){const _0x10fa34=_0x5b7482;editingCategory=_0x77da9b,editingIndex=_0x4878de;const _0x4f11c1=allTickets[_0x77da9b];document['getElementById']('editId')['value']='',document[_0x10fa34(0x275)](_0x10fa34(0x24a))['value']=_0x77da9b,document['getElementById'](_0x10fa34(0x224))[_0x10fa34(0x230)]=_0x4f11c1['motDePasse'][_0x4878de],document[_0x10fa34(0x275)](_0x10fa34(0x21d))[_0x10fa34(0x230)]=_0x4f11c1[_0x10fa34(0x1f3)][_0x4878de],document[_0x10fa34(0x275)](_0x10fa34(0x258))[_0x10fa34(0x230)]=_0x4f11c1[_0x10fa34(0x264)][_0x4878de],document[_0x10fa34(0x275)](_0x10fa34(0x29c))[_0x10fa34(0x254)][_0x10fa34(0x25e)]=_0x10fa34(0x201);}function mergeTicketsToCategory(_0x533929,_0x15ccd4){const _0x37d7f9=_0x5b7482;let _0x3e308a={};if(currentDatabase==='TicketsTransit')for(let _0x43b356 in _0x15ccd4){_0x3e308a[currentDatabase+'/'+_0x43b356]=_0x15ccd4[_0x43b356];}else{!allTickets[_0x533929]&&(allTickets[_0x533929]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0xd3d165=allTickets[_0x533929],_0x46c204={'motDePasse':[..._0xd3d165[_0x37d7f9(0x269)],..._0x15ccd4[_0x37d7f9(0x269)]],'prix':[..._0xd3d165['prix'],..._0x15ccd4[_0x37d7f9(0x1f3)]],'utilisateur':[..._0xd3d165[_0x37d7f9(0x264)],..._0x15ccd4['utilisateur']]};_0x3e308a[currentDatabase+'/'+_0x533929]=_0x46c204;}database[_0x37d7f9(0x1f7)]()[_0x37d7f9(0x29b)](_0x3e308a)['then'](()=>{const _0x40c6f2=_0x37d7f9;hideLoading(),alert(_0x40c6f2(0x293)+(_0x533929||_0x40c6f2(0x294))+'!');})[_0x37d7f9(0x23d)](_0x5b71be=>{const _0x1d0e2a=_0x37d7f9;console[_0x1d0e2a(0x2a0)](_0x1d0e2a(0x217),_0x5b71be),hideLoading(),alert(_0x1d0e2a(0x29f));});}function editCategory(_0x4bbaee){const _0x29287c=_0x5b7482;currentEditingCategory=_0x4bbaee,document['getElementById'](_0x29287c(0x211))['value']=_0x4bbaee,document[_0x29287c(0x275)](_0x29287c(0x270))[_0x29287c(0x254)]['display']=_0x29287c(0x201);}function saveCategoryEdit(){const _0x4356e7=_0x5b7482,_0x160430=document[_0x4356e7(0x275)](_0x4356e7(0x211))[_0x4356e7(0x230)]['trim']();if(!_0x160430){alert(_0x4356e7(0x257));return;}if(_0x160430===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x4f51e1=allTickets[currentEditingCategory],_0x2f95c4={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x160430]:_0x4f51e1};database[_0x4356e7(0x1f7)]()[_0x4356e7(0x29b)](_0x2f95c4)[_0x4356e7(0x1ea)](()=>{const _0x5e6020=_0x4356e7;hideLoading(),closeEditCategoryModal(),alert(_0x5e6020(0x22d));})['catch'](_0x47f597=>{const _0x4f7327=_0x4356e7;console[_0x4f7327(0x2a0)](_0x4f7327(0x216),_0x47f597),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie');});}function showAddTicketModal(_0x2181cf){const _0x5117e6=_0x5b7482;currentEditingCategory=_0x2181cf,document['getElementById'](_0x5117e6(0x229))[_0x5117e6(0x230)]='',document[_0x5117e6(0x275)](_0x5117e6(0x288))['value']='',document[_0x5117e6(0x275)](_0x5117e6(0x2a9))[_0x5117e6(0x230)]='',document[_0x5117e6(0x275)](_0x5117e6(0x247))[_0x5117e6(0x230)]='',document[_0x5117e6(0x275)](_0x5117e6(0x21f))[_0x5117e6(0x254)][_0x5117e6(0x25e)]=_0x5117e6(0x201);}function saveNewTicket(){const _0x4bce0a=_0x5b7482;showLoading();if(currentDatabase==='TicketsTransit'){const _0x17337c=_0x4bce0a(0x1f0)+Date[_0x4bce0a(0x2a4)](),_0xe34ab2={'id':_0x17337c,'category':document[_0x4bce0a(0x275)](_0x4bce0a(0x247))[_0x4bce0a(0x230)][_0x4bce0a(0x205)](),'password':document[_0x4bce0a(0x275)]('newPassword')[_0x4bce0a(0x230)][_0x4bce0a(0x205)](),'price':document['getElementById'](_0x4bce0a(0x288))[_0x4bce0a(0x230)][_0x4bce0a(0x205)](),'user':document[_0x4bce0a(0x275)](_0x4bce0a(0x2a9))[_0x4bce0a(0x230)]['trim']()};database[_0x4bce0a(0x1f7)](currentDatabase+'/'+_0x17337c)[_0x4bce0a(0x284)](_0xe34ab2)[_0x4bce0a(0x1ea)](()=>{const _0x161ad3=_0x4bce0a;hideLoading(),closeAddTicketModal(),alert(_0x161ad3(0x25a));})[_0x4bce0a(0x23d)](_0x18482c=>{const _0xc98381=_0x4bce0a;console['error'](_0xc98381(0x22a),_0x18482c),hideLoading(),alert(_0xc98381(0x20a));});}else{const _0x4ff7de=currentEditingCategory,_0x6defdf={'password':document[_0x4bce0a(0x275)](_0x4bce0a(0x229))[_0x4bce0a(0x230)][_0x4bce0a(0x205)](),'price':document[_0x4bce0a(0x275)](_0x4bce0a(0x288))[_0x4bce0a(0x230)][_0x4bce0a(0x205)](),'user':document[_0x4bce0a(0x275)](_0x4bce0a(0x2a9))[_0x4bce0a(0x230)][_0x4bce0a(0x205)]()},_0x462cec=allTickets[_0x4ff7de]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x462cec['motDePasse'][_0x4bce0a(0x209)](_0x6defdf[_0x4bce0a(0x210)]),_0x462cec[_0x4bce0a(0x1f3)]['push'](_0x6defdf[_0x4bce0a(0x1f4)]),_0x462cec[_0x4bce0a(0x264)][_0x4bce0a(0x209)](_0x6defdf[_0x4bce0a(0x272)]),database[_0x4bce0a(0x1f7)](currentDatabase+'/'+_0x4ff7de)[_0x4bce0a(0x284)](_0x462cec)['then'](()=>{const _0x20e42a=_0x4bce0a;hideLoading(),closeAddTicketModal(),alert(_0x20e42a(0x248));})['catch'](_0x52246e=>{const _0x3c9ee9=_0x4bce0a;console['error'](_0x3c9ee9(0x22a),_0x52246e),hideLoading(),alert(_0x3c9ee9(0x20a));});}}function closeEditModal(){const _0x317f05=_0x5b7482;document['getElementById'](_0x317f05(0x29c))[_0x317f05(0x254)][_0x317f05(0x25e)]=_0x317f05(0x235),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x19e430=_0x5b7482;document[_0x19e430(0x275)]('editCategoryModal')[_0x19e430(0x254)][_0x19e430(0x25e)]='none',currentEditingCategory=null;}function closeAddTicketModal(){const _0x497d35=_0x5b7482;document['getElementById'](_0x497d35(0x21f))[_0x497d35(0x254)]['display']='none',currentEditingCategory=null;}function matchesSearchTotal(_0x21d8f0,_0x15d506,_0x3d3ab4){const _0x5f3d10=_0x5b7482,_0x240278=_0x3d3ab4[_0x5f3d10(0x1ff)]();return _0x21d8f0[_0x5f3d10(0x269)][_0x15d506][_0x5f3d10(0x1ff)]()[_0x5f3d10(0x27a)](_0x240278)||_0x21d8f0[_0x5f3d10(0x1f3)][_0x15d506][_0x5f3d10(0x1ff)]()[_0x5f3d10(0x27a)](_0x240278)||_0x21d8f0[_0x5f3d10(0x264)][_0x15d506][_0x5f3d10(0x1ff)]()[_0x5f3d10(0x27a)](_0x240278);}function matchesSearchTransit(_0x3a2324,_0x9a8539){const _0x3ae46e=_0x5b7482,_0x4cbe3b=_0x9a8539['toLowerCase']();return _0x3a2324['id']&&_0x3a2324['id'][_0x3ae46e(0x1ff)]()[_0x3ae46e(0x27a)](_0x4cbe3b)||_0x3a2324['category']&&_0x3a2324['category'][_0x3ae46e(0x1ff)]()[_0x3ae46e(0x27a)](_0x4cbe3b)||_0x3a2324[_0x3ae46e(0x210)]&&_0x3a2324['password'][_0x3ae46e(0x1ff)]()[_0x3ae46e(0x27a)](_0x4cbe3b)||_0x3a2324[_0x3ae46e(0x1f4)]&&_0x3a2324['price'][_0x3ae46e(0x1ff)]()[_0x3ae46e(0x27a)](_0x4cbe3b)||_0x3a2324[_0x3ae46e(0x272)]&&_0x3a2324[_0x3ae46e(0x272)][_0x3ae46e(0x1ff)]()[_0x3ae46e(0x27a)](_0x4cbe3b);}function matchesSearch(_0x3ff5b5,_0x337d0d,_0x2d2cfa){const _0x18d451=_0x5b7482;if(currentDatabase===_0x18d451(0x2a1))return matchesSearchTotal(_0x3ff5b5,_0x337d0d,_0x2d2cfa);else{if(currentDatabase==='TicketsTransit')return matchesSearchTransit(_0x3ff5b5,_0x2d2cfa);}return![];}function highlightMatch(_0x10670e,_0x39fd8d){const _0x496f5d=_0x5b7482;if(!_0x39fd8d)return _0x10670e;const _0x33d0b5=new RegExp(_0x39fd8d,'gi');return _0x10670e[_0x496f5d(0x27b)](_0x33d0b5,_0x1f87bd=>_0x496f5d(0x260)+_0x1f87bd+_0x496f5d(0x2a6));}function deleteTicket(_0x255da5,_0x4a4493,_0x4df983){const _0x51a30a=_0x5b7482;if(confirm(_0x51a30a(0x242))){showLoading();if(currentDatabase==='TicketsTransit')database[_0x51a30a(0x1f7)](currentDatabase+'/'+_0x4df983)[_0x51a30a(0x219)]()[_0x51a30a(0x1ea)](()=>{const _0x48e86b=_0x51a30a;hideLoading(),alert(_0x48e86b(0x25d));})[_0x51a30a(0x23d)](_0x362f6d=>{const _0x33e158=_0x51a30a;console[_0x33e158(0x2a0)](_0x33e158(0x26c),_0x362f6d),hideLoading(),alert(_0x33e158(0x21e));});else{const _0x440b5b=allTickets[_0x255da5];_0x440b5b['motDePasse'][_0x51a30a(0x287)](_0x4a4493,0x1),_0x440b5b[_0x51a30a(0x1f3)]['splice'](_0x4a4493,0x1),_0x440b5b['utilisateur'][_0x51a30a(0x287)](_0x4a4493,0x1),database[_0x51a30a(0x1f7)](currentDatabase+'/'+_0x255da5)[_0x51a30a(0x284)](_0x440b5b)['then'](()=>{const _0x3fa78d=_0x51a30a;hideLoading(),alert(_0x3fa78d(0x25d));})['catch'](_0x2a2be4=>{const _0x5f5408=_0x51a30a;console[_0x5f5408(0x2a0)](_0x5f5408(0x26c),_0x2a2be4),hideLoading(),alert(_0x5f5408(0x21e));});}}}function deleteSelectedTickets(_0x2d6296){const _0x37833f=_0x5b7482,_0x3e48ed=document[_0x37833f(0x22c)](_0x37833f(0x23f)+(_0x2d6296||'Transit')+_0x37833f(0x2a2));if(_0x3e48ed[_0x37833f(0x285)]===0x0){alert('Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer');return;}if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?')){showLoading();const _0x2ff77a={};if(currentDatabase===_0x37833f(0x294))_0x3e48ed[_0x37833f(0x233)](_0x7b7d8d=>{const _0x2a828f=_0x7b7d8d['value'];_0x2ff77a[currentDatabase+'/'+_0x2a828f]=null;});else{const _0x12ec7f=allTickets[_0x2d6296],_0x3bb183=Array[_0x37833f(0x26f)](_0x3e48ed)[_0x37833f(0x228)](_0x539752=>parseInt(_0x539752['value']))[_0x37833f(0x27f)]((_0x62dace,_0x5e9025)=>_0x5e9025-_0x62dace);_0x3bb183['forEach'](_0x52ae24=>{const _0x54e61b=_0x37833f;_0x12ec7f[_0x54e61b(0x269)][_0x54e61b(0x287)](_0x52ae24,0x1),_0x12ec7f[_0x54e61b(0x1f3)][_0x54e61b(0x287)](_0x52ae24,0x1),_0x12ec7f[_0x54e61b(0x264)][_0x54e61b(0x287)](_0x52ae24,0x1);}),_0x2ff77a[currentDatabase+'/'+_0x2d6296]=_0x12ec7f;}database[_0x37833f(0x1f7)]()[_0x37833f(0x29b)](_0x2ff77a)[_0x37833f(0x1ea)](()=>{hideLoading(),alert('Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!');})[_0x37833f(0x23d)](_0x1e3bdc=>{const _0x5d616d=_0x37833f;console[_0x5d616d(0x2a0)](_0x5d616d(0x26c),_0x1e3bdc),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');});}}function editSelectedTickets(_0x262f03){const _0x10f572=_0x5b7482,_0x3179ee=document['querySelectorAll']('input[name^=\x22ticketSelect_'+(_0x262f03||'Transit')+'\x22]:checked');if(_0x3179ee['length']===0x0){alert(_0x10f572(0x1f2));return;}window['selectedTicketsData']={'category':_0x262f03,'tickets':[]};if(currentDatabase==='TicketsTransit')_0x3179ee[_0x10f572(0x233)](_0x238a74=>{const _0x3fdbc5=_0x10f572,_0x2d8188=_0x238a74[_0x3fdbc5(0x230)];window[_0x3fdbc5(0x296)][_0x3fdbc5(0x299)][_0x3fdbc5(0x209)]({'id':_0x2d8188,'data':allTickets[_0x2d8188]});});else{const _0x1a97d2=Array[_0x10f572(0x26f)](_0x3179ee)[_0x10f572(0x228)](_0x5af870=>parseInt(_0x5af870[_0x10f572(0x230)]));window['selectedTicketsData']['tickets']=_0x1a97d2[_0x10f572(0x228)](_0x2e6403=>({'index':_0x2e6403,'data':{'password':allTickets[_0x262f03]['motDePasse'][_0x2e6403],'price':allTickets[_0x262f03][_0x10f572(0x1f3)][_0x2e6403],'user':allTickets[_0x262f03]['utilisateur'][_0x2e6403]}}));}document['getElementById'](_0x10f572(0x27c))['style'][_0x10f572(0x25e)]=_0x10f572(0x201);}function saveBulkEdit(){const _0x2d2b04=_0x5b7482,_0x314afb=document[_0x2d2b04(0x275)](_0x2d2b04(0x26a))[_0x2d2b04(0x230)][_0x2d2b04(0x205)](),_0x21e3b6=document[_0x2d2b04(0x275)]('bulkEditPassword')[_0x2d2b04(0x230)]['trim'](),_0x14986c=document[_0x2d2b04(0x275)](_0x2d2b04(0x220))[_0x2d2b04(0x230)][_0x2d2b04(0x205)](),_0x56e00f=document['getElementById'](_0x2d2b04(0x1fa))[_0x2d2b04(0x230)][_0x2d2b04(0x205)]();showLoading();const _0x631400={};if(currentDatabase===_0x2d2b04(0x294))window[_0x2d2b04(0x296)][_0x2d2b04(0x299)][_0x2d2b04(0x233)](_0x58aa8c=>{const _0x373b8e=_0x2d2b04,_0x18e73e={..._0x58aa8c[_0x373b8e(0x239)],'category':_0x314afb||_0x58aa8c[_0x373b8e(0x239)][_0x373b8e(0x234)],'password':_0x21e3b6||_0x58aa8c[_0x373b8e(0x239)]['password'],'price':_0x14986c||_0x58aa8c['data'][_0x373b8e(0x1f4)],'user':_0x56e00f||_0x58aa8c[_0x373b8e(0x239)][_0x373b8e(0x272)]};_0x631400[currentDatabase+'/'+_0x58aa8c['id']]=_0x18e73e;});else{const _0x2954ea=window[_0x2d2b04(0x296)][_0x2d2b04(0x234)],_0x303677=allTickets[_0x2954ea];window[_0x2d2b04(0x296)][_0x2d2b04(0x299)][_0x2d2b04(0x233)](_0x10f9db=>{const _0x7a6062=_0x2d2b04;if(_0x21e3b6)_0x303677['motDePasse'][_0x10f9db[_0x7a6062(0x214)]]=_0x21e3b6;if(_0x14986c)_0x303677[_0x7a6062(0x1f3)][_0x10f9db[_0x7a6062(0x214)]]=_0x14986c;if(_0x56e00f)_0x303677['utilisateur'][_0x10f9db[_0x7a6062(0x214)]]=_0x56e00f;}),_0x631400[currentDatabase+'/'+_0x2954ea]=_0x303677;}database['ref']()[_0x2d2b04(0x29b)](_0x631400)[_0x2d2b04(0x1ea)](()=>{hideLoading(),closeBulkEditModal(),alert('Tickets\x20sélectionnés\x20modifiés\x20avec\x20succès!');})[_0x2d2b04(0x23d)](_0x34eaa6=>{const _0x3d9759=_0x2d2b04;console['error'](_0x3d9759(0x28c),_0x34eaa6),hideLoading(),alert(_0x3d9759(0x1f9));});}function closeBulkEditModal(){const _0x3761e9=_0x5b7482;document[_0x3761e9(0x275)]('bulkEditModal')[_0x3761e9(0x254)][_0x3761e9(0x25e)]=_0x3761e9(0x235),window['selectedTicketsData']=null;}function deleteAllTicketsInCategory(_0x30770a){const _0x3bf0f0=_0x5b7482;confirm(_0x3bf0f0(0x29a)+(_0x30770a||_0x3bf0f0(0x294))+'\x20?')&&(showLoading(),currentDatabase===_0x3bf0f0(0x294)?database[_0x3bf0f0(0x1f7)](currentDatabase)['set']({})[_0x3bf0f0(0x1ea)](()=>{const _0x6a4c6d=_0x3bf0f0;hideLoading(),alert(_0x6a4c6d(0x1fb));})[_0x3bf0f0(0x23d)](_0x32ea8b=>{const _0x44f0db=_0x3bf0f0;console['error'](_0x44f0db(0x26c),_0x32ea8b),hideLoading(),alert(_0x44f0db(0x297));}):database[_0x3bf0f0(0x1f7)](currentDatabase+'/'+_0x30770a)[_0x3bf0f0(0x284)]({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x3bf0f0(0x1ea)](()=>{hideLoading(),alert('Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!');})['catch'](_0x2c0795=>{const _0x429f14=_0x3bf0f0;console[_0x429f14(0x2a0)](_0x429f14(0x26c),_0x2c0795),hideLoading(),alert(_0x429f14(0x297));}));}function exportTickets(){const _0x45868d=_0x5b7482,_0x42f3d7=_0x45868d(0x250)+encodeURIComponent(JSON['stringify'](allTickets,null,0x2)),_0x1d8b75=document['createElement']('a');_0x1d8b75[_0x45868d(0x295)]('href',_0x42f3d7),_0x1d8b75[_0x45868d(0x295)](_0x45868d(0x28d),_0x45868d(0x240)+currentDatabase+'.json'),document[_0x45868d(0x20e)]['appendChild'](_0x1d8b75),_0x1d8b75[_0x45868d(0x206)](),_0x1d8b75[_0x45868d(0x219)]();}function exportFilteredTickets(){const _0x5f3068=_0x5b7482,_0x383f04=document[_0x5f3068(0x275)](_0x5f3068(0x2a7))[_0x5f3068(0x230)][_0x5f3068(0x205)](),_0x1e0a7b={};if(currentDatabase===_0x5f3068(0x294))for(let _0x131c6d in allTickets){(!_0x383f04||matchesSearchTransit(allTickets[_0x131c6d],_0x383f04))&&(_0x1e0a7b[_0x131c6d]=allTickets[_0x131c6d]);}else for(let _0xe658b2 in allTickets){const _0x18778a=allTickets[_0xe658b2];_0x1e0a7b[_0xe658b2]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x140791=0x0;_0x140791<_0x18778a[_0x5f3068(0x269)]['length'];_0x140791++){(!_0x383f04||matchesSearchTotal(_0x18778a,_0x140791,_0x383f04))&&(_0x1e0a7b[_0xe658b2]['motDePasse']['push'](_0x18778a[_0x5f3068(0x269)][_0x140791]),_0x1e0a7b[_0xe658b2][_0x5f3068(0x1f3)][_0x5f3068(0x209)](_0x18778a[_0x5f3068(0x1f3)][_0x140791]),_0x1e0a7b[_0xe658b2][_0x5f3068(0x264)][_0x5f3068(0x209)](_0x18778a['utilisateur'][_0x140791]));}}const _0x34db82=_0x5f3068(0x250)+encodeURIComponent(JSON[_0x5f3068(0x203)](_0x1e0a7b,null,0x2)),_0x2fbd8a=document['createElement']('a');_0x2fbd8a[_0x5f3068(0x295)](_0x5f3068(0x282),_0x34db82),_0x2fbd8a[_0x5f3068(0x295)](_0x5f3068(0x28d),_0x5f3068(0x265)+currentDatabase+_0x5f3068(0x1ec)),document['body']['appendChild'](_0x2fbd8a),_0x2fbd8a[_0x5f3068(0x206)](),_0x2fbd8a[_0x5f3068(0x219)]();}function handleJsonImport(_0x174909){const _0x2df2c3=_0x5b7482,_0x3ad667=JSON[_0x2df2c3(0x24d)](_0x174909);if(confirm('Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.')){(!allTickets||Object[_0x2df2c3(0x23e)](allTickets)[_0x2df2c3(0x285)]===0x0)&&(allTickets=currentDatabase===_0x2df2c3(0x294)?{}:{});const _0x421234={};if(currentDatabase===_0x2df2c3(0x294)){let _0x4f9996={};for(let _0x1c76f2 in _0x3ad667){let _0x15abf9=_0x1c76f2;while(allTickets[_0x15abf9]){_0x15abf9=_0x2df2c3(0x1f0)+Date['now']()+'-'+Math[_0x2df2c3(0x24c)](Math[_0x2df2c3(0x22e)]()*0x3e8);}_0x4f9996[_0x15abf9]={..._0x3ad667[_0x1c76f2],'id':_0x15abf9};}for(let _0xbd712e in _0x4f9996){_0x421234[currentDatabase+'/'+_0xbd712e]=_0x4f9996[_0xbd712e];}}else for(let _0x1853f0 in _0x3ad667){allTickets[_0x1853f0]?_0x421234[currentDatabase+'/'+_0x1853f0]={'motDePasse':[...allTickets[_0x1853f0][_0x2df2c3(0x269)],..._0x3ad667[_0x1853f0]['motDePasse']],'prix':[...allTickets[_0x1853f0][_0x2df2c3(0x1f3)],..._0x3ad667[_0x1853f0][_0x2df2c3(0x1f3)]],'utilisateur':[...allTickets[_0x1853f0][_0x2df2c3(0x264)],..._0x3ad667[_0x1853f0][_0x2df2c3(0x264)]]}:_0x421234[currentDatabase+'/'+_0x1853f0]=_0x3ad667[_0x1853f0];}database[_0x2df2c3(0x1f7)]()[_0x2df2c3(0x29b)](_0x421234)[_0x2df2c3(0x1ea)](()=>{const _0x65ebe3=_0x2df2c3;hideLoading(),alert(_0x65ebe3(0x283));})['catch'](_0x37685e=>{const _0x5f374a=_0x2df2c3;console[_0x5f374a(0x2a0)](_0x5f374a(0x217),_0x37685e),hideLoading(),alert(_0x5f374a(0x29f));});}else hideLoading();}function handleCsvImport(_0x448218){const _0x51b4c1=_0x5b7482,_0x5b8557=_0x448218[_0x51b4c1(0x266)]('\x0a');let _0x446da0={};if(currentDatabase==='TicketsTransit'){for(let _0x455a15=0x1;_0x455a15<_0x5b8557[_0x51b4c1(0x285)];_0x455a15++){if(!_0x5b8557[_0x455a15][_0x51b4c1(0x205)]())continue;const _0x561aaa=_0x5b8557[_0x455a15]['split'](','),_0x1671e0=_0x51b4c1(0x1f0)+Date[_0x51b4c1(0x2a4)]()+'-'+Math['floor'](Math[_0x51b4c1(0x22e)]()*0x3e8);_0x446da0[_0x1671e0]={'id':_0x1671e0,'category':_0x561aaa[0x1]?_0x561aaa[0x1][_0x51b4c1(0x205)]():_0x51b4c1(0x263),'password':_0x561aaa[0x2]?_0x561aaa[0x2][_0x51b4c1(0x205)]():'','price':_0x561aaa[0x3]?_0x561aaa[0x3][_0x51b4c1(0x205)]():'','user':_0x561aaa[0x4]?_0x561aaa[0x4][_0x51b4c1(0x205)]():''};}tempImportData={'tickets':_0x446da0},tempCategory=_0x51b4c1(0x294),showPriceModal(_0x51b4c1(0x241));}else{for(let _0xadfe5b=0x1;_0xadfe5b<_0x5b8557[_0x51b4c1(0x285)];_0xadfe5b++){if(!_0x5b8557[_0xadfe5b][_0x51b4c1(0x205)]())continue;const _0x5990f5=_0x5b8557[_0xadfe5b][_0x51b4c1(0x266)](','),_0x3ac11f=_0x5990f5[0x2]['trim']();!_0x446da0[_0x3ac11f]&&(_0x446da0[_0x3ac11f]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x446da0[_0x3ac11f][_0x51b4c1(0x264)][_0x51b4c1(0x209)](_0x5990f5[0x0][_0x51b4c1(0x205)]()),_0x446da0[_0x3ac11f][_0x51b4c1(0x269)]['push'](_0x5990f5[0x1][_0x51b4c1(0x205)]());}tempImportData=_0x446da0;const _0x25628d=Object[_0x51b4c1(0x23e)](_0x446da0)[0x0];showPriceModal(_0x25628d);}}function handleTxtImport(_0x48f17a){const _0x590f1f=_0x5b7482,_0x4d6403=_0x48f17a['split']('\x0a');let _0x5390de={};if(currentDatabase===_0x590f1f(0x294)){const _0x4c05b0=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x20db2d of _0x4d6403){_0x20db2d=_0x20db2d['trim']();if(!_0x20db2d||_0x20db2d===_0x590f1f(0x279))continue;const _0x18df15=_0x20db2d[_0x590f1f(0x1ef)](_0x4c05b0);if(_0x18df15){const [_0x236cf5,_0x449db0,_0x11735c,_0x47b392]=_0x18df15,_0x37b373=_0x590f1f(0x1f0)+Date[_0x590f1f(0x2a4)]()+'-'+Math[_0x590f1f(0x24c)](Math[_0x590f1f(0x22e)]()*0x3e8);_0x5390de[_0x37b373]={'id':_0x37b373,'category':_0x47b392,'password':_0x11735c,'price':'','user':_0x449db0};}}tempImportData={'tickets':_0x5390de},tempCategory=_0x590f1f(0x294),showPriceModal(_0x590f1f(0x241));}else{const _0xabb3d5=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x18c5bb of _0x4d6403){_0x18c5bb=_0x18c5bb[_0x590f1f(0x205)]();if(!_0x18c5bb||_0x18c5bb===_0x590f1f(0x279))continue;const _0x320030=_0x18c5bb[_0x590f1f(0x1ef)](_0xabb3d5);if(_0x320030){const [_0x2b7ff2,_0x46247b,_0x6c0fb7,_0x3f826f]=_0x320030;!_0x5390de[_0x3f826f]&&(_0x5390de[_0x3f826f]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x5390de[_0x3f826f][_0x590f1f(0x264)][_0x590f1f(0x209)](_0x46247b),_0x5390de[_0x3f826f][_0x590f1f(0x269)][_0x590f1f(0x209)](_0x6c0fb7);}}if(Object[_0x590f1f(0x23e)](_0x5390de)[_0x590f1f(0x285)]===0x0){hideLoading(),alert(_0x590f1f(0x27d));return;}tempImportData=_0x5390de;const _0x97e49b=Object[_0x590f1f(0x23e)](_0x5390de)[0x0];showPriceModal(_0x97e49b);}}function showPriceModal(_0x47ae4b){const _0x14ac3d=_0x5b7482;tempCategory=_0x47ae4b,document[_0x14ac3d(0x275)](_0x14ac3d(0x215))[_0x14ac3d(0x23c)]=_0x47ae4b,document[_0x14ac3d(0x275)]('priceModal')[_0x14ac3d(0x254)][_0x14ac3d(0x25e)]=_0x14ac3d(0x201),document[_0x14ac3d(0x275)](_0x14ac3d(0x289))[_0x14ac3d(0x230)]='';}function confirmPrice(){const _0x49ec66=_0x5b7482,_0x395965=document[_0x49ec66(0x275)]('priceInput')[_0x49ec66(0x230)][_0x49ec66(0x205)]();if(!_0x395965){alert(_0x49ec66(0x255));return;}if(currentDatabase===_0x49ec66(0x294)){for(let _0x3166f5 in tempImportData[_0x49ec66(0x299)]){tempImportData[_0x49ec66(0x299)][_0x3166f5]['price']=_0x395965;}finishImport();}else{tempImportData[tempCategory]['prix']=Array(tempImportData[tempCategory][_0x49ec66(0x269)][_0x49ec66(0x285)])[_0x49ec66(0x1e9)](_0x395965);const _0x2fa082=Object['keys'](tempImportData),_0x42ef05=_0x2fa082[_0x49ec66(0x290)](tempCategory);_0x42ef05<_0x2fa082[_0x49ec66(0x285)]-0x1?(document[_0x49ec66(0x275)](_0x49ec66(0x289))[_0x49ec66(0x230)]='',showPriceModal(_0x2fa082[_0x42ef05+0x1])):finishImport();}}function cancelImport(){const _0x496bef=_0x5b7482;document['getElementById']('priceModal')[_0x496bef(0x254)][_0x496bef(0x25e)]=_0x496bef(0x235),currentDatabase==='TicketsTransit'&&(tempImportData=null),document[_0x496bef(0x275)](_0x496bef(0x2a8))[_0x496bef(0x230)]='',tempCategory=null,hideLoading();}function finishImport(){const _0x310472=_0x5b7482;if(confirm(_0x310472(0x268))){(!allTickets||Object['keys'](allTickets)[_0x310472(0x285)]===0x0)&&(allTickets=currentDatabase==='TicketsTransit'?{}:{});const _0x5d7eb3={};if(currentDatabase===_0x310472(0x294))for(let _0x415242 in tempImportData[_0x310472(0x299)]){_0x5d7eb3[currentDatabase+'/'+_0x415242]=tempImportData[_0x310472(0x299)][_0x415242];}else for(let _0x5c8500 in tempImportData){allTickets[_0x5c8500]?_0x5d7eb3[currentDatabase+'/'+_0x5c8500]={'motDePasse':[...allTickets[_0x5c8500][_0x310472(0x269)],...tempImportData[_0x5c8500][_0x310472(0x269)]],'prix':[...allTickets[_0x5c8500]['prix'],...tempImportData[_0x5c8500][_0x310472(0x1f3)]],'utilisateur':[...allTickets[_0x5c8500][_0x310472(0x264)],...tempImportData[_0x5c8500][_0x310472(0x264)]]}:_0x5d7eb3[currentDatabase+'/'+_0x5c8500]=tempImportData[_0x5c8500];}database[_0x310472(0x1f7)]()[_0x310472(0x29b)](_0x5d7eb3)[_0x310472(0x1ea)](()=>{const _0x56db6d=_0x310472;document[_0x56db6d(0x275)](_0x56db6d(0x208))[_0x56db6d(0x254)][_0x56db6d(0x25e)]=_0x56db6d(0x235),document[_0x56db6d(0x275)](_0x56db6d(0x2a8))[_0x56db6d(0x230)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x56db6d(0x283));})[_0x310472(0x23d)](_0x58bbde=>{const _0x4be4fb=_0x310472;console[_0x4be4fb(0x2a0)]('Erreur\x20lors\x20de\x20l\x27importation:',_0x58bbde),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}else cancelImport();}function importTickets(_0x40ee1e){const _0x36bd8d=_0x5b7482,_0x208557=_0x40ee1e[_0x36bd8d(0x292)][_0x36bd8d(0x262)][0x0];if(!_0x208557)return;showLoading();const _0xdad760=new FileReader();_0xdad760['onload']=function(_0x5d8a88){const _0x562e7e=_0x36bd8d;try{const _0x32e975=_0x208557['name'][_0x562e7e(0x266)]('.')[_0x562e7e(0x253)]()[_0x562e7e(0x1ff)]();if(_0x32e975==='json')handleJsonImport(_0x5d8a88[_0x562e7e(0x292)][_0x562e7e(0x2a3)]);else{if(_0x32e975==='csv')handleCsvImport(_0x5d8a88[_0x562e7e(0x292)][_0x562e7e(0x2a3)]);else{if(_0x32e975==='txt')handleTxtImport(_0x5d8a88[_0x562e7e(0x292)][_0x562e7e(0x2a3)]);else throw new Error(_0x562e7e(0x222));}}}catch(_0x5b0d0a){console[_0x562e7e(0x2a0)](_0x562e7e(0x1fe),_0x5b0d0a),hideLoading(),alert(_0x562e7e(0x24b));}},_0xdad760[_0x36bd8d(0x236)](_0x208557);}function deleteSearchResults(){const _0x19ec74=_0x5b7482,_0x50dd4c=document['getElementById'](_0x19ec74(0x2a7))[_0x19ec74(0x230)][_0x19ec74(0x205)]();if(!_0x50dd4c){alert(_0x19ec74(0x1f1));return;}if(confirm(_0x19ec74(0x273))){showLoading();const _0x208331={};if(currentDatabase===_0x19ec74(0x294))for(let _0x1d0bf9 in allTickets){matchesSearchTransit(allTickets[_0x1d0bf9],_0x50dd4c)&&(_0x208331[currentDatabase+'/'+_0x1d0bf9]=null);}else for(let _0x3fd35f in allTickets){const _0x3dc7e6=allTickets[_0x3fd35f],_0xdc22c5={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x6c0def=0x0;_0x6c0def<_0x3dc7e6[_0x19ec74(0x269)][_0x19ec74(0x285)];_0x6c0def++){!matchesSearchTotal(_0x3dc7e6,_0x6c0def,_0x50dd4c)&&(_0xdc22c5[_0x19ec74(0x269)][_0x19ec74(0x209)](_0x3dc7e6['motDePasse'][_0x6c0def]),_0xdc22c5['prix'][_0x19ec74(0x209)](_0x3dc7e6[_0x19ec74(0x1f3)][_0x6c0def]),_0xdc22c5[_0x19ec74(0x264)]['push'](_0x3dc7e6[_0x19ec74(0x264)][_0x6c0def]));}_0x208331[currentDatabase+'/'+_0x3fd35f]=_0xdc22c5;}database[_0x19ec74(0x1f7)]()[_0x19ec74(0x29b)](_0x208331)[_0x19ec74(0x1ea)](()=>{const _0xc02d9f=_0x19ec74;hideLoading(),alert(_0xc02d9f(0x256));})[_0x19ec74(0x23d)](_0xae2b9a=>{const _0x2a01ca=_0x19ec74;console[_0x2a01ca(0x2a0)]('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:',_0xae2b9a),hideLoading(),alert(_0x2a01ca(0x27e));});}}function searchTickets(){const _0x2d5438=_0x5b7482,_0x18b7f5=document['getElementById'](_0x2d5438(0x2a7))[_0x2d5438(0x230)]['trim']();displayTickets(allTickets,_0x18b7f5);}function checkAuth(){const _0x57b1f0=_0x5b7482,_0x549aeb=sessionStorage[_0x57b1f0(0x29d)](_0x57b1f0(0x226));if(!_0x549aeb)return window[_0x57b1f0(0x24e)][_0x57b1f0(0x27b)]('login.html'),![];return!![];}function changeDatabase(){const _0x5408f7=_0x5b7482;currentDatabase=document[_0x5408f7(0x275)](_0x5408f7(0x23a))['value'],updateImportFileAccept(),loadTickets();}function updateImportFileAccept(){const _0x1a2afc=_0x5b7482,_0x5e48f0=document['getElementById']('importFile');currentDatabase===_0x1a2afc(0x294)?_0x5e48f0[_0x1a2afc(0x21c)]=_0x1a2afc(0x200):_0x5e48f0[_0x1a2afc(0x21c)]='.json,.csv,.txt';}window[_0x5b7482(0x1eb)]=()=>{checkAuth()&&(updateImportFileAccept(),loadTickets());};function logout(){const _0x1b9584=_0x5b7482;sessionStorage[_0x1b9584(0x28e)](),window[_0x1b9584(0x24e)]['replace'](_0x1b9584(0x1f6));}document[_0x5b7482(0x275)](_0x5b7482(0x2a7))[_0x5b7482(0x271)](_0x5b7482(0x26d),searchTickets),window[_0x5b7482(0x1eb)]=()=>{checkAuth()&&loadTickets();};
</script>

</body>
</html>
