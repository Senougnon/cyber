<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des tickets</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* ... (vos variables CSS) ... */
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --background-color: #00637c;
            --text-color: #34495e;
            --edit-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: rgb(0, 48, 16);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .pin-icon {
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            background-color: rgb(244, 255, 143);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:last-child td {
            border-bottom: none;
        }

        button, .file-input-label {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-block;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        button:hover, .file-input-label:hover {
            background-color: #2980b9;
        }

        .delete-btn {
            background-color: var(--danger-color);
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .edit-btn {
            background-color: var(--edit-color);
        }

        .edit-btn:hover {
            background-color: #d68910;
        }

        .add-ticket-btn {
            background-color: var(--secondary-color);
        }

        .add-ticket-btn:hover {
            background-color: #27ae60;
        }

        #searchBar {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        #searchBar:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .highlight {
            background-color: #fff176;
            padding: 2px;
            border-radius: 2px;
        }

        #importFile {
            display: none;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading::after {
            content: "";
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: relative;
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .action-row {
                flex-direction: column;
                align-items: stretch;
            }

            button, .file-input-label {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        .logout-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background-color: #e74c3c;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button:hover {
        background-color: #c0392b;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .logout-button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .logout-button i {
        font-size: 16px;
    }

    @media (max-width: 768px) {
        .logout-button {
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 12px;
        }
    }
      .database-selector {
        margin-bottom: 20px;
    }

    .database-selector select {
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        color: var(--text-color);
        cursor: pointer;
    }

    .database-selector select:focus {
        outline: none;
        border-color: var(--primary-color);
    }
    </style>
</head>
<body>
<button onclick="logout()" class="logout-button">
    <i class="fas fa-sign-out-alt"></i> Déconnexion
</button>
    <div class="container">
        <h1>Gestion des tickets</h1>

        <div class="database-selector">
            <label for="databaseSelect">Choisir la base de données : </label>
            <select id="databaseSelect" onchange="changeDatabase()">
                <option value="TicketsTotal">TicketsTotal</option>
                <option value="TicketsTransit">TicketsTransit</option>
            </select>
        </div>

        <div class="action-row">
            <div>
                <button onclick="exportTickets()">Exporter tous les tickets</button>
                <label for="importFile" class="file-input-label">Importer des tickets</label>
                <input type="file" id="importFile" accept=".txt,.json" onchange="importTickets(event)">
            </div>
            <button onclick="exportFilteredTickets()">Exporter les tickets filtrés</button>
        </div>
        <input type="text" id="searchBar" placeholder="Rechercher un ticket (mot de passe, prix ou utilisateur)">
        <button onclick="deleteSearchResults()">Supprimer les résultats de recherche</button>
        <div id="ticketCategories"></div>
    </div>

    <div id="loadingIndicator" class="loading" style="display: none;"></div>

    <!-- Modal pour les prix -->
    <div id="priceModal" class="modal">
        <div class="modal-content">
            <h2>Définir le prix</h2>
            <p>Veuillez entrer le prix pour la catégorie <span id="categoryName"></span></p>
            <input type="text" id="priceInput" placeholder="Entrer le prix">
            <div class="modal-buttons">
                <button onclick="confirmPrice()">Confirmer</button>
                <button onclick="cancelImport()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier un ticket -->
    <div id="editTicketModal" class="modal">
        <div class="modal-content">
            <h2>Modifier le ticket</h2>
            <input type="text" id="editId" placeholder="ID" disabled>
            <input type="text" id="editCategory" placeholder="Catégorie">
            <input type="text" id="editPassword" placeholder="Mot de passe">
            <input type="text" id="editPrice" placeholder="Prix">
            <input type="text" id="editUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveTicketEdit()">Enregistrer</button>
                <button onclick="closeEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour modifier une catégorie -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <h2>Modifier la catégorie</h2>
            <input type="text" id="editCategoryName" placeholder="Nouveau nom de la catégorie">
            <div class="modal-buttons">
                <button onclick="saveCategoryEdit()">Enregistrer</button>
                <button onclick="closeEditCategoryModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour ajouter un ticket -->
    <div id="addTicketModal" class="modal">
        <div class="modal-content">
            <h2>Ajouter un nouveau ticket</h2>
            <input type="text" id="newCategory" placeholder="Catégorie">
            <input type="text" id="newPassword" placeholder="Mot de passe">
            <input type="text" id="newPrice" placeholder="Prix">
            <input type="text" id="newUser" placeholder="Utilisateur">
            <div class="modal-buttons">
                <button onclick="saveNewTicket()">Ajouter</button>
                <button onclick="closeAddTicketModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal pour la modification groupée -->
    <div id="bulkEditModal" class="modal">
        <div class="modal-content">
            <h2>Modifier les tickets sélectionnés</h2>
            <input type="text" id="bulkEditCategory" placeholder="Catégorie (laisser vide si inchangé)">
            <input type="text" id="bulkEditPassword" placeholder="Mot de passe (laisser vide si inchangé)">
            <input type="text" id="bulkEditPrice" placeholder="Prix (laisser vide si inchangé)">
            <input type="text" id="bulkEditUser" placeholder="Utilisateur (laisser vide si inchangé)">
            <div class="modal-buttons">
                <button onclick="saveBulkEdit()">Enregistrer</button>
                <button onclick="closeBulkEditModal()">Annuler</button>
            </div>
        </div>
    </div>

    <script>
const _0x35600b=_0x22e4;(function(_0x4f40a2,_0x405278){const _0x5939f8=_0x22e4,_0xf5cf8d=_0x4f40a2();while(!![]){try{const _0x21c75d=parseInt(_0x5939f8(0x22a))/0x1+-parseInt(_0x5939f8(0x1f6))/0x2*(parseInt(_0x5939f8(0x2a4))/0x3)+parseInt(_0x5939f8(0x1f3))/0x4+-parseInt(_0x5939f8(0x295))/0x5*(-parseInt(_0x5939f8(0x260))/0x6)+-parseInt(_0x5939f8(0x268))/0x7+parseInt(_0x5939f8(0x258))/0x8*(parseInt(_0x5939f8(0x22f))/0x9)+parseInt(_0x5939f8(0x264))/0xa;if(_0x21c75d===_0x405278)break;else _0xf5cf8d['push'](_0xf5cf8d['shift']());}catch(_0x1bd8e1){_0xf5cf8d['push'](_0xf5cf8d['shift']());}}}(_0x24dd,0xaeeef));const firebaseConfig={'apiKey':_0x35600b(0x25d),'authDomain':_0x35600b(0x27a),'databaseURL':_0x35600b(0x26a),'projectId':'cyber-campus-2706f','storageBucket':_0x35600b(0x231),'messagingSenderId':_0x35600b(0x235),'appId':'1:719410601264:web:44fd2e3757721866303cf5','measurementId':_0x35600b(0x1fa)};firebase['initializeApp'](firebaseConfig);const database=firebase[_0x35600b(0x24e)]();let allTickets={},tempImportData=null,tempCategory=null,currentEditingTicket=null,currentEditingCategory=null,currentDatabase=_0x35600b(0x253),editingCategory='',editingIndex=-0x1,editingId='';(function(){const _0xa14ad1=_0x35600b,_0x2601a0=sessionStorage[_0xa14ad1(0x276)](_0xa14ad1(0x21f));!_0x2601a0&&window['location']['replace'](_0xa14ad1(0x292));}()),document[_0x35600b(0x24a)]('DOMContentLoaded',function(){const _0x13b6c1=_0x35600b;!sessionStorage[_0x13b6c1(0x276)](_0x13b6c1(0x21f))&&window[_0x13b6c1(0x1f7)][_0x13b6c1(0x215)](_0x13b6c1(0x292));}),window['addEventListener'](_0x35600b(0x200),function(_0x2b7582){const _0x4cff9e=_0x35600b;(_0x2b7582[_0x4cff9e(0x21d)]||!sessionStorage[_0x4cff9e(0x276)]('isLoggedIn'))&&window['location']['replace'](_0x4cff9e(0x292));});function showLoading(){const _0x159ae1=_0x35600b;document['getElementById'](_0x159ae1(0x216))['style']['display']=_0x159ae1(0x1ec);}function hideLoading(){const _0x311c2a=_0x35600b;document['getElementById']('loadingIndicator')[_0x311c2a(0x218)][_0x311c2a(0x275)]=_0x311c2a(0x208);}function loadTickets(){const _0x51f10a=_0x35600b;showLoading();const _0x48400c=database[_0x51f10a(0x1e9)](currentDatabase);_0x48400c[_0x51f10a(0x23e)](_0x51f10a(0x1f1)),_0x48400c['on']('value',_0x5556a6=>{allTickets=_0x5556a6['val']()||{},displayTickets(allTickets),hideLoading();},_0x3bafd4=>{const _0x420ba6=_0x51f10a;console[_0x420ba6(0x252)]('Erreur\x20lors\x20du\x20chargement\x20des\x20tickets:',_0x3bafd4),hideLoading(),alert(_0x420ba6(0x2a7));});}function displayTickets(_0x470344,_0x643f05=''){const _0x33f63d=_0x35600b,_0x1f62aa=document[_0x33f63d(0x206)](_0x33f63d(0x201));_0x1f62aa[_0x33f63d(0x22e)]='';if(currentDatabase===_0x33f63d(0x253))displayTicketsTotal(_0x470344,_0x643f05);else currentDatabase===_0x33f63d(0x2a2)&&displayTicketsTransit(_0x470344,_0x643f05);}function displayTicketsTotal(_0x4c19ab,_0x5e62c0=''){const _0x2a0600=_0x35600b,_0x170a35=document['getElementById'](_0x2a0600(0x201));for(let _0x176739 in _0x4c19ab){const _0x1f8615=_0x4c19ab[_0x176739],_0x3f7143=_0x2a0600(0x245)+_0x176739+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x20pin-icon\x22\x20onclick=\x22editCategory(\x27'+_0x176739+_0x2a0600(0x299)+_0x176739+_0x2a0600(0x205)+_0x176739+_0x2a0600(0x298)+_0x176739+_0x2a0600(0x1f0)+_0x176739+_0x2a0600(0x230)+_0x176739+_0x2a0600(0x29f)+_0x176739+_0x2a0600(0x2a0)+_0x176739+_0x2a0600(0x1fd)+_0x176739+'\x27)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_'+_0x176739+_0x2a0600(0x20c)+generateTicketRowsTotal(_0x176739,_0x1f8615,_0x5e62c0)+_0x2a0600(0x240)+_0x176739+_0x2a0600(0x228)+_0x176739+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';_0x170a35[_0x2a0600(0x22e)]+=_0x3f7143;}}function generateTicketRowsTotal(_0x495699,_0x1300bc,_0x12c4c4){const _0x1cdec7=_0x35600b;let _0x3442bf='';for(let _0x487502=0x0;_0x487502<_0x1300bc[_0x1cdec7(0x217)][_0x1cdec7(0x286)];_0x487502++){if(_0x12c4c4&&!matchesSearchTotal(_0x1300bc,_0x487502,_0x12c4c4))continue;_0x3442bf+=_0x1cdec7(0x1fc)+_0x495699+'\x22\x20value=\x22'+_0x487502+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+highlightMatch(_0x1300bc[_0x1cdec7(0x217)][_0x487502],_0x12c4c4)+_0x1cdec7(0x26d)+highlightMatch(_0x1300bc[_0x1cdec7(0x234)][_0x487502],_0x12c4c4)+_0x1cdec7(0x26d)+highlightMatch(_0x1300bc[_0x1cdec7(0x280)][_0x487502],_0x12c4c4)+_0x1cdec7(0x27d)+_0x495699+_0x1cdec7(0x209)+_0x487502+_0x1cdec7(0x289)+_0x495699+'\x27,\x20'+_0x487502+_0x1cdec7(0x247);}return _0x3442bf;}function displayTicketsTransit(_0x13175e,_0x1c9a32=''){const _0x127702=_0x35600b,_0x152839=document['getElementById'](_0x127702(0x201));_0x152839[_0x127702(0x22e)]='';const _0x5cae9f=_0x127702(0x1fe)+generateTicketRowsTransit(_0x13175e,_0x1c9a32)+_0x127702(0x23a);_0x152839[_0x127702(0x22e)]=_0x5cae9f;}function generateTicketRowsTransit(_0x4d3a88,_0x3260be){const _0x1ab412=_0x35600b;let _0x5d58ec='';for(let _0x4a9235 in _0x4d3a88){const _0x4c28dd=_0x4d3a88[_0x4a9235];if(_0x3260be&&!matchesSearchTransit(_0x4c28dd,_0x3260be))continue;_0x5d58ec+=_0x1ab412(0x273)+_0x4a9235+_0x1ab412(0x28e)+highlightMatch(_0x4a9235,_0x3260be)+_0x1ab412(0x26d)+highlightMatch(_0x4c28dd[_0x1ab412(0x242)],_0x3260be)+_0x1ab412(0x26d)+highlightMatch(_0x4c28dd[_0x1ab412(0x1ff)],_0x3260be)+_0x1ab412(0x26d)+highlightMatch(_0x4c28dd[_0x1ab412(0x1fb)],_0x3260be)+_0x1ab412(0x26d)+highlightMatch(_0x4c28dd[_0x1ab412(0x263)],_0x3260be)+_0x1ab412(0x224)+_0x4a9235+_0x1ab412(0x207)+_0x4a9235+_0x1ab412(0x210);}return _0x5d58ec;}function editTicketTransit(_0x55d403){const _0x166826=_0x35600b,_0xd279bb=allTickets[_0x55d403];_0xd279bb?(editingId=_0x55d403,document[_0x166826(0x206)](_0x166826(0x27f))[_0x166826(0x1f1)]=_0x55d403,document[_0x166826(0x206)](_0x166826(0x2a8))[_0x166826(0x1f1)]=_0xd279bb[_0x166826(0x242)],document['getElementById'](_0x166826(0x21a))[_0x166826(0x1f1)]=_0xd279bb['password'],document[_0x166826(0x206)]('editPrice')[_0x166826(0x1f1)]=_0xd279bb['price'],document[_0x166826(0x206)](_0x166826(0x1eb))[_0x166826(0x1f1)]=_0xd279bb[_0x166826(0x263)],document[_0x166826(0x206)](_0x166826(0x29c))[_0x166826(0x218)][_0x166826(0x275)]=_0x166826(0x1ea)):alert(_0x166826(0x266));}function saveTicketEdit(){const _0x38bd85=_0x35600b,_0x52575f=document[_0x38bd85(0x206)](_0x38bd85(0x21a))[_0x38bd85(0x1f1)],_0xbcf94d=document[_0x38bd85(0x206)]('editPrice')[_0x38bd85(0x1f1)],_0x21dd5c=document[_0x38bd85(0x206)](_0x38bd85(0x1eb))[_0x38bd85(0x1f1)],_0x3fe338=document[_0x38bd85(0x206)](_0x38bd85(0x2a8))[_0x38bd85(0x1f1)];if(!_0x52575f||!_0xbcf94d||!_0x21dd5c||!_0x3fe338){alert('Tous\x20les\x20champs\x20sont\x20obligatoires');return;}showLoading();if(currentDatabase===_0x38bd85(0x253)){const _0x8e3d2d=allTickets[editingCategory];_0x8e3d2d[_0x38bd85(0x217)][editingIndex]=_0x52575f,_0x8e3d2d[_0x38bd85(0x234)][editingIndex]=_0xbcf94d,_0x8e3d2d[_0x38bd85(0x280)][editingIndex]=_0x21dd5c;const _0x167008={[currentDatabase+'/'+editingCategory]:_0x8e3d2d};database[_0x38bd85(0x1e9)]()[_0x38bd85(0x259)](_0x167008)[_0x38bd85(0x25f)](()=>{const _0xe9c8aa=_0x38bd85;hideLoading(),closeEditModal(),alert(_0xe9c8aa(0x284));})['catch'](_0x2b5a82=>{const _0x252274=_0x38bd85;console[_0x252274(0x252)](_0x252274(0x28d),_0x2b5a82),hideLoading(),alert(_0x252274(0x1e8));});}else{if(currentDatabase===_0x38bd85(0x2a2)){const _0x4aba39=database[_0x38bd85(0x1e9)](currentDatabase+'/'+editingId);_0x4aba39[_0x38bd85(0x259)]({'category':_0x3fe338,'password':_0x52575f,'price':_0xbcf94d,'user':_0x21dd5c})['then'](()=>{const _0x5caa2b=_0x38bd85;hideLoading(),closeEditModal(),alert(_0x5caa2b(0x284));})[_0x38bd85(0x2ab)](_0x2b3b25=>{const _0x30185a=_0x38bd85;console['error'](_0x30185a(0x28d),_0x2b3b25),hideLoading(),alert(_0x30185a(0x1e8));});}}}function editTicketTotal(_0x429606,_0xf6f691){const _0xf5bbea=_0x35600b;editingCategory=_0x429606,editingIndex=_0xf6f691;const _0x52ce99=allTickets[_0x429606];document[_0xf5bbea(0x206)]('editId')[_0xf5bbea(0x1f1)]='',document[_0xf5bbea(0x206)]('editCategory')['value']=_0x429606,document[_0xf5bbea(0x206)]('editPassword')['value']=_0x52ce99[_0xf5bbea(0x217)][_0xf6f691],document[_0xf5bbea(0x206)](_0xf5bbea(0x250))[_0xf5bbea(0x1f1)]=_0x52ce99[_0xf5bbea(0x234)][_0xf6f691],document[_0xf5bbea(0x206)](_0xf5bbea(0x1eb))[_0xf5bbea(0x1f1)]=_0x52ce99[_0xf5bbea(0x280)][_0xf6f691],document['getElementById'](_0xf5bbea(0x29c))[_0xf5bbea(0x218)][_0xf5bbea(0x275)]='block';}function importTicketsToCategory(_0x24019a,_0xa773e4){const _0x122094=_0x35600b,_0x836930=_0xa773e4[_0x122094(0x220)][_0x122094(0x20e)][0x0];if(!_0x836930)return;showLoading();const _0x23ac27=new FileReader();_0x23ac27['onload']=function(_0x56cd4c){const _0x5c2697=_0x122094;try{const _0x276e7d=_0x836930['name'][_0x5c2697(0x203)]('.')[_0x5c2697(0x1f2)]()['toLowerCase']();if(currentDatabase===_0x5c2697(0x2a2)&&_0x276e7d!==_0x5c2697(0x25a))throw new Error(_0x5c2697(0x26f));if(_0x276e7d===_0x5c2697(0x283))handleJsonImportToCategory(_0x56cd4c[_0x5c2697(0x220)][_0x5c2697(0x202)],_0x24019a);else{if(_0x276e7d===_0x5c2697(0x229))handleCsvImportToCategory(_0x56cd4c[_0x5c2697(0x220)][_0x5c2697(0x202)],_0x24019a);else{if(_0x276e7d===_0x5c2697(0x25a))handleTxtImportToCategory(_0x56cd4c[_0x5c2697(0x220)][_0x5c2697(0x202)],_0x24019a);else throw new Error('Format\x20de\x20fichier\x20non\x20supporté');}}}catch(_0x12cb00){console[_0x5c2697(0x252)](_0x5c2697(0x238),_0x12cb00),hideLoading(),alert(_0x5c2697(0x222));}},_0x23ac27[_0x122094(0x297)](_0x836930);}function handleJsonImportToCategory(_0xa0f547,_0x5cc88f){const _0x45e54d=_0x35600b,_0xa233cd=JSON[_0x45e54d(0x241)](_0xa0f547);if(currentDatabase==='TicketsTransit')for(let _0x346326 in _0xa233cd){if(!_0xa233cd[_0x346326][_0x45e54d(0x242)]||!_0xa233cd[_0x346326][_0x45e54d(0x1ff)]||!_0xa233cd[_0x346326][_0x45e54d(0x1fb)]||!_0xa233cd[_0x346326][_0x45e54d(0x263)]){hideLoading(),alert(_0x45e54d(0x221));return;}}else{if(_0x5cc88f===_0x45e54d(0x2a2))for(let _0x4766e9 in _0xa233cd){if(!_0xa233cd[_0x4766e9][_0x45e54d(0x242)]||!_0xa233cd[_0x4766e9]['password']||!_0xa233cd[_0x4766e9][_0x45e54d(0x1fb)]||!_0xa233cd[_0x4766e9][_0x45e54d(0x263)]){hideLoading(),alert(_0x45e54d(0x221));return;}}else{if(!_0xa233cd[_0x5cc88f]||!_0xa233cd[_0x5cc88f][_0x45e54d(0x217)]||!_0xa233cd[_0x5cc88f][_0x45e54d(0x234)]||!_0xa233cd[_0x5cc88f][_0x45e54d(0x280)]){hideLoading(),alert(_0x45e54d(0x255));return;}}}mergeTicketsToCategory(_0x5cc88f,_0xa233cd);}function _0x22e4(_0x512076,_0x48e9de){const _0x24dd6f=_0x24dd();return _0x22e4=function(_0x22e493,_0x4c291f){_0x22e493=_0x22e493-0x1e8;let _0x550ee1=_0x24dd6f[_0x22e493];return _0x550ee1;},_0x22e4(_0x512076,_0x48e9de);}function handleCsvImportToCategory(_0x24a281,_0x15f489){const _0x53ce3f=_0x35600b,_0x52a59b=_0x24a281[_0x53ce3f(0x203)]('\x0a');if(currentDatabase==='TicketsTransit'){let _0x193ac9={};for(let _0x9db57d=0x1;_0x9db57d<_0x52a59b[_0x53ce3f(0x286)];_0x9db57d++){if(!_0x52a59b[_0x9db57d][_0x53ce3f(0x248)]())continue;const _0x4f4229=_0x52a59b[_0x9db57d][_0x53ce3f(0x203)](','),_0x129792=_0x53ce3f(0x294)+Date[_0x53ce3f(0x26e)]()+'-'+_0x9db57d;_0x193ac9[_0x129792]={'id':_0x129792,'category':_0x4f4229[0x2]?_0x4f4229[0x2][_0x53ce3f(0x248)]():_0x53ce3f(0x24b),'password':_0x4f4229[0x1]?_0x4f4229[0x1][_0x53ce3f(0x248)]():'','price':'','user':_0x4f4229[0x0]?_0x4f4229[0x0]['trim']():''};}tempImportData={'tickets':_0x193ac9},tempCategory='TicketsTransit',showPriceModal('TicketsTransit\x20Import');}else{const _0x311cc7={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x468ecc=0x1;_0x468ecc<_0x52a59b[_0x53ce3f(0x286)];_0x468ecc++){if(!_0x52a59b[_0x468ecc]['trim']())continue;const _0x3d75ab=_0x52a59b[_0x468ecc][_0x53ce3f(0x203)](',');_0x311cc7[_0x53ce3f(0x280)][_0x53ce3f(0x26c)](_0x3d75ab[0x0][_0x53ce3f(0x248)]()),_0x311cc7[_0x53ce3f(0x217)]['push'](_0x3d75ab[0x1][_0x53ce3f(0x248)]()),_0x311cc7[_0x53ce3f(0x234)][_0x53ce3f(0x26c)](_0x3d75ab[0x3]?_0x3d75ab[0x3]['trim']():'');}_0x311cc7[_0x53ce3f(0x234)]['every'](_0x306d1f=>_0x306d1f==='')?(tempImportData={[_0x15f489]:_0x311cc7},tempCategory=_0x15f489,showPriceModal(_0x15f489)):mergeTicketsToCategory(_0x15f489,_0x311cc7);}}function handleTxtImportToCategory(_0x1d26ba,_0x412fc3){const _0x541a41=_0x35600b,_0x2d9edd=_0x1d26ba[_0x541a41(0x203)]('\x0a');let _0x42139b={};if(currentDatabase===_0x541a41(0x2a2)){const _0x243875=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x4d3195={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x41f885 of _0x2d9edd){_0x41f885=_0x41f885[_0x541a41(0x248)]();if(!_0x41f885||_0x41f885===_0x541a41(0x21c))continue;const _0x4d6d3c=_0x41f885[_0x541a41(0x272)](_0x243875);if(_0x4d6d3c){const [_0xcfe0b8,_0x4f9b13,_0x372641,_0x5cc6be]=_0x4d6d3c;_0x4d3195['utilisateur'][_0x541a41(0x26c)](_0x4f9b13),_0x4d3195[_0x541a41(0x217)][_0x541a41(0x26c)](_0x372641),_0x4d3195[_0x541a41(0x234)]['push'](_0x5cc6be);}}for(let _0x59f725=0x0;_0x59f725<_0x4d3195[_0x541a41(0x280)][_0x541a41(0x286)];_0x59f725++){const _0x19f3c0='id-'+Date[_0x541a41(0x26e)]()+'-'+_0x59f725;_0x42139b[_0x19f3c0]={'id':_0x19f3c0,'category':_0x541a41(0x23d),'password':_0x4d3195[_0x541a41(0x217)][_0x59f725],'price':'1','user':_0x4d3195[_0x541a41(0x280)][_0x59f725]};}Object['keys'](_0x42139b)['length']>0x0?mergeTicketsToCategory(null,_0x42139b):(hideLoading(),alert('Aucun\x20ticket\x20valide\x20trouvé\x20dans\x20le\x20fichier\x20pour\x20TicketsTransit'));}else{const _0x28acc7=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x3e119c of _0x2d9edd){_0x3e119c=_0x3e119c['trim']();if(!_0x3e119c||_0x3e119c==='/ip\x20hotspot\x20user')continue;const _0x373e2d=_0x3e119c[_0x541a41(0x272)](_0x28acc7);if(_0x373e2d){const [_0x475680,_0x4faf6e,_0x399938,_0x3d55da]=_0x373e2d;!_0x42139b[_0x412fc3]&&(_0x42139b[_0x412fc3]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x42139b[_0x412fc3][_0x541a41(0x280)][_0x541a41(0x26c)](_0x4faf6e),_0x42139b[_0x412fc3][_0x541a41(0x217)][_0x541a41(0x26c)](_0x399938);}}if(Object[_0x541a41(0x281)](_0x42139b)[_0x541a41(0x286)]===0x0){hideLoading(),alert(_0x541a41(0x251));return;}tempImportData=_0x42139b,showPriceModal(_0x412fc3);}}function mergeTicketsToCategory(_0x1b04f7,_0x3c3925){const _0x2d5360=_0x35600b;let _0x1155fa={};if(currentDatabase===_0x2d5360(0x2a2))for(let _0x11a813 in _0x3c3925){_0x1155fa[currentDatabase+'/'+_0x11a813]=_0x3c3925[_0x11a813];}else{!allTickets[_0x1b04f7]&&(allTickets[_0x1b04f7]={'motDePasse':[],'prix':[],'utilisateur':[]});const _0x292259=allTickets[_0x1b04f7],_0x38e35a={'motDePasse':[..._0x292259['motDePasse'],..._0x3c3925[_0x2d5360(0x217)]],'prix':[..._0x292259[_0x2d5360(0x234)],..._0x3c3925[_0x2d5360(0x234)]],'utilisateur':[..._0x292259[_0x2d5360(0x280)],..._0x3c3925[_0x2d5360(0x280)]]};_0x1155fa[currentDatabase+'/'+_0x1b04f7]=_0x38e35a;}database['ref']()['update'](_0x1155fa)[_0x2d5360(0x25f)](()=>{const _0x1e1536=_0x2d5360;hideLoading(),alert(_0x1e1536(0x2a5)+(_0x1b04f7||_0x1e1536(0x2a2))+'!');})[_0x2d5360(0x2ab)](_0x4d330b=>{const _0x126b07=_0x2d5360;console[_0x126b07(0x252)](_0x126b07(0x22b),_0x4d330b),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}function editCategory(_0x391ac5){const _0x35d194=_0x35600b;currentEditingCategory=_0x391ac5,document[_0x35d194(0x206)]('editCategoryName')[_0x35d194(0x1f1)]=_0x391ac5,document[_0x35d194(0x206)]('editCategoryModal')['style']['display']=_0x35d194(0x1ea);}function saveCategoryEdit(){const _0x3f8e0c=_0x35600b,_0x5c6b2e=document[_0x3f8e0c(0x206)](_0x3f8e0c(0x23f))['value']['trim']();if(!_0x5c6b2e){alert(_0x3f8e0c(0x29b));return;}if(_0x5c6b2e===currentEditingCategory){closeEditCategoryModal();return;}showLoading();const _0x42d725=allTickets[currentEditingCategory],_0x33fd54={[currentDatabase+'/'+currentEditingCategory]:null,[currentDatabase+'/'+_0x5c6b2e]:_0x42d725};database[_0x3f8e0c(0x1e9)]()[_0x3f8e0c(0x259)](_0x33fd54)[_0x3f8e0c(0x25f)](()=>{const _0x2f8d1c=_0x3f8e0c;hideLoading(),closeEditCategoryModal(),alert(_0x2f8d1c(0x23b));})[_0x3f8e0c(0x2ab)](_0x1bb32f=>{const _0x5672a7=_0x3f8e0c;console[_0x5672a7(0x252)](_0x5672a7(0x28a),_0x1bb32f),hideLoading(),alert(_0x5672a7(0x287));});}function showAddTicketModal(_0x9de07b){const _0x384923=_0x35600b;currentEditingCategory=_0x9de07b,document[_0x384923(0x206)](_0x384923(0x21e))[_0x384923(0x1f1)]='',document['getElementById']('newPrice')[_0x384923(0x1f1)]='',document[_0x384923(0x206)](_0x384923(0x29e))['value']='',document[_0x384923(0x206)](_0x384923(0x213))[_0x384923(0x1f1)]='',document[_0x384923(0x206)](_0x384923(0x265))[_0x384923(0x218)][_0x384923(0x275)]=_0x384923(0x1ea);}function saveNewTicket(){const _0x3b3e42=_0x35600b;showLoading();if(currentDatabase===_0x3b3e42(0x2a2)){const _0x59eb10=_0x3b3e42(0x294)+Date[_0x3b3e42(0x26e)](),_0x2db265={'id':_0x59eb10,'category':document['getElementById'](_0x3b3e42(0x213))[_0x3b3e42(0x1f1)]['trim'](),'password':document[_0x3b3e42(0x206)]('newPassword')[_0x3b3e42(0x1f1)][_0x3b3e42(0x248)](),'price':document['getElementById'](_0x3b3e42(0x27e))['value'][_0x3b3e42(0x248)](),'user':document[_0x3b3e42(0x206)](_0x3b3e42(0x29e))[_0x3b3e42(0x1f1)]['trim']()};database[_0x3b3e42(0x1e9)](currentDatabase+'/'+_0x59eb10)[_0x3b3e42(0x2a3)](_0x2db265)[_0x3b3e42(0x25f)](()=>{hideLoading(),closeAddTicketModal(),alert('Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTransit!');})[_0x3b3e42(0x2ab)](_0x4de601=>{const _0x3323d8=_0x3b3e42;console[_0x3323d8(0x252)](_0x3323d8(0x256),_0x4de601),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket');});}else{const _0x557f40=currentEditingCategory,_0x4efc11={'password':document[_0x3b3e42(0x206)](_0x3b3e42(0x21e))['value'][_0x3b3e42(0x248)](),'price':document['getElementById'](_0x3b3e42(0x27e))['value'][_0x3b3e42(0x248)](),'user':document[_0x3b3e42(0x206)](_0x3b3e42(0x29e))[_0x3b3e42(0x1f1)][_0x3b3e42(0x248)]()},_0x4ded68=allTickets[_0x557f40]||{'motDePasse':[],'prix':[],'utilisateur':[]};_0x4ded68[_0x3b3e42(0x217)][_0x3b3e42(0x26c)](_0x4efc11[_0x3b3e42(0x1ff)]),_0x4ded68[_0x3b3e42(0x234)]['push'](_0x4efc11['price']),_0x4ded68[_0x3b3e42(0x280)][_0x3b3e42(0x26c)](_0x4efc11[_0x3b3e42(0x263)]),database[_0x3b3e42(0x1e9)](currentDatabase+'/'+_0x557f40)[_0x3b3e42(0x2a3)](_0x4ded68)['then'](()=>{const _0x29468b=_0x3b3e42;hideLoading(),closeAddTicketModal(),alert(_0x29468b(0x244));})[_0x3b3e42(0x2ab)](_0x28728a=>{const _0x5337c7=_0x3b3e42;console['error'](_0x5337c7(0x256),_0x28728a),hideLoading(),alert(_0x5337c7(0x269));});}}function closeEditModal(){const _0x3aa196=_0x35600b;document[_0x3aa196(0x206)]('editTicketModal')[_0x3aa196(0x218)][_0x3aa196(0x275)]=_0x3aa196(0x208),editingCategory='',editingIndex=-0x1;}function closeEditCategoryModal(){const _0x4abfa6=_0x35600b;document[_0x4abfa6(0x206)](_0x4abfa6(0x277))[_0x4abfa6(0x218)][_0x4abfa6(0x275)]=_0x4abfa6(0x208),currentEditingCategory=null;}function closeAddTicketModal(){const _0x39e31c=_0x35600b;document[_0x39e31c(0x206)]('addTicketModal')[_0x39e31c(0x218)][_0x39e31c(0x275)]='none',currentEditingCategory=null;}function matchesSearchTotal(_0x24cee6,_0x58b8e2,_0xb2123f){const _0xddb430=_0x35600b,_0x22da4e=_0xb2123f['toLowerCase']();return _0x24cee6[_0xddb430(0x217)][_0x58b8e2][_0xddb430(0x214)]()[_0xddb430(0x28c)](_0x22da4e)||_0x24cee6[_0xddb430(0x234)][_0x58b8e2]['toLowerCase']()['includes'](_0x22da4e)||_0x24cee6[_0xddb430(0x280)][_0x58b8e2][_0xddb430(0x214)]()[_0xddb430(0x28c)](_0x22da4e);}function matchesSearchTransit(_0x275bde,_0x370896){const _0x2e4584=_0x35600b,_0x241955=_0x370896['toLowerCase']();return _0x275bde['id']&&_0x275bde['id'][_0x2e4584(0x214)]()[_0x2e4584(0x28c)](_0x241955)||_0x275bde[_0x2e4584(0x242)]&&_0x275bde['category'][_0x2e4584(0x214)]()['includes'](_0x241955)||_0x275bde[_0x2e4584(0x1ff)]&&_0x275bde[_0x2e4584(0x1ff)][_0x2e4584(0x214)]()['includes'](_0x241955)||_0x275bde['price']&&_0x275bde['price'][_0x2e4584(0x214)]()['includes'](_0x241955)||_0x275bde[_0x2e4584(0x263)]&&_0x275bde[_0x2e4584(0x263)][_0x2e4584(0x214)]()[_0x2e4584(0x28c)](_0x241955);}function matchesSearch(_0x4f05d7,_0x192ce7,_0x47740a){const _0x46e599=_0x35600b;if(currentDatabase===_0x46e599(0x253))return matchesSearchTotal(_0x4f05d7,_0x192ce7,_0x47740a);else{if(currentDatabase===_0x46e599(0x2a2))return matchesSearchTransit(_0x4f05d7,_0x47740a);}return![];}function highlightMatch(_0x17b82f,_0x371ad7){const _0x4ea43c=_0x35600b;if(!_0x371ad7)return _0x17b82f;const _0x184c4a=new RegExp(_0x371ad7,'gi');return _0x17b82f[_0x4ea43c(0x215)](_0x184c4a,_0x451174=>_0x4ea43c(0x285)+_0x451174+'</span>');}function deleteTicket(_0x31bfaa,_0x214622,_0x3af670){const _0x2f1df8=_0x35600b;if(confirm(_0x2f1df8(0x296))){showLoading();if(currentDatabase===_0x2f1df8(0x2a2))database[_0x2f1df8(0x1e9)](currentDatabase+'/'+_0x3af670)[_0x2f1df8(0x243)]()[_0x2f1df8(0x25f)](()=>{const _0x4f05a7=_0x2f1df8;hideLoading(),alert(_0x4f05a7(0x270));})[_0x2f1df8(0x2ab)](_0x25c2ac=>{const _0x35c14a=_0x2f1df8;console[_0x35c14a(0x252)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x25c2ac),hideLoading(),alert(_0x35c14a(0x28b));});else{const _0x45bdb0=allTickets[_0x31bfaa];_0x45bdb0['motDePasse']['splice'](_0x214622,0x1),_0x45bdb0[_0x2f1df8(0x234)]['splice'](_0x214622,0x1),_0x45bdb0[_0x2f1df8(0x280)][_0x2f1df8(0x237)](_0x214622,0x1),database[_0x2f1df8(0x1e9)](currentDatabase+'/'+_0x31bfaa)['set'](_0x45bdb0)[_0x2f1df8(0x25f)](()=>{hideLoading(),alert('Ticket\x20supprimé\x20avec\x20succès!');})[_0x2f1df8(0x2ab)](_0x45650b=>{const _0x1eaf95=_0x2f1df8;console[_0x1eaf95(0x252)](_0x1eaf95(0x211),_0x45650b),hideLoading(),alert(_0x1eaf95(0x28b));});}}}function deleteSelectedTickets(_0x3cfb2c){const _0x33c632=_0x35600b,_0x21fb4e=document['querySelectorAll'](_0x33c632(0x29d)+(_0x3cfb2c||'Transit')+_0x33c632(0x225));if(_0x21fb4e[_0x33c632(0x286)]===0x0){alert('Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20supprimer');return;}if(confirm(_0x33c632(0x22d))){showLoading();const _0x5469d5={};if(currentDatabase===_0x33c632(0x2a2))_0x21fb4e[_0x33c632(0x1ef)](_0x20d473=>{const _0x4ae2a0=_0x33c632,_0x42ece4=_0x20d473[_0x4ae2a0(0x1f1)];_0x5469d5[currentDatabase+'/'+_0x42ece4]=null;});else{const _0x914d68=allTickets[_0x3cfb2c],_0x384fe5=Array[_0x33c632(0x2aa)](_0x21fb4e)['map'](_0x1aa66=>parseInt(_0x1aa66[_0x33c632(0x1f1)]))['sort']((_0x4bbc86,_0x56ecf9)=>_0x56ecf9-_0x4bbc86);_0x384fe5[_0x33c632(0x1ef)](_0x5dc428=>{const _0x131413=_0x33c632;_0x914d68[_0x131413(0x217)][_0x131413(0x237)](_0x5dc428,0x1),_0x914d68[_0x131413(0x234)]['splice'](_0x5dc428,0x1),_0x914d68[_0x131413(0x280)][_0x131413(0x237)](_0x5dc428,0x1);}),_0x5469d5[currentDatabase+'/'+_0x3cfb2c]=_0x914d68;}database[_0x33c632(0x1e9)]()['update'](_0x5469d5)['then'](()=>{hideLoading(),alert('Tickets\x20sélectionnés\x20supprimés\x20avec\x20succès!');})[_0x33c632(0x2ab)](_0x4a3230=>{const _0x58f0ae=_0x33c632;console[_0x58f0ae(0x252)](_0x58f0ae(0x211),_0x4a3230),hideLoading(),alert('Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets');});}}function editSelectedTickets(_0x13d1b1){const _0x27c969=_0x35600b,_0x47cc28=document['querySelectorAll']('input[name^=\x22ticketSelect_'+(_0x13d1b1||'Transit')+_0x27c969(0x225));if(_0x47cc28[_0x27c969(0x286)]===0x0){alert(_0x27c969(0x24f));return;}window[_0x27c969(0x1ee)]={'category':_0x13d1b1,'tickets':[]};if(currentDatabase==='TicketsTransit')_0x47cc28['forEach'](_0x1680a3=>{const _0x1c70c8=_0x27c969,_0x3fe150=_0x1680a3[_0x1c70c8(0x1f1)];window[_0x1c70c8(0x1ee)]['tickets'][_0x1c70c8(0x26c)]({'id':_0x3fe150,'data':allTickets[_0x3fe150]});});else{const _0x951a92=Array['from'](_0x47cc28)[_0x27c969(0x278)](_0x147330=>parseInt(_0x147330[_0x27c969(0x1f1)]));window[_0x27c969(0x1ee)][_0x27c969(0x233)]=_0x951a92[_0x27c969(0x278)](_0x19d220=>({'index':_0x19d220,'data':{'password':allTickets[_0x13d1b1][_0x27c969(0x217)][_0x19d220],'price':allTickets[_0x13d1b1][_0x27c969(0x234)][_0x19d220],'user':allTickets[_0x13d1b1]['utilisateur'][_0x19d220]}}));}document[_0x27c969(0x206)](_0x27c969(0x223))[_0x27c969(0x218)][_0x27c969(0x275)]=_0x27c969(0x1ea);}function saveBulkEdit(){const _0x1d86c7=_0x35600b,_0x49bd82=document[_0x1d86c7(0x206)]('bulkEditCategory')[_0x1d86c7(0x1f1)]['trim'](),_0x327fa7=document[_0x1d86c7(0x206)]('bulkEditPassword')['value'][_0x1d86c7(0x248)](),_0x18058e=document[_0x1d86c7(0x206)](_0x1d86c7(0x246))['value']['trim'](),_0x344b4b=document[_0x1d86c7(0x206)](_0x1d86c7(0x27b))[_0x1d86c7(0x1f1)][_0x1d86c7(0x248)]();showLoading();const _0x10b689={};if(currentDatabase===_0x1d86c7(0x2a2))window[_0x1d86c7(0x1ee)][_0x1d86c7(0x233)]['forEach'](_0x124be6=>{const _0x4bb83c=_0x1d86c7,_0x1bd070={..._0x124be6['data'],'category':_0x49bd82||_0x124be6[_0x4bb83c(0x2a9)][_0x4bb83c(0x242)],'password':_0x327fa7||_0x124be6['data']['password'],'price':_0x18058e||_0x124be6['data'][_0x4bb83c(0x1fb)],'user':_0x344b4b||_0x124be6['data'][_0x4bb83c(0x263)]};_0x10b689[currentDatabase+'/'+_0x124be6['id']]=_0x1bd070;});else{const _0x5b08e2=window['selectedTicketsData'][_0x1d86c7(0x242)],_0x106b63=allTickets[_0x5b08e2];window['selectedTicketsData'][_0x1d86c7(0x233)][_0x1d86c7(0x1ef)](_0x578934=>{const _0xc19beb=_0x1d86c7;if(_0x327fa7)_0x106b63[_0xc19beb(0x217)][_0x578934[_0xc19beb(0x261)]]=_0x327fa7;if(_0x18058e)_0x106b63[_0xc19beb(0x234)][_0x578934[_0xc19beb(0x261)]]=_0x18058e;if(_0x344b4b)_0x106b63['utilisateur'][_0x578934[_0xc19beb(0x261)]]=_0x344b4b;}),_0x10b689[currentDatabase+'/'+_0x5b08e2]=_0x106b63;}database[_0x1d86c7(0x1e9)]()[_0x1d86c7(0x259)](_0x10b689)[_0x1d86c7(0x25f)](()=>{const _0x40ebac=_0x1d86c7;hideLoading(),closeBulkEditModal(),alert(_0x40ebac(0x236));})[_0x1d86c7(0x2ab)](_0x9ae236=>{const _0x1bb117=_0x1d86c7;console[_0x1bb117(0x252)](_0x1bb117(0x25b),_0x9ae236),hideLoading(),alert(_0x1bb117(0x257));});}function closeBulkEditModal(){const _0x21d794=_0x35600b;document[_0x21d794(0x206)](_0x21d794(0x223))[_0x21d794(0x218)][_0x21d794(0x275)]=_0x21d794(0x208),window[_0x21d794(0x1ee)]=null;}function deleteAllTicketsInCategory(_0x11f8a1){const _0x3e7ac6=_0x35600b;confirm(_0x3e7ac6(0x25e)+(_0x11f8a1||_0x3e7ac6(0x2a2))+'\x20?')&&(showLoading(),currentDatabase==='TicketsTransit'?database[_0x3e7ac6(0x1e9)](currentDatabase)['set']({})[_0x3e7ac6(0x25f)](()=>{const _0xa42bac=_0x3e7ac6;hideLoading(),alert(_0xa42bac(0x239));})[_0x3e7ac6(0x2ab)](_0x26fc8a=>{const _0x3311f7=_0x3e7ac6;console[_0x3311f7(0x252)](_0x3311f7(0x211),_0x26fc8a),hideLoading(),alert(_0x3311f7(0x21b));}):database['ref'](currentDatabase+'/'+_0x11f8a1)[_0x3e7ac6(0x2a3)]({'motDePasse':[],'prix':[],'utilisateur':[]})[_0x3e7ac6(0x25f)](()=>{const _0xac7a10=_0x3e7ac6;hideLoading(),alert(_0xac7a10(0x232));})['catch'](_0x235b0a=>{const _0xa4b66e=_0x3e7ac6;console[_0xa4b66e(0x252)]('Erreur\x20lors\x20de\x20la\x20suppression:',_0x235b0a),hideLoading(),alert(_0xa4b66e(0x21b));}));}function _0x24dd(){const _0x3e7538=['stringify','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20tous\x20les\x20tickets\x20correspondant\x20à\x20votre\x20recherche\x20?','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?','files','textContent','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20la\x20suppression:','Êtes-vous\x20sûr\x20de\x20vouloir\x20importer\x20ces\x20tickets\x20?\x20Les\x20nouveaux\x20tickets\x20seront\x20ajoutés\x20aux\x20tickets\x20existants.','newCategory','toLowerCase','replace','loadingIndicator','motDePasse','style','name','editPassword','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20tickets','/ip\x20hotspot\x20user','persisted','newPassword','isLoggedIn','target','Format\x20JSON\x20invalide\x20pour\x20TicketsTransit','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20vérifier\x20le\x20format\x20du\x20fichier.','bulkEditModal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTransit(\x27','\x22]:checked','TicketsTransit\x20Import','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche.\x20Veuillez\x20réessayer.','\x27)\x22>Supprimer\x20les\x20tickets\x20sélectionnés\x20de\x20','csv','1396872xNmDKr','Erreur\x20lors\x20de\x20l\x27importation:','filtered_tickets_export_','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20les\x20tickets\x20sélectionnés\x20?','innerHTML','1627326yddgRC','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20accept=\x22.json,.csv,.txt\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27','cyber-campus-2706f.appspot.com','Tous\x20les\x20tickets\x20de\x20la\x20catégorie\x20ont\x20été\x20supprimés\x20avec\x20succès!','tickets','prix','719410601264','Tickets\x20sélectionnés\x20modifiés\x20avec\x20succès!','splice','Erreur\x20d\x27importation:','Tous\x20les\x20tickets\x20ont\x20été\x20supprimés\x20avec\x20succès!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(null)\x22>Supprimer\x20les\x20tickets\x20sélectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Catégorie\x20modifiée\x20avec\x20succès!','indexOf','Cadeau','off','editCategoryName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteSelectedTickets(\x27','parse','category','remove','Ticket\x20ajouté\x20avec\x20succès\x20dans\x20TicketsTotal!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>','bulkEditPrice',',null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Supprimer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trim','Format\x20de\x20fichier\x20non\x20supporté','addEventListener','N/A','click','Veuillez\x20entrer\x20un\x20prix','database','Veuillez\x20sélectionner\x20au\x20moins\x20un\x20ticket\x20à\x20modifier','editPrice','Aucun\x20ticket\x20valide\x20n\x27a\x20été\x20trouvé\x20dans\x20le\x20fichier','error','TicketsTotal','onload','Format\x20JSON\x20invalide\x20pour\x20TicketsTotal','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket:','Erreur\x20lors\x20de\x20la\x20modification\x20groupée\x20des\x20tickets','8qkIAVG','update','txt','Erreur\x20lors\x20de\x20la\x20modification\x20groupée:','tickets_export_','AIzaSyB6AUBnK_7Vy2ABWI2JMo3ebG_Sljr8XlY','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20TOUS\x20les\x20tickets\x20de\x20','then','738LPqSge','index','appendChild','user','11074830pwdLoK','addTicketModal','Ticket\x20introuvable.','Veuillez\x20entrer\x20un\x20terme\x20de\x20recherche\x20avant\x20de\x20supprimer.','9823163YRBzBy','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20ticket','https://cyber-campus-2706f-default-rtdb.firebaseio.com','Les\x20tickets\x20correspondant\x20à\x20la\x20recherche\x20ont\x20été\x20supprimés.','push','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','now','Seuls\x20les\x20fichiers\x20.txt\x20sont\x20autorisés\x20pour\x20TicketsTransit','Ticket\x20supprimé\x20avec\x20succès!','importFile','match','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_Transit\x22\x20value=\x22','Erreur\x20lors\x20de\x20la\x20suppression\x20des\x20résultats\x20de\x20recherche:','display','getItem','editCategoryModal','map','.txt,.json','cyber-campus-2706f.firebaseapp.com','bulkEditUser','databaseSelect','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20onclick=\x22editTicketTotal(\x27','newPrice','editId','utilisateur','keys','priceInput','json','Ticket\x20modifié\x20avec\x20succès!','<span\x20class=\x22highlight\x22>','length','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie','accept',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(\x27','Erreur\x20lors\x20de\x20la\x20modification\x20de\x20la\x20catégorie:','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20ticket','includes','Erreur\x20lors\x20de\x20la\x20modification:','\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','body','.json','clear','login.html','Importation\x20réussie\x20!','id-','8405ZmVGkT','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20ce\x20ticket\x20?','readAsText','\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20','\x27)\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(\x27','setAttribute','Le\x20nom\x20de\x20la\x20catégorie\x20ne\x20peut\x20pas\x20être\x20vide','editTicketModal','input[name^=\x22ticketSelect_','newUser','\x27,\x20event)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(\x27','\x27)\x22>Supprimer\x20tous\x20les\x20tickets\x20de\x20','priceModal','TicketsTransit','set','15bBLqlO','Importation\x20réussie\x20dans\x20','categoryName','Erreur\x20lors\x20du\x20chargement\x20des\x20tickets.\x20Veuillez\x20réessayer.','editCategory','data','from','catch','Erreur\x20lors\x20de\x20la\x20modification\x20du\x20ticket','ref','block','editUser','flex','fill','selectedTicketsData','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22importFile_','value','pop','2447216WWaKMD','data:text/json;charset=utf-8,','Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.','553560OwNqZa','location','createElement','download','G-CEEFJP5LYZ','price','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20name=\x22ticketSelect_','</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22editSelectedTickets(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22category-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Tickets\x20en\x20transit</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22add-ticket-btn\x22\x20onclick=\x22showAddTicketModal(null)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_Transit\x22\x20class=\x22file-input-label\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-import\x22></i>\x20Importer\x20dans\x20TicketsTransit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a<input\x20type=\x22file\x22\x20id=\x22importFile_Transit\x22\x20\x0a\x20\x20\x20\x20accept=\x22.txt,.json\x22\x20\x0a\x20\x20\x20\x20style=\x22display:\x20none;\x22\x20\x0a\x20\x20\x20\x20onchange=\x22importTicketsToCategory(\x27TicketsTransit\x27,\x20event)\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteAllTicketsInCategory(null)\x22>Supprimer\x20tous\x20les\x20tickets</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22editSelectedTickets(null)\x22>Modifier\x20les\x20tickets\x20selectionnés</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Sélectionner</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ID</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Catégorie</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Mot\x20de\x20passe</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Prix</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Utilisateur</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Actions</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22ticketsBody_Transit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','password','pageshow','ticketCategories','result','split','searchBar','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-plus\x22></i>\x20Ajouter\x20un\x20ticket\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22importFile_','getElementById','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Modifier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20onclick=\x22deleteTicket(null,null,\x20\x27','none','\x27,\x20'];_0x24dd=function(){return _0x3e7538;};return _0x24dd();}function exportTickets(){const _0x529c40=_0x35600b,_0x26cf99=_0x529c40(0x1f4)+encodeURIComponent(JSON[_0x529c40(0x20a)](allTickets,null,0x2)),_0x11092c=document[_0x529c40(0x1f8)]('a');_0x11092c[_0x529c40(0x29a)]('href',_0x26cf99),_0x11092c['setAttribute'](_0x529c40(0x1f9),_0x529c40(0x25c)+currentDatabase+_0x529c40(0x290)),document['body']['appendChild'](_0x11092c),_0x11092c[_0x529c40(0x24c)](),_0x11092c['remove']();}function exportFilteredTickets(){const _0xaa7378=_0x35600b,_0x28cc86=document[_0xaa7378(0x206)](_0xaa7378(0x204))['value'][_0xaa7378(0x248)](),_0x2c45d4={};if(currentDatabase===_0xaa7378(0x2a2))for(let _0x5bdd10 in allTickets){(!_0x28cc86||matchesSearchTransit(allTickets[_0x5bdd10],_0x28cc86))&&(_0x2c45d4[_0x5bdd10]=allTickets[_0x5bdd10]);}else for(let _0x2a5694 in allTickets){const _0x65249f=allTickets[_0x2a5694];_0x2c45d4[_0x2a5694]={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x384c61=0x0;_0x384c61<_0x65249f[_0xaa7378(0x217)][_0xaa7378(0x286)];_0x384c61++){(!_0x28cc86||matchesSearchTotal(_0x65249f,_0x384c61,_0x28cc86))&&(_0x2c45d4[_0x2a5694][_0xaa7378(0x217)][_0xaa7378(0x26c)](_0x65249f[_0xaa7378(0x217)][_0x384c61]),_0x2c45d4[_0x2a5694][_0xaa7378(0x234)][_0xaa7378(0x26c)](_0x65249f['prix'][_0x384c61]),_0x2c45d4[_0x2a5694][_0xaa7378(0x280)][_0xaa7378(0x26c)](_0x65249f['utilisateur'][_0x384c61]));}}const _0x204811=_0xaa7378(0x1f4)+encodeURIComponent(JSON[_0xaa7378(0x20a)](_0x2c45d4,null,0x2)),_0x90b287=document[_0xaa7378(0x1f8)]('a');_0x90b287['setAttribute']('href',_0x204811),_0x90b287[_0xaa7378(0x29a)](_0xaa7378(0x1f9),_0xaa7378(0x22c)+currentDatabase+_0xaa7378(0x290)),document[_0xaa7378(0x28f)][_0xaa7378(0x262)](_0x90b287),_0x90b287[_0xaa7378(0x24c)](),_0x90b287['remove']();}function handleJsonImport(_0x4a9293){const _0x400e0d=_0x35600b,_0x18d7b5=JSON[_0x400e0d(0x241)](_0x4a9293);if(confirm(_0x400e0d(0x212))){(!allTickets||Object[_0x400e0d(0x281)](allTickets)[_0x400e0d(0x286)]===0x0)&&(allTickets=currentDatabase==='TicketsTransit'?{}:{});const _0x44e250={};for(let _0x497439 in _0x18d7b5){allTickets[_0x497439]?_0x44e250[currentDatabase+'/'+_0x497439]={'motDePasse':[...allTickets[_0x497439]['motDePasse'],..._0x18d7b5[_0x497439][_0x400e0d(0x217)]],'prix':[...allTickets[_0x497439]['prix'],..._0x18d7b5[_0x497439][_0x400e0d(0x234)]],'utilisateur':[...allTickets[_0x497439][_0x400e0d(0x280)],..._0x18d7b5[_0x497439][_0x400e0d(0x280)]]}:_0x44e250[currentDatabase+'/'+_0x497439]=_0x18d7b5[_0x497439];}database[_0x400e0d(0x1e9)]()[_0x400e0d(0x259)](_0x44e250)[_0x400e0d(0x25f)](()=>{const _0x19e76a=_0x400e0d;hideLoading(),alert(_0x19e76a(0x293));})[_0x400e0d(0x2ab)](_0xd67400=>{const _0x435db4=_0x400e0d;console[_0x435db4(0x252)](_0x435db4(0x22b),_0xd67400),hideLoading(),alert('Erreur\x20lors\x20de\x20l\x27importation.\x20Veuillez\x20réessayer.');});}else hideLoading();}function handleCsvImport(_0xcba93a){const _0x162706=_0x35600b,_0x18bd53=_0xcba93a[_0x162706(0x203)]('\x0a');let _0x4b162d={};if(currentDatabase===_0x162706(0x2a2)){for(let _0x4db6d6=0x1;_0x4db6d6<_0x18bd53[_0x162706(0x286)];_0x4db6d6++){if(!_0x18bd53[_0x4db6d6][_0x162706(0x248)]())continue;const _0x4e618f=_0x18bd53[_0x4db6d6][_0x162706(0x203)](','),_0x15b507=_0x4e618f[0x0]?_0x4e618f[0x0][_0x162706(0x248)]():'id-'+Date[_0x162706(0x26e)]()+'-'+_0x4db6d6;_0x4b162d[_0x15b507]={'id':_0x15b507,'category':_0x4e618f[0x1]?_0x4e618f[0x1][_0x162706(0x248)]():_0x162706(0x24b),'password':_0x4e618f[0x2]?_0x4e618f[0x2][_0x162706(0x248)]():'','price':_0x4e618f[0x3]?_0x4e618f[0x3][_0x162706(0x248)]():'','user':_0x4e618f[0x4]?_0x4e618f[0x4][_0x162706(0x248)]():''};}tempImportData={'tickets':_0x4b162d},tempCategory='TicketsTransit',showPriceModal('TicketsTransit\x20Import');}else{for(let _0x3bf331=0x1;_0x3bf331<_0x18bd53[_0x162706(0x286)];_0x3bf331++){if(!_0x18bd53[_0x3bf331][_0x162706(0x248)]())continue;const _0x1df672=_0x18bd53[_0x3bf331]['split'](','),_0x4019aa=_0x1df672[0x2][_0x162706(0x248)]();!_0x4b162d[_0x4019aa]&&(_0x4b162d[_0x4019aa]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x4b162d[_0x4019aa]['utilisateur'][_0x162706(0x26c)](_0x1df672[0x0][_0x162706(0x248)]()),_0x4b162d[_0x4019aa][_0x162706(0x217)]['push'](_0x1df672[0x1][_0x162706(0x248)]());}tempImportData=_0x4b162d;const _0x1ed268=Object[_0x162706(0x281)](_0x4b162d)[0x0];showPriceModal(_0x1ed268);}}function handleTxtImport(_0x3b2d82){const _0x3b6b5a=_0x35600b,_0xc73f8a=_0x3b2d82['split']('\x0a');let _0x52df13={};if(currentDatabase===_0x3b6b5a(0x2a2)){const _0x368d00=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;let _0x521034=[];for(let _0x1652e4 of _0xc73f8a){_0x1652e4=_0x1652e4['trim']();if(!_0x1652e4||_0x1652e4===_0x3b6b5a(0x21c))continue;const _0x475899=_0x1652e4['match'](_0x368d00);if(_0x475899){const [_0xca01d3,_0x1d3d61,_0xcb203a,_0x4b01bf]=_0x475899;_0x521034[_0x3b6b5a(0x26c)]({'category':_0x4b01bf,'password':_0xcb203a,'user':_0x1d3d61});}}tempImportData={'tickets':_0x521034},tempCategory='TicketsTransit',showPriceModal(_0x3b6b5a(0x226));}else{const _0x3d7e43=/add name="([^"]+)" password="([^"]+)" profile="([^"]+)"/;for(let _0x574d5d of _0xc73f8a){_0x574d5d=_0x574d5d[_0x3b6b5a(0x248)]();if(!_0x574d5d||_0x574d5d===_0x3b6b5a(0x21c))continue;const _0x52c787=_0x574d5d['match'](_0x3d7e43);if(_0x52c787){const [_0x13e1dc,_0x2f70dc,_0x340f8b,_0x350cb1]=_0x52c787;!_0x52df13[_0x350cb1]&&(_0x52df13[_0x350cb1]={'motDePasse':[],'prix':[],'utilisateur':[]}),_0x52df13[_0x350cb1][_0x3b6b5a(0x280)]['push'](_0x2f70dc),_0x52df13[_0x350cb1][_0x3b6b5a(0x217)][_0x3b6b5a(0x26c)](_0x340f8b);}}if(Object[_0x3b6b5a(0x281)](_0x52df13)[_0x3b6b5a(0x286)]===0x0){hideLoading(),alert(_0x3b6b5a(0x251));return;}tempImportData=_0x52df13;const _0x1c520a=Object[_0x3b6b5a(0x281)](_0x52df13)[0x0];showPriceModal(_0x1c520a);}}function showPriceModal(_0x46fe65){const _0x45d46b=_0x35600b;tempCategory=_0x46fe65,document[_0x45d46b(0x206)](_0x45d46b(0x2a6))[_0x45d46b(0x20f)]=_0x46fe65,document['getElementById'](_0x45d46b(0x2a1))[_0x45d46b(0x218)][_0x45d46b(0x275)]=_0x45d46b(0x1ea),document[_0x45d46b(0x206)]('priceInput')[_0x45d46b(0x1f1)]='';}function confirmPrice(){const _0x2022af=_0x35600b,_0x4693b7=document[_0x2022af(0x206)](_0x2022af(0x282))['value']['trim']();if(!_0x4693b7){alert(_0x2022af(0x24d));return;}if(currentDatabase===_0x2022af(0x2a2)){for(let _0x5aa2fb in tempImportData[_0x2022af(0x233)]){tempImportData[_0x2022af(0x233)][_0x5aa2fb]['price']=_0x4693b7;}finishImportTransit();}else{tempImportData[tempCategory][_0x2022af(0x234)]=Array(tempImportData[tempCategory][_0x2022af(0x217)][_0x2022af(0x286)])[_0x2022af(0x1ed)](_0x4693b7);const _0x5c761d=Object[_0x2022af(0x281)](tempImportData),_0x545aaa=_0x5c761d[_0x2022af(0x23c)](tempCategory);_0x545aaa<_0x5c761d[_0x2022af(0x286)]-0x1?(document[_0x2022af(0x206)]('priceInput')[_0x2022af(0x1f1)]='',showPriceModal(_0x5c761d[_0x545aaa+0x1])):finishImport();}}function cancelImport(){const _0x39e260=_0x35600b;document[_0x39e260(0x206)](_0x39e260(0x2a1))[_0x39e260(0x218)]['display']=_0x39e260(0x208),currentDatabase===_0x39e260(0x2a2)&&(tempImportData=null),document['getElementById']('importFile')[_0x39e260(0x1f1)]='',tempCategory=null,hideLoading();}function finishImportTransit(){const _0x3f3cfa=_0x35600b;if(confirm(_0x3f3cfa(0x20d))){(!allTickets||Object['keys'](allTickets)['length']===0x0)&&(allTickets={});const _0x51b4a0={};for(let _0x1a1590 in tempImportData['tickets']){_0x51b4a0[currentDatabase+'/'+_0x1a1590]=tempImportData[_0x3f3cfa(0x233)][_0x1a1590];};database[_0x3f3cfa(0x1e9)]()[_0x3f3cfa(0x259)](_0x51b4a0)[_0x3f3cfa(0x25f)](()=>{const _0x512073=_0x3f3cfa;document[_0x512073(0x206)](_0x512073(0x2a1))[_0x512073(0x218)][_0x512073(0x275)]=_0x512073(0x208),document['getElementById'](_0x512073(0x271))[_0x512073(0x1f1)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x512073(0x293));})[_0x3f3cfa(0x2ab)](_0x35d599=>{const _0x192ef3=_0x3f3cfa;console['error'](_0x192ef3(0x22b),_0x35d599),hideLoading(),alert(_0x192ef3(0x1f5));});}else cancelImport();}function finishImport(){const _0x32b739=_0x35600b;if(confirm(_0x32b739(0x212))){(!allTickets||Object[_0x32b739(0x281)](allTickets)[_0x32b739(0x286)]===0x0)&&(allTickets={});const _0x266904={};for(let _0x257ff9 in tempImportData){allTickets[_0x257ff9]?_0x266904[currentDatabase+'/'+_0x257ff9]={'motDePasse':[...allTickets[_0x257ff9][_0x32b739(0x217)],...tempImportData[_0x257ff9][_0x32b739(0x217)]],'prix':[...allTickets[_0x257ff9][_0x32b739(0x234)],...tempImportData[_0x257ff9]['prix']],'utilisateur':[...allTickets[_0x257ff9][_0x32b739(0x280)],...tempImportData[_0x257ff9]['utilisateur']]}:_0x266904[currentDatabase+'/'+_0x257ff9]=tempImportData[_0x257ff9];}database[_0x32b739(0x1e9)]()['update'](_0x266904)[_0x32b739(0x25f)](()=>{const _0x3556cc=_0x32b739;document[_0x3556cc(0x206)](_0x3556cc(0x2a1))[_0x3556cc(0x218)][_0x3556cc(0x275)]='none',document[_0x3556cc(0x206)](_0x3556cc(0x271))[_0x3556cc(0x1f1)]='',tempImportData=null,tempCategory=null,hideLoading(),alert(_0x3556cc(0x293));})['catch'](_0x5ba248=>{const _0x14aa62=_0x32b739;console[_0x14aa62(0x252)]('Erreur\x20lors\x20de\x20l\x27importation:',_0x5ba248),hideLoading(),alert(_0x14aa62(0x1f5));});}else cancelImport();}function importTickets(_0x175b72){const _0x439f2e=_0x35600b,_0x382a24=_0x175b72['target']['files'][0x0];if(!_0x382a24)return;showLoading();const _0x376db0=new FileReader();_0x376db0[_0x439f2e(0x254)]=function(_0x3cc634){const _0x2a4303=_0x439f2e;try{const _0x5bcb62=_0x382a24[_0x2a4303(0x219)][_0x2a4303(0x203)]('.')[_0x2a4303(0x1f2)]()[_0x2a4303(0x214)]();if(_0x5bcb62===_0x2a4303(0x283))handleJsonImport(_0x3cc634[_0x2a4303(0x220)]['result']);else{if(_0x5bcb62===_0x2a4303(0x229))handleCsvImport(_0x3cc634[_0x2a4303(0x220)][_0x2a4303(0x202)]);else{if(_0x5bcb62===_0x2a4303(0x25a))handleTxtImport(_0x3cc634[_0x2a4303(0x220)][_0x2a4303(0x202)]);else throw new Error(_0x2a4303(0x249));}}}catch(_0x13d580){console['error']('Erreur\x20d\x27importation:',_0x13d580),hideLoading(),alert(_0x2a4303(0x222));}},_0x376db0['readAsText'](_0x382a24);}function deleteSearchResults(){const _0x31f341=_0x35600b,_0x404e87=document[_0x31f341(0x206)](_0x31f341(0x204))['value'][_0x31f341(0x248)]();if(!_0x404e87){alert(_0x31f341(0x267));return;}if(confirm(_0x31f341(0x20b))){showLoading();const _0x2a0210={};if(currentDatabase===_0x31f341(0x2a2))for(let _0x5600b3 in allTickets){matchesSearchTransit(allTickets[_0x5600b3],_0x404e87)&&(_0x2a0210[currentDatabase+'/'+_0x5600b3]=null);}else for(let _0x43c314 in allTickets){const _0x4d570a=allTickets[_0x43c314],_0x26eff9={'motDePasse':[],'prix':[],'utilisateur':[]};for(let _0x5237f8=0x0;_0x5237f8<_0x4d570a['motDePasse'][_0x31f341(0x286)];_0x5237f8++){!matchesSearchTotal(_0x4d570a,_0x5237f8,_0x404e87)&&(_0x26eff9[_0x31f341(0x217)][_0x31f341(0x26c)](_0x4d570a[_0x31f341(0x217)][_0x5237f8]),_0x26eff9[_0x31f341(0x234)]['push'](_0x4d570a['prix'][_0x5237f8]),_0x26eff9['utilisateur'][_0x31f341(0x26c)](_0x4d570a[_0x31f341(0x280)][_0x5237f8]));}_0x2a0210[currentDatabase+'/'+_0x43c314]=_0x26eff9;}database[_0x31f341(0x1e9)]()['update'](_0x2a0210)[_0x31f341(0x25f)](()=>{const _0xf9223c=_0x31f341;hideLoading(),alert(_0xf9223c(0x26b));})[_0x31f341(0x2ab)](_0x3ce243=>{const _0x506dee=_0x31f341;console[_0x506dee(0x252)](_0x506dee(0x274),_0x3ce243),hideLoading(),alert(_0x506dee(0x227));});}}function searchTickets(){const _0x5ba0e6=_0x35600b,_0x5e0ca6=document[_0x5ba0e6(0x206)](_0x5ba0e6(0x204))[_0x5ba0e6(0x1f1)]['trim']();displayTickets(allTickets,_0x5e0ca6);}function checkAuth(){const _0x80184c=_0x35600b,_0x5371c7=sessionStorage['getItem'](_0x80184c(0x21f));if(!_0x5371c7)return window[_0x80184c(0x1f7)][_0x80184c(0x215)](_0x80184c(0x292)),![];return!![];}function changeDatabase(){const _0x522948=_0x35600b;currentDatabase=document[_0x522948(0x206)](_0x522948(0x27c))['value'],updateImportFileAccept(),loadTickets();}function updateImportFileAccept(){const _0x487dc7=_0x35600b,_0x2468da=document[_0x487dc7(0x206)](_0x487dc7(0x271));currentDatabase==='TicketsTransit'?_0x2468da[_0x487dc7(0x288)]=_0x487dc7(0x279):_0x2468da[_0x487dc7(0x288)]='.json,.csv,.txt';}window[_0x35600b(0x254)]=()=>{checkAuth()&&(updateImportFileAccept(),loadTickets());};function logout(){const _0x4154b0=_0x35600b;sessionStorage[_0x4154b0(0x291)](),window['location'][_0x4154b0(0x215)](_0x4154b0(0x292));}document[_0x35600b(0x206)]('searchBar')['addEventListener']('input',searchTickets),window[_0x35600b(0x254)]=()=>{checkAuth()&&loadTickets();};
</script>

</body>
</html>
